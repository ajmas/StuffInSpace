(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var K0=Math.PI,o0=K0*2,i2=K0/180,H2=398600.8,k0=6378.135,Q0=60/Math.sqrt(k0*k0*k0/H2),q2=k0*Q0/60,J2=1/Q0,Z0=.001082616,W2=-253881e-11,Y2=-165597e-11,$0=W2/Z0,h2=2/3;function B2(v,a){for(var h=[31,v%4===0?29:28,31,30,31,30,31,31,30,31,30,31],p=Math.floor(a),g=1,o=0;p>o+h[g-1]&&g<12;)o+=h[g-1],g+=1;var F=g,I=p-o,n=(a-p)*24,w=Math.floor(n);n=(n-w)*60;var l=Math.floor(n),e=(n-l)*60;return{mon:F,day:I,hr:w,minute:l,sec:e}}function N2(v,a,h,p,g,o){var F=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*v-Math.floor(7*(v+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+h+17210135e-1+((F/6e4+o/60+g)/60+p)/24}function y2(v,a,h,p,g,o,F){if(v instanceof Date){var I=v;return N2(I.getUTCFullYear(),I.getUTCMonth()+1,I.getUTCDate(),I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds(),I.getUTCMilliseconds())}return N2(v,a,h,p,g,o,F)}function S2(v,a){var h=v.e3,p=v.ee2,g=v.peo,o=v.pgho,F=v.pho,I=v.pinco,n=v.plo,w=v.se2,l=v.se3,e=v.sgh2,Z=v.sgh3,E=v.sgh4,$=v.sh2,m0=v.sh3,B=v.si2,O=v.si3,R=v.sl2,P=v.sl3,J=v.sl4,k=v.t,m=v.xgh2,b=v.xgh3,_=v.xgh4,j=v.xh2,c=v.xh3,S=v.xi2,M=v.xi3,n0=v.xl2,G=v.xl3,t=v.xl4,z=v.zmol,i0=v.zmos,K=a.init,W=a.opsmode,r0=a.ep,v0=a.inclp,x=a.nodep,e0=a.argpp,x0=a.mp,i,r,Y,C,V,A,T0,a0,z0,q,u,s,U,T,D,y,f,Q,X,L,H,f0=119459e-10,g0=.01675,C0=.00015835218,y0=.0549;H=i0+f0*k,K==="y"&&(H=i0),L=H+2*g0*Math.sin(H),f=Math.sin(L),q=.5*f*f-.25,u=-.5*f*Math.cos(L);var F0=w*q+l*u,I0=B*q+O*u,p0=R*q+P*u+J*f,l0=e*q+Z*u+E*f,M0=$*q+m0*u;H=z+C0*k,K==="y"&&(H=z),L=H+2*y0*Math.sin(H),f=Math.sin(L),q=.5*f*f-.25,u=-.5*f*Math.cos(L);var L0=p*q+h*u,D0=S*q+M*u,d0=n0*q+G*u+t*f,b0=m*q+b*u+_*f,W0=j*q+c*u;return s=F0+L0,D=I0+D0,y=p0+d0,U=l0+b0,T=M0+W0,K==="n"&&(s-=g,D-=I,y-=n,U-=o,T-=F,v0+=D,r0+=s,C=Math.sin(v0),Y=Math.cos(v0),v0>=.2?(T/=C,U-=Y*T,e0+=U,x+=T,x0+=y):(A=Math.sin(x),V=Math.cos(x),i=C*A,r=C*V,T0=T*V+D*Y*A,a0=-T*A+D*Y*V,i+=T0,r+=a0,x%=o0,x<0&&W==="a"&&(x+=o0),Q=x0+e0+Y*x,z0=y+U-D*x*C,Q+=z0,X=x,x=Math.atan2(i,r),x<0&&W==="a"&&(x+=o0),Math.abs(X-x)>K0&&(x<X?x+=o0:x-=o0),x0+=y,e0=Q-x0-Y*x)),{ep:r0,inclp:v0,nodep:x,argpp:e0,mp:x0}}function G2(v){var a=v.epoch,h=v.ep,p=v.argpp,g=v.tc,o=v.inclp,F=v.nodep,I=v.np,n,w,l,e,Z,E,$,m0,B,O,R,P,J,k,m,b,_,j,c,S,M,n0,G,t,z,i0,K,W,r0,v0,x,e0,x0,i,r,Y,C,V,A,T0,a0,z0,q,u,s,U,T,D,y,f,Q,X,L,H,f0,g0,C0,y0,F0,I0,p0,l0,M0,L0=.01675,D0=.0549,d0=29864797e-13,b0=47968065e-14,W0=.39785416,O0=.91744867,q0=.1945905,V0=-.98088458,S0=I,Y0=h,P0=Math.sin(F),_0=Math.cos(F),U0=Math.sin(p),E0=Math.cos(p),A0=Math.sin(o),B0=Math.cos(o),d=Y0*Y0,H0=1-d,N0=Math.sqrt(H0),R0=0,N=0,a2=0,m2=0,r2=0,X0=a+18261.5+g/1440,G0=(4.523602-.00092422029*X0)%o0,w0=Math.sin(G0),J0=Math.cos(G0),d2=.91375164-.03568096*J0,o2=Math.sqrt(1-d2*d2),j0=.089683511*w0/o2,u0=Math.sqrt(1-j0*j0),h0=5.8351514+.001944368*X0,c0=.39785416*w0/o2,w2=u0*J0+.91744867*j0*w0;c0=Math.atan2(c0,w2),c0+=h0-G0;var e2=Math.cos(c0),C2=Math.sin(c0);S=q0,M=V0,t=O0,z=W0,n0=_0,G=P0,R=d0;for(var T2=1/S0,x2=0;x2<2;)x2+=1,n=S*n0+M*t*G,l=-M*n0+S*t*G,$=-S*G+M*t*n0,m0=M*z,B=M*G+S*t*n0,O=S*z,w=B0*$+A0*m0,e=B0*B+A0*O,Z=-A0*$+B0*m0,E=-A0*B+B0*O,P=n*E0+w*U0,J=l*E0+e*U0,k=-n*U0+w*E0,m=-l*U0+e*E0,b=Z*U0,_=E*U0,j=Z*E0,c=E*E0,p0=12*P*P-3*k*k,l0=24*P*J-6*k*m,M0=12*J*J-3*m*m,X=3*(n*n+w*w)+p0*d,L=6*(n*l+w*e)+l0*d,H=3*(l*l+e*e)+M0*d,f0=-6*n*Z+d*(-24*P*j-6*k*b),g0=-6*(n*E+l*Z)+d*(-24*(J*j+P*c)+-6*(k*_+m*b)),C0=-6*l*E+d*(-24*J*c-6*m*_),y0=6*w*Z+d*(24*P*b-6*k*j),F0=6*(e*Z+w*E)+d*(24*(J*b+P*_)-6*(m*j+k*c)),I0=6*e*E+d*(24*J*_-6*m*c),X=X+X+H0*p0,L=L+L+H0*l0,H=H+H+H0*M0,T=R*T2,U=-.5*T/N0,D=T*N0,s=-15*Y0*D,y=P*k+J*m,f=J*k+P*m,Q=J*m-P*k,x2===1&&(i0=s,K=U,W=T,r0=D,v0=y,x=f,e0=Q,x0=X,i=L,r=H,Y=f0,C=g0,V=C0,A=y0,T0=F0,a0=I0,z0=p0,q=l0,u=M0,S=e2,M=C2,t=d2,z=o2,n0=u0*_0+j0*P0,G=P0*u0-_0*j0,R=b0);var g2=(4.7199672+(.2299715*X0-h0))%o0,U2=(6.2565837+.017201977*X0)%o0,F2=2*i0*x,t0=2*i0*e0,v2=2*K*C,I2=2*K*(V-Y),j2=-2*W*i,u2=-2*W*(r-x0),D2=-2*W*(-21-9*d)*L0,n2=2*r0*q,E2=2*r0*(u-z0),O2=-18*r0*L0,l2=-2*K*T0,b2=-2*K*(a0-A),z2=2*s*f,k2=2*s*Q,L2=2*U*g0,R2=2*U*(C0-f0),c2=-2*T*L,t2=-2*T*(H-X),v1=-2*T*(-21-9*d)*D0,a1=2*D*l0,d1=2*D*(M0-p0),o1=-18*D*D0,n1=-2*U*F0,i1=-2*U*(I0-y0);return{snodm:P0,cnodm:_0,sinim:A0,cosim:B0,sinomm:U0,cosomm:E0,day:X0,e3:k2,ee2:z2,em:Y0,emsq:d,gam:h0,peo:R0,pgho:m2,pho:r2,pinco:N,plo:a2,rtemsq:N0,se2:F2,se3:t0,sgh2:n2,sgh3:E2,sgh4:O2,sh2:l2,sh3:b2,si2:v2,si3:I2,sl2:j2,sl3:u2,sl4:D2,s1:s,s2:U,s3:T,s4:D,s5:y,s6:f,s7:Q,ss1:i0,ss2:K,ss3:W,ss4:r0,ss5:v0,ss6:x,ss7:e0,sz1:x0,sz2:i,sz3:r,sz11:Y,sz12:C,sz13:V,sz21:A,sz22:T0,sz23:a0,sz31:z0,sz32:q,sz33:u,xgh2:a1,xgh3:d1,xgh4:o1,xh2:n1,xh3:i1,xi2:L2,xi3:R2,xl2:c2,xl3:t2,xl4:v1,nm:S0,z1:X,z2:L,z3:H,z11:f0,z12:g0,z13:C0,z21:y0,z22:F0,z23:I0,z31:p0,z32:l0,z33:M0,zmol:g2,zmos:U2}}function K2(v){var a=v.cosim,h=v.argpo,p=v.s1,g=v.s2,o=v.s3,F=v.s4,I=v.s5,n=v.sinim,w=v.ss1,l=v.ss2,e=v.ss3,Z=v.ss4,E=v.ss5,$=v.sz1,m0=v.sz3,B=v.sz11,O=v.sz13,R=v.sz21,P=v.sz23,J=v.sz31,k=v.sz33,m=v.t,b=v.tc,_=v.gsto,j=v.mo,c=v.mdot,S=v.no,M=v.nodeo,n0=v.nodedot,G=v.xpidot,t=v.z1,z=v.z3,i0=v.z11,K=v.z13,W=v.z21,r0=v.z23,v0=v.z31,x=v.z33,e0=v.ecco,x0=v.eccsq,i=v.emsq,r=v.em,Y=v.argpm,C=v.inclm,V=v.mm,A=v.nm,T0=v.nodem,a0=v.irez,z0=v.atime,q=v.d2201,u=v.d2211,s=v.d3210,U=v.d3222,T=v.d4410,D=v.d4422,y=v.d5220,f=v.d5232,Q=v.d5421,X=v.d5433,L=v.dedt,H=v.didt,f0=v.dmdt,g0=v.dnodt,C0=v.domdt,y0=v.del1,F0=v.del2,I0=v.del3,p0=v.xfact,l0=v.xlamo,M0=v.xli,L0=v.xni,D0,d0,b0,W0,O0,q0,V0,S0,Y0,P0,_0,U0,E0,A0,B0,d,H0,N0,R0,N,a2,m2,r2,X0,G0,w0,J0,d2,o2,j0,u0,h0,c0=17891679e-13,w2=21460748e-13,e2=22123015e-14,C2=17891679e-13,T2=73636953e-16,x2=21765803e-16,g2=.0043752690880113,U2=37393792e-14,F2=11428639e-14,t0=.00015835218,v2=119459e-10;a0=0,A<.0052359877&&A>.0034906585&&(a0=1),A>=.00826&&A<=.00924&&r>=.5&&(a0=2);var I2=w*v2*E,j2=l*v2*(B+O),u2=-v2*e*($+m0-14-6*i),D2=Z*v2*(J+k-6),n2=-v2*l*(R+P);(C<.052359877||C>K0-.052359877)&&(n2=0),n!==0&&(n2/=n);var E2=D2-a*n2;L=I2+p*t0*I,H=j2+g*t0*(i0+K),f0=u2-t0*o*(t+z-14-6*i);var O2=F*t0*(v0+x-6),l2=-t0*g*(W+r0);(C<.052359877||C>K0-.052359877)&&(l2=0),C0=E2+O2,g0=n2,n!==0&&(C0-=a/n*l2,g0+=l2/n);var b2=0,z2=(_+b*g2)%o0;if(r+=L*m,C+=H*m,Y+=C0*m,T0+=g0*m,V+=f0*m,a0!==0){if(j0=Math.pow(A/Q0,h2),a0===2){u0=a*a;var k2=r;r=e0;var L2=i;i=x0,h0=r*i,A0=-.306-(r-.64)*.44,r<=.65?(B0=3.616-13.247*r+16.29*i,H0=-19.302+117.39*r-228.419*i+156.591*h0,N0=-18.9068+109.7927*r-214.6334*i+146.5816*h0,R0=-41.122+242.694*r-471.094*i+313.953*h0,N=-146.407+841.88*r-1629.014*i+1083.435*h0,a2=-532.114+3017.977*r-5740.032*i+3708.276*h0):(B0=-72.099+331.819*r-508.738*i+266.724*h0,H0=-346.844+1582.851*r-2415.925*i+1246.113*h0,N0=-342.585+1554.908*r-2366.899*i+1215.972*h0,R0=-1052.797+4758.686*r-7193.992*i+3651.957*h0,N=-3581.69+16178.11*r-24462.77*i+12422.52*h0,r>.715?a2=-5149.66+29936.92*r-54087.36*i+31324.56*h0:a2=1464.74-4664.75*r+3763.64*i),r<.7?(X0=-919.2277+4988.61*r-9064.77*i+5542.21*h0,m2=-822.71072+4568.6173*r-8491.4146*i+5337.524*h0,r2=-853.666+4690.25*r-8624.77*i+5341.4*h0):(X0=-37995.78+161616.52*r-229838.2*i+109377.94*h0,m2=-51752.104+218913.95*r-309468.16*i+146349.42*h0,r2=-40023.88+170470.89*r-242699.48*i+115605.82*h0),G0=n*n,D0=.75*(1+2*a+u0),d0=1.5*G0,W0=1.875*n*(1-2*a-3*u0),O0=-1.875*n*(1+2*a-3*u0),V0=35*G0*D0,S0=39.375*G0*G0,Y0=9.84375*n*(G0*(1-2*a-5*u0)+.33333333*(-2+4*a+6*u0)),P0=n*(4.92187512*G0*(-2-4*a+10*u0)+6.56250012*(1+2*a-3*u0)),_0=29.53125*n*(2-8*a+u0*(-12+8*a+10*u0)),U0=29.53125*n*(-2-8*a+u0*(12+8*a-10*u0)),d2=A*A,o2=j0*j0,J0=3*d2*o2,w0=J0*C2,q=w0*D0*A0,u=w0*d0*B0,J0*=j0,w0=J0*U2,s=w0*W0*H0,U=w0*O0*N0,J0*=j0,w0=2*J0*T2,T=w0*V0*R0,D=w0*S0*N,J0*=j0,w0=J0*F2,y=w0*Y0*a2,f=w0*P0*r2,w0=2*J0*x2,Q=w0*_0*m2,X=w0*U0*X0,l0=(j+M+M-(z2+z2))%o0,p0=c+f0+2*(n0+g0-g2)-S,r=k2,i=L2}a0===1&&(E0=1+i*(-2.5+.8125*i),H0=1+2*i,d=1+i*(-6+6.60937*i),D0=.75*(1+a)*(1+a),b0=.9375*n*n*(1+3*a)-.75*(1+a),q0=1+a,q0*=1.875*q0*q0,y0=3*A*A*j0*j0,F0=2*y0*D0*E0*c0,I0=3*y0*q0*d*e2*j0,y0=y0*b0*H0*w2*j0,l0=(j+M+h-z2)%o0,p0=c+G+f0+C0+g0-(S+g2)),M0=l0,L0=S,z0=0,A=S+b2}return{em:r,argpm:Y,inclm:C,mm:V,nm:A,nodem:T0,irez:a0,atime:z0,d2201:q,d2211:u,d3210:s,d3222:U,d4410:T,d4422:D,d5220:y,d5232:f,d5421:Q,d5433:X,dedt:L,didt:H,dmdt:f0,dndt:b2,dnodt:g0,domdt:C0,del1:y0,del2:F0,del3:I0,xfact:p0,xlamo:l0,xli:M0,xni:L0}}function P2(v){var a=(v-2451545)/36525,h=-62e-7*a*a*a+.093104*a*a+(876600*3600+8640184812866e-6)*a+67310.54841;return h=h*i2/240%o0,h<0&&(h+=o0),h}function Q2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?P2(y2.apply(void 0,arguments)):P2.apply(void 0,arguments)}function V2(v){var a=v.ecco,h=v.epoch,p=v.inclo,g=v.opsmode,o=v.no,F=a*a,I=1-F,n=Math.sqrt(I),w=Math.cos(p),l=w*w,e=Math.pow(Q0/o,h2),Z=.75*Z0*(3*l-1)/(n*I),E=Z/(e*e),$=e*(1-E*E-E*(1/3+134*E*E/81));E=Z/($*$),o/=1+E;var m0=Math.pow(Q0/o,h2),B=Math.sin(p),O=m0*I,R=1-5*l,P=-R-l-l,J=1/m0,k=O*O,m=m0*(1-a),b="n",_;if(g==="a"){var j=h-7305,c=Math.floor(j+1e-8),S=j-c,M=.017202791694070362,n0=1.7321343856509375,G=5075514194322695e-30,t=M+o0;_=(n0+M*c+t*S+j*j*G)%o0,_<0&&(_+=o0)}else _=Q2(h+24332815e-1);return{no:o,method:b,ainv:J,ao:m0,con41:P,con42:R,cosio:w,cosio2:l,eccsq:F,omeosq:I,posq:k,rp:m,rteosq:n,sinio:B,gsto:_}}function X2(v){var a=v.irez,h=v.d2201,p=v.d2211,g=v.d3210,o=v.d3222,F=v.d4410,I=v.d4422,n=v.d5220,w=v.d5232,l=v.d5421,e=v.d5433,Z=v.dedt,E=v.del1,$=v.del2,m0=v.del3,B=v.didt,O=v.dmdt,R=v.dnodt,P=v.domdt,J=v.argpo,k=v.argpdot,m=v.t,b=v.tc,_=v.gsto,j=v.xfact,c=v.xlamo,S=v.no,M=v.atime,n0=v.em,G=v.argpm,t=v.inclm,z=v.xli,i0=v.mm,K=v.xni,W=v.nodem,r0=v.nm,v0=.13130908,x=2.8843198,e0=.37448087,x0=5.7686396,i=.95240898,r=1.8014998,Y=1.050833,C=4.4108898,V=.0043752690880113,A=720,T0=-720,a0=259200,z0,q,u,s,U,T,D,y,f=0,Q=0,X=(_+b*V)%o0;if(n0+=Z*m,t+=B*m,G+=P*m,W+=R*m,i0+=O*m,a!==0){(M===0||m*M<=0||Math.abs(m)<Math.abs(M))&&(M=0,K=S,z=c),m>0?z0=A:z0=T0;for(var L=381;L===381;)a!==2?(D=E*Math.sin(z-v0)+$*Math.sin(2*(z-x))+m0*Math.sin(3*(z-e0)),U=K+j,T=E*Math.cos(z-v0)+2*$*Math.cos(2*(z-x))+3*m0*Math.cos(3*(z-e0)),T*=U):(y=J+k*M,u=y+y,q=z+z,D=h*Math.sin(u+z-x0)+p*Math.sin(z-x0)+g*Math.sin(y+z-i)+o*Math.sin(-y+z-i)+F*Math.sin(u+q-r)+I*Math.sin(q-r)+n*Math.sin(y+z-Y)+w*Math.sin(-y+z-Y)+l*Math.sin(y+q-C)+e*Math.sin(-y+q-C),U=K+j,T=h*Math.cos(u+z-x0)+p*Math.cos(z-x0)+g*Math.cos(y+z-i)+o*Math.cos(-y+z-i)+n*Math.cos(y+z-Y)+w*Math.cos(-y+z-Y)+2*(F*Math.cos(u+q-r)+I*Math.cos(q-r)+l*Math.cos(y+q-C)+e*Math.cos(-y+q-C)),T*=U),Math.abs(m-M)>=A?L=381:(Q=m-M,L=0),L===381&&(z+=U*z0+D*a0,K+=D*z0+T*a0,M+=z0);r0=K+D*Q+T*Q*Q*.5,s=z+U*Q+D*Q*Q*.5,a!==1?(i0=s-2*W+2*X,f=r0-S):(i0=s-W-G+X,f=r0-S),r0=S+f}return{atime:M,em:n0,argpm:G,inclm:t,xli:z,mm:i0,xni:K,nodem:W,dndt:f,nm:r0}}function _2(v,a){var h,p,g,o,F,I,n,w,l,e,Z,E,$,m0,B,O,R,P,J,k,m,b,_,j,c,S,M,n0=15e-13;v.t=a,v.error=0;var G=v.mo+v.mdot*v.t,t=v.argpo+v.argpdot*v.t,z=v.nodeo+v.nodedot*v.t;l=t,m=G;var i0=v.t*v.t;if(_=z+v.nodecf*i0,R=1-v.cc1*v.t,P=v.bstar*v.cc4*v.t,J=v.t2cof*i0,v.isimp!==1){n=v.omgcof*v.t;var K=1+v.eta*Math.cos(G);I=v.xmcof*(K*K*K-v.delmo),O=n+I,m=G+O,l=t-O,E=i0*v.t,$=E*v.t,R=R-v.d2*i0-v.d3*E-v.d4*$,P+=v.bstar*v.cc5*(Math.sin(m)-v.sinmao),J=J+v.t3cof*E+$*(v.t4cof+v.t*v.t5cof)}b=v.no;var W=v.ecco;if(k=v.inclo,v.method==="d"){m0=v.t;var r0={irez:v.irez,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,del1:v.del1,del2:v.del2,del3:v.del3,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,argpo:v.argpo,argpdot:v.argpdot,t:v.t,tc:m0,gsto:v.gsto,xfact:v.xfact,xlamo:v.xlamo,no:v.no,atime:v.atime,em:W,argpm:l,inclm:k,xli:v.xli,mm:m,xni:v.xni,nodem:_,nm:b},v0=X2(r0);W=v0.em,l=v0.argpm,k=v0.inclm,m=v0.mm,_=v0.nodem,b=v0.nm}if(b<=0)return v.error=2,[!1,!1];var x=Math.pow(Q0/b,h2)*R*R;if(b=Q0/Math.pow(x,1.5),W-=P,W>=1||W<-.001)return v.error=1,[!1,!1];W<1e-6&&(W=1e-6),m+=v.no*J,c=m+l+_,_%=o0,l%=o0,c%=o0,m=(c-l-_)%o0;var e0=Math.sin(k),x0=Math.cos(k),i=W;if(j=k,e=l,M=_,S=m,o=e0,g=x0,v.method==="d"){var r={inclo:v.inclo,init:"n",ep:i,inclp:j,nodep:M,argpp:e,mp:S,opsmode:v.operationmode},Y=S2(v,r);if(i=Y.ep,M=Y.nodep,e=Y.argpp,S=Y.mp,j=Y.inclp,j<0&&(j=-j,M+=K0,e-=K0),i<0||i>1)return v.error=3,[!1,!1]}v.method==="d"&&(o=Math.sin(j),g=Math.cos(j),v.aycof=-.5*$0*o,Math.abs(g+1)>15e-13?v.xlcof=-.25*$0*o*(3+5*g)/(1+g):v.xlcof=-.25*$0*o*(3+5*g)/n0);var C=i*Math.cos(e);O=1/(x*(1-i*i));var V=i*Math.sin(e)+O*v.aycof,A=S+e+M+O*v.xlcof*C,T0=(A-M)%o0;w=T0,B=9999.9;for(var a0=1;Math.abs(B)>=1e-12&&a0<=10;)p=Math.sin(w),h=Math.cos(w),B=1-h*C-p*V,B=(T0-V*h+C*p-w)/B,Math.abs(B)>=.95&&(B>0?B=.95:B=-.95),w+=B,a0+=1;var z0=C*h+V*p,q=C*p-V*h,u=C*C+V*V,s=x*(1-u);if(s<0)return v.error=4,[!1,!1];var U=x*(1-z0),T=Math.sqrt(x)*q/U,D=Math.sqrt(s)/U,y=Math.sqrt(1-u);O=q/(1+y);var f=x/U*(p-V-C*O),Q=x/U*(h-C+V*O);Z=Math.atan2(f,Q);var X=(Q+Q)*f,L=1-2*f*f;O=1/s;var H=.5*Z0*O,f0=H*O;v.method==="d"&&(F=g*g,v.con41=3*F-1,v.x1mth2=1-F,v.x7thm1=7*F-1);var g0=U*(1-1.5*f0*y*v.con41)+.5*H*v.x1mth2*L;if(g0<1)return v.error=6,{position:!1,velocity:!1};Z-=.25*f0*v.x7thm1*X;var C0=M+1.5*f0*g*X,y0=j+1.5*f0*g*o*L,F0=T-b*H*v.x1mth2*X/Q0,I0=D+b*H*(v.x1mth2*L+1.5*v.con41)/Q0,p0=Math.sin(Z),l0=Math.cos(Z),M0=Math.sin(C0),L0=Math.cos(C0),D0=Math.sin(y0),d0=Math.cos(y0),b0=-M0*d0,W0=L0*d0,O0=b0*p0+L0*l0,q0=W0*p0+M0*l0,V0=D0*p0,S0=b0*l0-L0*p0,Y0=W0*l0-M0*p0,P0=D0*l0,_0={x:g0*O0*k0,y:g0*q0*k0,z:g0*V0*k0},U0={x:(F0*O0+I0*S0)*q2,y:(F0*q0+I0*Y0)*q2,z:(F0*V0+I0*P0)*q2};return{position:_0,velocity:U0}}function Z2(v,a){var h=a.opsmode,p=a.satn,g=a.epoch,o=a.xbstar,F=a.xecco,I=a.xargpo,n=a.xinclo,w=a.xmo,l=a.xno,e=a.xnodeo,Z,E,$,m0,B,O,R,P,J,k,m,b,_,j,c,S,M,n0,G,t,z,i0,K,W,r0,v0,x,e0,x0,i,r,Y,C,V,A,T0,a0,z0,q,u,s,U,T,D,y,f,Q,X,L,H,f0,g0,C0,y0,F0,I0,p0=15e-13;v.isimp=0,v.method="n",v.aycof=0,v.con41=0,v.cc1=0,v.cc4=0,v.cc5=0,v.d2=0,v.d3=0,v.d4=0,v.delmo=0,v.eta=0,v.argpdot=0,v.omgcof=0,v.sinmao=0,v.t=0,v.t2cof=0,v.t3cof=0,v.t4cof=0,v.t5cof=0,v.x1mth2=0,v.x7thm1=0,v.mdot=0,v.nodedot=0,v.xlcof=0,v.xmcof=0,v.nodecf=0,v.irez=0,v.d2201=0,v.d2211=0,v.d3210=0,v.d3222=0,v.d4410=0,v.d4422=0,v.d5220=0,v.d5232=0,v.d5421=0,v.d5433=0,v.dedt=0,v.del1=0,v.del2=0,v.del3=0,v.didt=0,v.dmdt=0,v.dnodt=0,v.domdt=0,v.e3=0,v.ee2=0,v.peo=0,v.pgho=0,v.pho=0,v.pinco=0,v.plo=0,v.se2=0,v.se3=0,v.sgh2=0,v.sgh3=0,v.sgh4=0,v.sh2=0,v.sh3=0,v.si2=0,v.si3=0,v.sl2=0,v.sl3=0,v.sl4=0,v.gsto=0,v.xfact=0,v.xgh2=0,v.xgh3=0,v.xgh4=0,v.xh2=0,v.xh3=0,v.xi2=0,v.xi3=0,v.xl2=0,v.xl3=0,v.xl4=0,v.xlamo=0,v.zmol=0,v.zmos=0,v.atime=0,v.xli=0,v.xni=0,v.bstar=o,v.ecco=F,v.argpo=I,v.inclo=n,v.mo=w,v.no=l,v.nodeo=e,v.operationmode=h;var l0=78/k0+1,M0=(120-78)/k0,L0=M0*M0*M0*M0;v.init="y",v.t=0;var D0={satn:p,ecco:v.ecco,epoch:g,inclo:v.inclo,no:v.no,method:v.method,opsmode:v.operationmode},d0=V2(D0),b0=d0.ao,W0=d0.con42,O0=d0.cosio,q0=d0.cosio2,V0=d0.eccsq,S0=d0.omeosq,Y0=d0.posq,P0=d0.rp,_0=d0.rteosq,U0=d0.sinio;if(v.no=d0.no,v.con41=d0.con41,v.gsto=d0.gsto,v.a=Math.pow(v.no*J2,-2/3),v.alta=v.a*(1+v.ecco)-1,v.altp=v.a*(1-v.ecco)-1,v.error=0,S0>=0||v.no>=0){if(v.isimp=0,P0<220/k0+1&&(v.isimp=1),x=l0,z=L0,n0=(P0-1)*k0,n0<156){x=n0-78,n0<98&&(x=20);var E0=(120-x)/k0;z=E0*E0*E0*E0,x=x/k0+1}G=1/Y0,f=1/(b0-x),v.eta=b0*v.ecco*f,b=v.eta*v.eta,m=v.ecco*v.eta,t=Math.abs(1-b),O=z*Math.pow(f,4),R=O/Math.pow(t,3.5),m0=R*v.no*(b0*(1+1.5*b+m*(4+b))+.375*Z0*f/t*v.con41*(8+3*b*(8+b))),v.cc1=v.bstar*m0,B=0,v.ecco>1e-4&&(B=-2*O*f*$0*v.no*U0/v.ecco),v.x1mth2=1-q0,v.cc4=2*v.no*R*b0*S0*(v.eta*(2+.5*b)+v.ecco*(.5+2*b)-Z0*f/(b0*t)*(-3*v.con41*(1-2*m+b*(1.5-.5*m))+.75*v.x1mth2*(2*b-m*(1+b))*Math.cos(2*v.argpo))),v.cc5=2*R*b0*S0*(1+2.75*(b+m)+m*b),P=q0*q0,T=1.5*Z0*G*v.no,D=.5*T*Z0*G,y=-.46875*Y2*G*G*v.no,v.mdot=v.no+.5*T*_0*v.con41+.0625*D*_0*(13-78*q0+137*P),v.argpdot=-.5*T*W0+.0625*D*(7-114*q0+395*P)+y*(3-36*q0+49*P),X=-T*O0,v.nodedot=X+(.5*D*(4-19*q0)+2*y*(3-7*q0))*O0,Q=v.argpdot+v.nodedot,v.omgcof=v.bstar*B*Math.cos(v.argpo),v.xmcof=0,v.ecco>1e-4&&(v.xmcof=-h2*O*v.bstar/m),v.nodecf=3.5*S0*X*v.cc1,v.t2cof=1.5*v.cc1,Math.abs(O0+1)>15e-13?v.xlcof=-.25*$0*U0*(3+5*O0)/(1+O0):v.xlcof=-.25*$0*U0*(3+5*O0)/p0,v.aycof=-.5*$0*U0;var A0=1+v.eta*Math.cos(v.mo);if(v.delmo=A0*A0*A0,v.sinmao=Math.sin(v.mo),v.x7thm1=7*q0-1,2*K0/v.no>=225){v.method="d",v.isimp=1,s=0,c=v.inclo;var B0={epoch:g,ep:v.ecco,argpp:v.argpo,tc:s,inclp:v.inclo,nodep:v.nodeo,np:v.no,e3:v.e3,ee2:v.ee2,peo:v.peo,pgho:v.pgho,pho:v.pho,pinco:v.pinco,plo:v.plo,se2:v.se2,se3:v.se3,sgh2:v.sgh2,sgh3:v.sgh3,sgh4:v.sgh4,sh2:v.sh2,sh3:v.sh3,si2:v.si2,si3:v.si3,sl2:v.sl2,sl3:v.sl3,sl4:v.sl4,xgh2:v.xgh2,xgh3:v.xgh3,xgh4:v.xgh4,xh2:v.xh2,xh3:v.xh3,xi2:v.xi2,xi3:v.xi3,xl2:v.xl2,xl3:v.xl3,xl4:v.xl4,zmol:v.zmol,zmos:v.zmos},d=G2(B0);v.e3=d.e3,v.ee2=d.ee2,v.peo=d.peo,v.pgho=d.pgho,v.pho=d.pho,v.pinco=d.pinco,v.plo=d.plo,v.se2=d.se2,v.se3=d.se3,v.sgh2=d.sgh2,v.sgh3=d.sgh3,v.sgh4=d.sgh4,v.sh2=d.sh2,v.sh3=d.sh3,v.si2=d.si2,v.si3=d.si3,v.sl2=d.sl2,v.sl3=d.sl3,v.sl4=d.sl4,E=d.sinim,Z=d.cosim,J=d.em,k=d.emsq,i0=d.s1,K=d.s2,W=d.s3,r0=d.s4,v0=d.s5,e0=d.ss1,x0=d.ss2,i=d.ss3,r=d.ss4,Y=d.ss5,C=d.sz1,V=d.sz3,A=d.sz11,T0=d.sz13,a0=d.sz21,z0=d.sz23,q=d.sz31,u=d.sz33,v.xgh2=d.xgh2,v.xgh3=d.xgh3,v.xgh4=d.xgh4,v.xh2=d.xh2,v.xh3=d.xh3,v.xi2=d.xi2,v.xi3=d.xi3,v.xl2=d.xl2,v.xl3=d.xl3,v.xl4=d.xl4,v.zmol=d.zmol,v.zmos=d.zmos,M=d.nm,L=d.z1,H=d.z3,f0=d.z11,g0=d.z13,C0=d.z21,y0=d.z23,F0=d.z31,I0=d.z33;var H0={inclo:c,init:v.init,ep:v.ecco,inclp:v.inclo,nodep:v.nodeo,argpp:v.argpo,mp:v.mo,opsmode:v.operationmode},N0=S2(v,H0);v.ecco=N0.ep,v.inclo=N0.inclp,v.nodeo=N0.nodep,v.argpo=N0.argpp,v.mo=N0.mp,_=0,j=0,S=0;var R0={cosim:Z,emsq:k,argpo:v.argpo,s1:i0,s2:K,s3:W,s4:r0,s5:v0,sinim:E,ss1:e0,ss2:x0,ss3:i,ss4:r,ss5:Y,sz1:C,sz3:V,sz11:A,sz13:T0,sz21:a0,sz23:z0,sz31:q,sz33:u,t:v.t,tc:s,gsto:v.gsto,mo:v.mo,mdot:v.mdot,no:v.no,nodeo:v.nodeo,nodedot:v.nodedot,xpidot:Q,z1:L,z3:H,z11:f0,z13:g0,z21:C0,z23:y0,z31:F0,z33:I0,ecco:v.ecco,eccsq:V0,em:J,argpm:_,inclm:c,mm:S,nm:M,nodem:j,irez:v.irez,atime:v.atime,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,del1:v.del1,del2:v.del2,del3:v.del3,xfact:v.xfact,xlamo:v.xlamo,xli:v.xli,xni:v.xni},N=K2(R0);v.irez=N.irez,v.atime=N.atime,v.d2201=N.d2201,v.d2211=N.d2211,v.d3210=N.d3210,v.d3222=N.d3222,v.d4410=N.d4410,v.d4422=N.d4422,v.d5220=N.d5220,v.d5232=N.d5232,v.d5421=N.d5421,v.d5433=N.d5433,v.dedt=N.dedt,v.didt=N.didt,v.dmdt=N.dmdt,v.dnodt=N.dnodt,v.domdt=N.domdt,v.del1=N.del1,v.del2=N.del2,v.del3=N.del3,v.xfact=N.xfact,v.xlamo=N.xlamo,v.xli=N.xli,v.xni=N.xni}v.isimp!==1&&($=v.cc1*v.cc1,v.d2=4*b0*f*$,U=v.d2*f*v.cc1/3,v.d3=(17*b0+x)*U,v.d4=.5*U*b0*f*(221*b0+31*x)*v.cc1,v.t3cof=v.d2+2*$,v.t4cof=.25*(3*v.d3+v.cc1*(12*v.d2+10*$)),v.t5cof=.2*(3*v.d4+12*v.cc1*v.d3+6*v.d2*v.d2+15*$*(2*v.d2+$)))}_2(v,0),v.init="n"}function $2(v,a){var h="i",p=1440/(2*K0),g=0,o={};o.error=0,o.satnum=v.substring(2,7),o.epochyr=parseInt(v.substring(18,20),10),o.epochdays=parseFloat(v.substring(20,32)),o.ndot=parseFloat(v.substring(33,43)),o.nddot=parseFloat(".".concat(parseInt(v.substring(44,50),10),"E").concat(v.substring(50,52))),o.bstar=parseFloat("".concat(v.substring(53,54),".").concat(parseInt(v.substring(54,59),10),"E").concat(v.substring(59,61))),o.inclo=parseFloat(a.substring(8,16)),o.nodeo=parseFloat(a.substring(17,25)),o.ecco=parseFloat(".".concat(a.substring(26,33))),o.argpo=parseFloat(a.substring(34,42)),o.mo=parseFloat(a.substring(43,51)),o.no=parseFloat(a.substring(52,63)),o.no/=p,o.inclo*=i2,o.nodeo*=i2,o.argpo*=i2,o.mo*=i2,o.epochyr<57?g=o.epochyr+2e3:g=o.epochyr+1900;var F=B2(g,o.epochdays),I=F.mon,n=F.day,w=F.hr,l=F.minute,e=F.sec;return o.jdsatepoch=y2(g,I,n,w,l,e),Z2(o,{opsmode:h,satn:o.satnum,epoch:o.jdsatepoch-24332815e-1,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}function f2(v,a,...h){a(v,...h)}function s2(){return{error:f2.bind(this,"ERROR",console.error),warn:f2.bind(this,"WARN",console.warn),info:f2.bind(this,"INFO",console.info),debug:f2.bind(this,"DEBUG",console.debug)}}var p2=s2();let M2;const s0=[];let A2;onmessage=function(v){if(p2.debug("WORKER: Orbital calculation worker handling message"),v.data.isInit){A2=Date.now(),p2.debug("id",A2),p2.debug("message.data.isInit");const a=JSON.parse(v.data.satData);for(let h=0;h<a.length;h++)s0[h]=$2(a[h].TLE_LINE1,a[h].TLE_LINE2);M2=v.data.numSegs}else{const{satId:a}=v.data,h=new Float32Array((M2+1)*3);if(!s0||!s0[a]){p2.debug("satCache",a,s0[a]);return}const p=new Date;let g=y2(p.getUTCFullYear(),p.getUTCMonth()+1,p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds());g+=p.getUTCMilliseconds()*115741e-13;const o=(g-s0[a].jdsatepoch)*1440,I=2*Math.PI/s0[a].no/M2;for(let n=0;n<M2+1;n++){const w=o+n*I,l=_2(s0[a],w).position;try{h[n*3]=l.x,h[n*3+1]=l.y,h[n*3+2]=l.z}catch{h[n*3]=0,h[n*3+1]=0,h[n*3+2]=0}}postMessage({pointsOut:h.buffer,satId:a},[h.buffer])}}})();
