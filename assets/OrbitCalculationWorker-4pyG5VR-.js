(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var Q0=Math.PI,d0=Q0*2,r2=Q0/180,G2=398600.8,E0=6378.135,V0=60/Math.sqrt(E0*E0*E0/G2),u2=E0*V0/60,K2=1/V0,Z0=.001082616,Q2=-253881e-11,V2=-165597e-11,$0=Q2/Z0,h2=2/3;function W2(v,o){for(var n=[31,v%4===0?29:28,31,30,31,30,31,31,30,31,30,31],l=Math.floor(o),g=1,d=0;l>d+n[g-1]&&g<12;)d+=n[g-1],g+=1;var L=g,f=l-d,m=(o-l)*24,b=Math.floor(m);m=(m-b)*60;var z=Math.floor(m),C=(m-z)*60;return{mon:L,day:f,hr:b,minute:z,sec:C}}function A2(v,o,n,l,g,d){var L=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*v-Math.floor(7*(v+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+n+17210135e-1+((L/6e4+d/60+g)/60+l)/24}function w2(v,o,n,l,g,d,L){if(v instanceof Date){var f=v;return A2(f.getUTCFullYear(),f.getUTCMonth()+1,f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds())}return A2(v,o,n,l,g,d,L)}function N2(v,o){var n=v.e3,l=v.ee2,g=v.peo,d=v.pgho,L=v.pho,f=v.pinco,m=v.plo,b=v.se2,z=v.se3,C=v.sgh2,Z=v.sgh3,I=v.sgh4,$=v.sh2,h0=v.sh3,G=v.si2,D=v.si3,R=v.sl2,S=v.sl3,J=v.sl4,E=v.t,r=v.xgh2,q=v.xgh3,A=v.xgh4,F=v.xh2,t=v.xh3,P=v.xi2,e=v.xi3,n0=v.xl2,K=v.xl3,c=v.xl4,p=v.zmol,i0=v.zmos,Q=o.init,Y=o.opsmode,m0=o.ep,v0=o.inclp,x=o.nodep,u0=o.argpp,g0=o.mp,i,h,B,w,W,N,T0,o0,f0,y,O,s,U,T,j,u,M,V,X,_,H,z0=119459e-10,l0=.01675,w0=.00015835218,q0=.0549;H=i0+z0*E,Q==="y"&&(H=i0),_=H+2*l0*Math.sin(H),M=Math.sin(_),y=.5*M*M-.25,O=-.5*M*Math.cos(_);var C0=b*y+z*O,U0=G*y+D*O,p0=R*y+S*O+J*M,x0=C*y+Z*O+I*M,M0=$*y+h0*O;H=p+w0*E,Q==="y"&&(H=p),_=H+2*q0*Math.sin(H),M=Math.sin(_),y=.5*M*M-.25,O=-.5*M*Math.cos(_);var _0=l*y+n*O,j0=P*y+e*O,a0=n0*y+K*O+c*M,e0=r*y+q*O+A*M,Y0=F*y+t*O;return s=C0+_0,j=U0+j0,u=p0+a0,U=x0+e0,T=M0+Y0,Q==="n"&&(s-=g,j-=f,u-=m,U-=d,T-=L,v0+=j,m0+=s,w=Math.sin(v0),B=Math.cos(v0),v0>=.2?(T/=w,U-=B*T,u0+=U,x+=T,g0+=u):(N=Math.sin(x),W=Math.cos(x),i=w*N,h=w*W,T0=T*W+j*B*N,o0=-T*N+j*B*W,i+=T0,h+=o0,x%=d0,x<0&&Y==="a"&&(x+=d0),V=g0+u0+B*x,f0=u+U-j*x*w,V+=f0,X=x,x=Math.atan2(i,h),x<0&&Y==="a"&&(x+=d0),Math.abs(X-x)>Q0&&(x<X?x+=d0:x-=d0),g0+=u,u0=V-g0-B*x)),{ep:m0,inclp:v0,nodep:x,argpp:u0,mp:g0}}function X2(v){var o=v.epoch,n=v.ep,l=v.argpp,g=v.tc,d=v.inclp,L=v.nodep,f=v.np,m,b,z,C,Z,I,$,h0,G,D,R,S,J,E,r,q,A,F,t,P,e,n0,K,c,p,i0,Q,Y,m0,v0,x,u0,g0,i,h,B,w,W,N,T0,o0,f0,y,O,s,U,T,j,u,M,V,X,_,H,z0,l0,w0,q0,C0,U0,p0,x0,M0,_0=.01675,j0=.0549,a0=29864797e-13,e0=47968065e-14,Y0=.39785416,D0=.91744867,b0=.1945905,W0=-.98088458,P0=f,B0=n,S0=Math.sin(L),A0=Math.cos(L),L0=Math.sin(l),I0=Math.cos(l),N0=Math.sin(d),G0=Math.cos(d),a=B0*B0,H0=1-a,k0=Math.sqrt(H0),s0=0,k=0,a2=0,g2=0,l2=0,X0=o+18261.5+g/1440,K0=(4.523602-.00092422029*X0)%d0,y0=Math.sin(K0),J0=Math.cos(K0),d2=.91375164-.03568096*J0,n2=Math.sqrt(1-d2*d2),F0=.089683511*y0/n2,O0=Math.sqrt(1-F0*F0),r0=5.8351514+.001944368*X0,R0=.39785416*y0/n2,T2=O0*J0+.91744867*F0*y0;R0=Math.atan2(R0,T2),R0+=r0-K0;var L2=Math.cos(R0),C2=Math.sin(R0);P=b0,e=W0,c=D0,p=Y0,n0=A0,K=S0,R=a0;for(var U2=1/P0,x2=0;x2<2;)x2+=1,m=P*n0+e*c*K,z=-e*n0+P*c*K,$=-P*K+e*c*n0,h0=e*p,G=e*K+P*c*n0,D=P*p,b=G0*$+N0*h0,C=G0*G+N0*D,Z=-N0*$+G0*h0,I=-N0*G+G0*D,S=m*I0+b*L0,J=z*I0+C*L0,E=-m*L0+b*I0,r=-z*L0+C*I0,q=Z*L0,A=I*L0,F=Z*I0,t=I*I0,p0=12*S*S-3*E*E,x0=24*S*J-6*E*r,M0=12*J*J-3*r*r,X=3*(m*m+b*b)+p0*a,_=6*(m*z+b*C)+x0*a,H=3*(z*z+C*C)+M0*a,z0=-6*m*Z+a*(-24*S*F-6*E*q),l0=-6*(m*I+z*Z)+a*(-24*(J*F+S*t)+-6*(E*A+r*q)),w0=-6*z*I+a*(-24*J*t-6*r*A),q0=6*b*Z+a*(24*S*q-6*E*F),C0=6*(C*Z+b*I)+a*(24*(J*q+S*A)-6*(r*F+E*t)),U0=6*C*I+a*(24*J*A-6*r*t),X=X+X+H0*p0,_=_+_+H0*x0,H=H+H+H0*M0,T=R*U2,U=-.5*T/k0,j=T*k0,s=-15*B0*j,u=S*E+J*r,M=J*E+S*r,V=J*r-S*E,x2===1&&(i0=s,Q=U,Y=T,m0=j,v0=u,x=M,u0=V,g0=X,i=_,h=H,B=z0,w=l0,W=w0,N=q0,T0=C0,o0=U0,f0=p0,y=x0,O=M0,P=L2,e=C2,c=d2,p=n2,n0=O0*A0+F0*S0,K=S0*O0-A0*F0,R=e0);var f2=(4.7199672+(.2299715*X0-r0))%d0,F2=(6.2565837+.017201977*X0)%d0,O2=2*i0*x,t0=2*i0*u0,c0=2*Q*w,j2=2*Q*(W-B),I2=-2*Y*i,D2=-2*Y*(h-g0),E2=-2*Y*(-21-9*a)*_0,i2=2*m0*y,_2=2*m0*(O-f0),k2=-18*m0*_0,z2=-2*Q*T0,y2=-2*Q*(o0-N),p2=2*s*M,P2=2*s*V,S2=2*U*l0,n1=2*U*(w0-z0),i1=-2*T*_,r1=-2*T*(H-X),h1=-2*T*(-21-9*a)*j0,m1=2*j*x0,g1=2*j*(M0-p0),l1=-18*j*j0,x1=-2*U*C0,f1=-2*U*(U0-q0);return{snodm:S0,cnodm:A0,sinim:N0,cosim:G0,sinomm:L0,cosomm:I0,day:X0,e3:P2,ee2:p2,em:B0,emsq:a,gam:r0,peo:s0,pgho:g2,pho:l2,pinco:k,plo:a2,rtemsq:k0,se2:O2,se3:t0,sgh2:i2,sgh3:_2,sgh4:k2,sh2:z2,sh3:y2,si2:c0,si3:j2,sl2:I2,sl3:D2,sl4:E2,s1:s,s2:U,s3:T,s4:j,s5:u,s6:M,s7:V,ss1:i0,ss2:Q,ss3:Y,ss4:m0,ss5:v0,ss6:x,ss7:u0,sz1:g0,sz2:i,sz3:h,sz11:B,sz12:w,sz13:W,sz21:N,sz22:T0,sz23:o0,sz31:f0,sz32:y,sz33:O,xgh2:m1,xgh3:g1,xgh4:l1,xh2:x1,xh3:f1,xi2:S2,xi3:n1,xl2:i1,xl3:r1,xl4:h1,nm:P0,z1:X,z2:_,z3:H,z11:z0,z12:l0,z13:w0,z21:q0,z22:C0,z23:U0,z31:p0,z32:x0,z33:M0,zmol:f2,zmos:F2}}function Z2(v){var o=v.cosim,n=v.argpo,l=v.s1,g=v.s2,d=v.s3,L=v.s4,f=v.s5,m=v.sinim,b=v.ss1,z=v.ss2,C=v.ss3,Z=v.ss4,I=v.ss5,$=v.sz1,h0=v.sz3,G=v.sz11,D=v.sz13,R=v.sz21,S=v.sz23,J=v.sz31,E=v.sz33,r=v.t,q=v.tc,A=v.gsto,F=v.mo,t=v.mdot,P=v.no,e=v.nodeo,n0=v.nodedot,K=v.xpidot,c=v.z1,p=v.z3,i0=v.z11,Q=v.z13,Y=v.z21,m0=v.z23,v0=v.z31,x=v.z33,u0=v.ecco,g0=v.eccsq,i=v.emsq,h=v.em,B=v.argpm,w=v.inclm,W=v.mm,N=v.nm,T0=v.nodem,o0=v.irez,f0=v.atime,y=v.d2201,O=v.d2211,s=v.d3210,U=v.d3222,T=v.d4410,j=v.d4422,u=v.d5220,M=v.d5232,V=v.d5421,X=v.d5433,_=v.dedt,H=v.didt,z0=v.dmdt,l0=v.dnodt,w0=v.domdt,q0=v.del1,C0=v.del2,U0=v.del3,p0=v.xfact,x0=v.xlamo,M0=v.xli,_0=v.xni,j0,a0,e0,Y0,D0,b0,W0,P0,B0,S0,A0,L0,I0,N0,G0,a,H0,k0,s0,k,a2,g2,l2,X0,K0,y0,J0,d2,n2,F0,O0,r0,R0=17891679e-13,T2=21460748e-13,L2=22123015e-14,C2=17891679e-13,U2=73636953e-16,x2=21765803e-16,f2=.0043752690880113,F2=37393792e-14,O2=11428639e-14,t0=.00015835218,c0=119459e-10;o0=0,N<.0052359877&&N>.0034906585&&(o0=1),N>=.00826&&N<=.00924&&h>=.5&&(o0=2);var j2=b*c0*I,I2=z*c0*(G+D),D2=-c0*C*($+h0-14-6*i),E2=Z*c0*(J+E-6),i2=-c0*z*(R+S);(w<.052359877||w>Q0-.052359877)&&(i2=0),m!==0&&(i2/=m);var _2=E2-o*i2;_=j2+l*t0*f,H=I2+g*t0*(i0+Q),z0=D2-t0*d*(c+p-14-6*i);var k2=L*t0*(v0+x-6),z2=-t0*g*(Y+m0);(w<.052359877||w>Q0-.052359877)&&(z2=0),w0=_2+k2,l0=i2,m!==0&&(w0-=o/m*z2,l0+=z2/m);var y2=0,p2=(A+q*f2)%d0;if(h+=_*r,w+=H*r,B+=w0*r,T0+=l0*r,W+=z0*r,o0!==0){if(F0=Math.pow(N/V0,h2),o0===2){O0=o*o;var P2=h;h=u0;var S2=i;i=g0,r0=h*i,N0=-.306-(h-.64)*.44,h<=.65?(G0=3.616-13.247*h+16.29*i,H0=-19.302+117.39*h-228.419*i+156.591*r0,k0=-18.9068+109.7927*h-214.6334*i+146.5816*r0,s0=-41.122+242.694*h-471.094*i+313.953*r0,k=-146.407+841.88*h-1629.014*i+1083.435*r0,a2=-532.114+3017.977*h-5740.032*i+3708.276*r0):(G0=-72.099+331.819*h-508.738*i+266.724*r0,H0=-346.844+1582.851*h-2415.925*i+1246.113*r0,k0=-342.585+1554.908*h-2366.899*i+1215.972*r0,s0=-1052.797+4758.686*h-7193.992*i+3651.957*r0,k=-3581.69+16178.11*h-24462.77*i+12422.52*r0,h>.715?a2=-5149.66+29936.92*h-54087.36*i+31324.56*r0:a2=1464.74-4664.75*h+3763.64*i),h<.7?(X0=-919.2277+4988.61*h-9064.77*i+5542.21*r0,g2=-822.71072+4568.6173*h-8491.4146*i+5337.524*r0,l2=-853.666+4690.25*h-8624.77*i+5341.4*r0):(X0=-37995.78+161616.52*h-229838.2*i+109377.94*r0,g2=-51752.104+218913.95*h-309468.16*i+146349.42*r0,l2=-40023.88+170470.89*h-242699.48*i+115605.82*r0),K0=m*m,j0=.75*(1+2*o+O0),a0=1.5*K0,Y0=1.875*m*(1-2*o-3*O0),D0=-1.875*m*(1+2*o-3*O0),W0=35*K0*j0,P0=39.375*K0*K0,B0=9.84375*m*(K0*(1-2*o-5*O0)+.33333333*(-2+4*o+6*O0)),S0=m*(4.92187512*K0*(-2-4*o+10*O0)+6.56250012*(1+2*o-3*O0)),A0=29.53125*m*(2-8*o+O0*(-12+8*o+10*O0)),L0=29.53125*m*(-2-8*o+O0*(12+8*o-10*O0)),d2=N*N,n2=F0*F0,J0=3*d2*n2,y0=J0*C2,y=y0*j0*N0,O=y0*a0*G0,J0*=F0,y0=J0*F2,s=y0*Y0*H0,U=y0*D0*k0,J0*=F0,y0=2*J0*U2,T=y0*W0*s0,j=y0*P0*k,J0*=F0,y0=J0*O2,u=y0*B0*a2,M=y0*S0*l2,y0=2*J0*x2,V=y0*A0*g2,X=y0*L0*X0,x0=(F+e+e-(p2+p2))%d0,p0=t+z0+2*(n0+l0-f2)-P,h=P2,i=S2}o0===1&&(I0=1+i*(-2.5+.8125*i),H0=1+2*i,a=1+i*(-6+6.60937*i),j0=.75*(1+o)*(1+o),e0=.9375*m*m*(1+3*o)-.75*(1+o),b0=1+o,b0*=1.875*b0*b0,q0=3*N*N*F0*F0,C0=2*q0*j0*I0*R0,U0=3*q0*b0*a*L2*F0,q0=q0*e0*H0*T2*F0,x0=(F+e+n-p2)%d0,p0=t+K+z0+w0+l0-(P+f2)),M0=x0,_0=P,f0=0,N=P+y2}return{em:h,argpm:B,inclm:w,mm:W,nm:N,nodem:T0,irez:o0,atime:f0,d2201:y,d2211:O,d3210:s,d3222:U,d4410:T,d4422:j,d5220:u,d5232:M,d5421:V,d5433:X,dedt:_,didt:H,dmdt:z0,dndt:y2,dnodt:l0,domdt:w0,del1:q0,del2:C0,del3:U0,xfact:p0,xlamo:x0,xli:M0,xni:_0}}function H2(v){var o=(v-2451545)/36525,n=-62e-7*o*o*o+.093104*o*o+(876600*3600+8640184812866e-6)*o+67310.54841;return n=n*r2/240%d0,n<0&&(n+=d0),n}function $2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?H2(w2.apply(void 0,arguments)):H2.apply(void 0,arguments)}function s2(v){var o=v.ecco,n=v.epoch,l=v.inclo,g=v.opsmode,d=v.no,L=o*o,f=1-L,m=Math.sqrt(f),b=Math.cos(l),z=b*b,C=Math.pow(V0/d,h2),Z=.75*Z0*(3*z-1)/(m*f),I=Z/(C*C),$=C*(1-I*I-I*(1/3+134*I*I/81));I=Z/($*$),d/=1+I;var h0=Math.pow(V0/d,h2),G=Math.sin(l),D=h0*f,R=1-5*z,S=-R-z-z,J=1/h0,E=D*D,r=h0*(1-o),q="n",A;if(g==="a"){var F=n-7305,t=Math.floor(F+1e-8),P=F-t,e=.017202791694070362,n0=1.7321343856509375,K=5075514194322695e-30,c=e+d0;A=(n0+e*t+c*P+F*F*K)%d0,A<0&&(A+=d0)}else A=$2(n+24332815e-1);return{no:d,method:q,ainv:J,ao:h0,con41:S,con42:R,cosio:b,cosio2:z,eccsq:L,omeosq:f,posq:E,rp:r,rteosq:m,sinio:G,gsto:A}}function R2(v){var o=v.irez,n=v.d2201,l=v.d2211,g=v.d3210,d=v.d3222,L=v.d4410,f=v.d4422,m=v.d5220,b=v.d5232,z=v.d5421,C=v.d5433,Z=v.dedt,I=v.del1,$=v.del2,h0=v.del3,G=v.didt,D=v.dmdt,R=v.dnodt,S=v.domdt,J=v.argpo,E=v.argpdot,r=v.t,q=v.tc,A=v.gsto,F=v.xfact,t=v.xlamo,P=v.no,e=v.atime,n0=v.em,K=v.argpm,c=v.inclm,p=v.xli,i0=v.mm,Q=v.xni,Y=v.nodem,m0=v.nm,v0=.13130908,x=2.8843198,u0=.37448087,g0=5.7686396,i=.95240898,h=1.8014998,B=1.050833,w=4.4108898,W=.0043752690880113,N=720,T0=-720,o0=259200,f0,y,O,s,U,T,j,u,M=0,V=0,X=(A+q*W)%d0;if(n0+=Z*r,c+=G*r,K+=S*r,Y+=R*r,i0+=D*r,o!==0){(e===0||r*e<=0||Math.abs(r)<Math.abs(e))&&(e=0,Q=P,p=t),r>0?f0=N:f0=T0;for(var _=381;_===381;)o!==2?(j=I*Math.sin(p-v0)+$*Math.sin(2*(p-x))+h0*Math.sin(3*(p-u0)),U=Q+F,T=I*Math.cos(p-v0)+2*$*Math.cos(2*(p-x))+3*h0*Math.cos(3*(p-u0)),T*=U):(u=J+E*e,O=u+u,y=p+p,j=n*Math.sin(O+p-g0)+l*Math.sin(p-g0)+g*Math.sin(u+p-i)+d*Math.sin(-u+p-i)+L*Math.sin(O+y-h)+f*Math.sin(y-h)+m*Math.sin(u+p-B)+b*Math.sin(-u+p-B)+z*Math.sin(u+y-w)+C*Math.sin(-u+y-w),U=Q+F,T=n*Math.cos(O+p-g0)+l*Math.cos(p-g0)+g*Math.cos(u+p-i)+d*Math.cos(-u+p-i)+m*Math.cos(u+p-B)+b*Math.cos(-u+p-B)+2*(L*Math.cos(O+y-h)+f*Math.cos(y-h)+z*Math.cos(u+y-w)+C*Math.cos(-u+y-w)),T*=U),Math.abs(r-e)>=N?_=381:(V=r-e,_=0),_===381&&(p+=U*f0+j*o0,Q+=j*f0+T*o0,e+=f0);m0=Q+j*V+T*V*V*.5,s=p+U*V+j*V*V*.5,o!==1?(i0=s-2*Y+2*X,M=m0-P):(i0=s-Y-K+X,M=m0-P),m0=P+M}return{atime:e,em:n0,argpm:K,inclm:c,xli:p,mm:i0,xni:Q,nodem:Y,dndt:M,nm:m0}}function J2(v,o){var n,l,g,d,L,f,m,b,z,C,Z,I,$,h0,G,D,R,S,J,E,r,q,A,F,t,P,e,n0=15e-13;v.t=o,v.error=0;var K=v.mo+v.mdot*v.t,c=v.argpo+v.argpdot*v.t,p=v.nodeo+v.nodedot*v.t;z=c,r=K;var i0=v.t*v.t;if(A=p+v.nodecf*i0,R=1-v.cc1*v.t,S=v.bstar*v.cc4*v.t,J=v.t2cof*i0,v.isimp!==1){m=v.omgcof*v.t;var Q=1+v.eta*Math.cos(K);f=v.xmcof*(Q*Q*Q-v.delmo),D=m+f,r=K+D,z=c-D,I=i0*v.t,$=I*v.t,R=R-v.d2*i0-v.d3*I-v.d4*$,S+=v.bstar*v.cc5*(Math.sin(r)-v.sinmao),J=J+v.t3cof*I+$*(v.t4cof+v.t*v.t5cof)}q=v.no;var Y=v.ecco;if(E=v.inclo,v.method==="d"){h0=v.t;var m0={irez:v.irez,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,del1:v.del1,del2:v.del2,del3:v.del3,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,argpo:v.argpo,argpdot:v.argpdot,t:v.t,tc:h0,gsto:v.gsto,xfact:v.xfact,xlamo:v.xlamo,no:v.no,atime:v.atime,em:Y,argpm:z,inclm:E,xli:v.xli,mm:r,xni:v.xni,nodem:A,nm:q},v0=R2(m0);Y=v0.em,z=v0.argpm,E=v0.inclm,r=v0.mm,A=v0.nodem,q=v0.nm}if(q<=0)return v.error=2,[!1,!1];var x=Math.pow(V0/q,h2)*R*R;if(q=V0/Math.pow(x,1.5),Y-=S,Y>=1||Y<-.001)return v.error=1,[!1,!1];Y<1e-6&&(Y=1e-6),r+=v.no*J,t=r+z+A,A%=d0,z%=d0,t%=d0,r=(t-z-A)%d0;var u0=Math.sin(E),g0=Math.cos(E),i=Y;if(F=E,C=z,e=A,P=r,d=u0,g=g0,v.method==="d"){var h={inclo:v.inclo,init:"n",ep:i,inclp:F,nodep:e,argpp:C,mp:P,opsmode:v.operationmode},B=N2(v,h);if(i=B.ep,e=B.nodep,C=B.argpp,P=B.mp,F=B.inclp,F<0&&(F=-F,e+=Q0,C-=Q0),i<0||i>1)return v.error=3,[!1,!1]}v.method==="d"&&(d=Math.sin(F),g=Math.cos(F),v.aycof=-.5*$0*d,Math.abs(g+1)>15e-13?v.xlcof=-.25*$0*d*(3+5*g)/(1+g):v.xlcof=-.25*$0*d*(3+5*g)/n0);var w=i*Math.cos(C);D=1/(x*(1-i*i));var W=i*Math.sin(C)+D*v.aycof,N=P+C+e+D*v.xlcof*w,T0=(N-e)%d0;b=T0,G=9999.9;for(var o0=1;Math.abs(G)>=1e-12&&o0<=10;)l=Math.sin(b),n=Math.cos(b),G=1-n*w-l*W,G=(T0-W*n+w*l-b)/G,Math.abs(G)>=.95&&(G>0?G=.95:G=-.95),b+=G,o0+=1;var f0=w*n+W*l,y=w*l-W*n,O=w*w+W*W,s=x*(1-O);if(s<0)return v.error=4,[!1,!1];var U=x*(1-f0),T=Math.sqrt(x)*y/U,j=Math.sqrt(s)/U,u=Math.sqrt(1-O);D=y/(1+u);var M=x/U*(l-W-w*D),V=x/U*(n-w+W*D);Z=Math.atan2(M,V);var X=(V+V)*M,_=1-2*M*M;D=1/s;var H=.5*Z0*D,z0=H*D;v.method==="d"&&(L=g*g,v.con41=3*L-1,v.x1mth2=1-L,v.x7thm1=7*L-1);var l0=U*(1-1.5*z0*u*v.con41)+.5*H*v.x1mth2*_;if(l0<1)return v.error=6,{position:!1,velocity:!1};Z-=.25*z0*v.x7thm1*X;var w0=e+1.5*z0*g*X,q0=F+1.5*z0*g*d*_,C0=T-q*H*v.x1mth2*X/V0,U0=j+q*H*(v.x1mth2*_+1.5*v.con41)/V0,p0=Math.sin(Z),x0=Math.cos(Z),M0=Math.sin(w0),_0=Math.cos(w0),j0=Math.sin(q0),a0=Math.cos(q0),e0=-M0*a0,Y0=_0*a0,D0=e0*p0+_0*x0,b0=Y0*p0+M0*x0,W0=j0*p0,P0=e0*x0-_0*p0,B0=Y0*x0-M0*p0,S0=j0*x0,A0={x:l0*D0*E0,y:l0*b0*E0,z:l0*W0*E0},L0={x:(C0*D0+U0*P0)*u2,y:(C0*b0+U0*B0)*u2,z:(C0*W0+U0*S0)*u2};return{position:A0,velocity:L0}}function t2(v,o){var n=o.opsmode,l=o.satn,g=o.epoch,d=o.xbstar,L=o.xecco,f=o.xargpo,m=o.xinclo,b=o.xmo,z=o.xno,C=o.xnodeo,Z,I,$,h0,G,D,R,S,J,E,r,q,A,F,t,P,e,n0,K,c,p,i0,Q,Y,m0,v0,x,u0,g0,i,h,B,w,W,N,T0,o0,f0,y,O,s,U,T,j,u,M,V,X,_,H,z0,l0,w0,q0,C0,U0,p0=15e-13;v.isimp=0,v.method="n",v.aycof=0,v.con41=0,v.cc1=0,v.cc4=0,v.cc5=0,v.d2=0,v.d3=0,v.d4=0,v.delmo=0,v.eta=0,v.argpdot=0,v.omgcof=0,v.sinmao=0,v.t=0,v.t2cof=0,v.t3cof=0,v.t4cof=0,v.t5cof=0,v.x1mth2=0,v.x7thm1=0,v.mdot=0,v.nodedot=0,v.xlcof=0,v.xmcof=0,v.nodecf=0,v.irez=0,v.d2201=0,v.d2211=0,v.d3210=0,v.d3222=0,v.d4410=0,v.d4422=0,v.d5220=0,v.d5232=0,v.d5421=0,v.d5433=0,v.dedt=0,v.del1=0,v.del2=0,v.del3=0,v.didt=0,v.dmdt=0,v.dnodt=0,v.domdt=0,v.e3=0,v.ee2=0,v.peo=0,v.pgho=0,v.pho=0,v.pinco=0,v.plo=0,v.se2=0,v.se3=0,v.sgh2=0,v.sgh3=0,v.sgh4=0,v.sh2=0,v.sh3=0,v.si2=0,v.si3=0,v.sl2=0,v.sl3=0,v.sl4=0,v.gsto=0,v.xfact=0,v.xgh2=0,v.xgh3=0,v.xgh4=0,v.xh2=0,v.xh3=0,v.xi2=0,v.xi3=0,v.xl2=0,v.xl3=0,v.xl4=0,v.xlamo=0,v.zmol=0,v.zmos=0,v.atime=0,v.xli=0,v.xni=0,v.bstar=d,v.ecco=L,v.argpo=f,v.inclo=m,v.mo=b,v.no=z,v.nodeo=C,v.operationmode=n;var x0=78/E0+1,M0=42/E0,_0=M0*M0*M0*M0;v.init="y",v.t=0;var j0={satn:l,ecco:v.ecco,epoch:g,inclo:v.inclo,no:v.no,method:v.method,opsmode:v.operationmode},a0=s2(j0),e0=a0.ao,Y0=a0.con42,D0=a0.cosio,b0=a0.cosio2,W0=a0.eccsq,P0=a0.omeosq,B0=a0.posq,S0=a0.rp,A0=a0.rteosq,L0=a0.sinio;if(v.no=a0.no,v.con41=a0.con41,v.gsto=a0.gsto,v.a=Math.pow(v.no*K2,-2/3),v.alta=v.a*(1+v.ecco)-1,v.altp=v.a*(1-v.ecco)-1,v.error=0,P0>=0||v.no>=0){if(v.isimp=0,S0<220/E0+1&&(v.isimp=1),x=x0,p=_0,n0=(S0-1)*E0,n0<156){x=n0-78,n0<98&&(x=20);var I0=(120-x)/E0;p=I0*I0*I0*I0,x=x/E0+1}K=1/B0,M=1/(e0-x),v.eta=e0*v.ecco*M,q=v.eta*v.eta,r=v.ecco*v.eta,c=Math.abs(1-q),D=p*Math.pow(M,4),R=D/Math.pow(c,3.5),h0=R*v.no*(e0*(1+1.5*q+r*(4+q))+.375*Z0*M/c*v.con41*(8+3*q*(8+q))),v.cc1=v.bstar*h0,G=0,v.ecco>1e-4&&(G=-2*D*M*$0*v.no*L0/v.ecco),v.x1mth2=1-b0,v.cc4=2*v.no*R*e0*P0*(v.eta*(2+.5*q)+v.ecco*(.5+2*q)-Z0*M/(e0*c)*(-3*v.con41*(1-2*r+q*(1.5-.5*r))+.75*v.x1mth2*(2*q-r*(1+q))*Math.cos(2*v.argpo))),v.cc5=2*R*e0*P0*(1+2.75*(q+r)+r*q),S=b0*b0,T=1.5*Z0*K*v.no,j=.5*T*Z0*K,u=-.46875*V2*K*K*v.no,v.mdot=v.no+.5*T*A0*v.con41+.0625*j*A0*(13-78*b0+137*S),v.argpdot=-.5*T*Y0+.0625*j*(7-114*b0+395*S)+u*(3-36*b0+49*S),X=-T*D0,v.nodedot=X+(.5*j*(4-19*b0)+2*u*(3-7*b0))*D0,V=v.argpdot+v.nodedot,v.omgcof=v.bstar*G*Math.cos(v.argpo),v.xmcof=0,v.ecco>1e-4&&(v.xmcof=-h2*D*v.bstar/r),v.nodecf=3.5*P0*X*v.cc1,v.t2cof=1.5*v.cc1,Math.abs(D0+1)>15e-13?v.xlcof=-.25*$0*L0*(3+5*D0)/(1+D0):v.xlcof=-.25*$0*L0*(3+5*D0)/p0,v.aycof=-.5*$0*L0;var N0=1+v.eta*Math.cos(v.mo);if(v.delmo=N0*N0*N0,v.sinmao=Math.sin(v.mo),v.x7thm1=7*b0-1,2*Q0/v.no>=225){v.method="d",v.isimp=1,s=0,t=v.inclo;var G0={epoch:g,ep:v.ecco,argpp:v.argpo,tc:s,inclp:v.inclo,nodep:v.nodeo,np:v.no,e3:v.e3,ee2:v.ee2,peo:v.peo,pgho:v.pgho,pho:v.pho,pinco:v.pinco,plo:v.plo,se2:v.se2,se3:v.se3,sgh2:v.sgh2,sgh3:v.sgh3,sgh4:v.sgh4,sh2:v.sh2,sh3:v.sh3,si2:v.si2,si3:v.si3,sl2:v.sl2,sl3:v.sl3,sl4:v.sl4,xgh2:v.xgh2,xgh3:v.xgh3,xgh4:v.xgh4,xh2:v.xh2,xh3:v.xh3,xi2:v.xi2,xi3:v.xi3,xl2:v.xl2,xl3:v.xl3,xl4:v.xl4,zmol:v.zmol,zmos:v.zmos},a=X2(G0);v.e3=a.e3,v.ee2=a.ee2,v.peo=a.peo,v.pgho=a.pgho,v.pho=a.pho,v.pinco=a.pinco,v.plo=a.plo,v.se2=a.se2,v.se3=a.se3,v.sgh2=a.sgh2,v.sgh3=a.sgh3,v.sgh4=a.sgh4,v.sh2=a.sh2,v.sh3=a.sh3,v.si2=a.si2,v.si3=a.si3,v.sl2=a.sl2,v.sl3=a.sl3,v.sl4=a.sl4,I=a.sinim,Z=a.cosim,J=a.em,E=a.emsq,i0=a.s1,Q=a.s2,Y=a.s3,m0=a.s4,v0=a.s5,u0=a.ss1,g0=a.ss2,i=a.ss3,h=a.ss4,B=a.ss5,w=a.sz1,W=a.sz3,N=a.sz11,T0=a.sz13,o0=a.sz21,f0=a.sz23,y=a.sz31,O=a.sz33,v.xgh2=a.xgh2,v.xgh3=a.xgh3,v.xgh4=a.xgh4,v.xh2=a.xh2,v.xh3=a.xh3,v.xi2=a.xi2,v.xi3=a.xi3,v.xl2=a.xl2,v.xl3=a.xl3,v.xl4=a.xl4,v.zmol=a.zmol,v.zmos=a.zmos,e=a.nm,_=a.z1,H=a.z3,z0=a.z11,l0=a.z13,w0=a.z21,q0=a.z23,C0=a.z31,U0=a.z33;var H0={inclo:t,init:v.init,ep:v.ecco,inclp:v.inclo,nodep:v.nodeo,argpp:v.argpo,mp:v.mo,opsmode:v.operationmode},k0=N2(v,H0);v.ecco=k0.ep,v.inclo=k0.inclp,v.nodeo=k0.nodep,v.argpo=k0.argpp,v.mo=k0.mp,A=0,F=0,P=0;var s0={cosim:Z,emsq:E,argpo:v.argpo,s1:i0,s2:Q,s3:Y,s4:m0,s5:v0,sinim:I,ss1:u0,ss2:g0,ss3:i,ss4:h,ss5:B,sz1:w,sz3:W,sz11:N,sz13:T0,sz21:o0,sz23:f0,sz31:y,sz33:O,t:v.t,tc:s,gsto:v.gsto,mo:v.mo,mdot:v.mdot,no:v.no,nodeo:v.nodeo,nodedot:v.nodedot,xpidot:V,z1:_,z3:H,z11:z0,z13:l0,z21:w0,z23:q0,z31:C0,z33:U0,ecco:v.ecco,eccsq:W0,em:J,argpm:A,inclm:t,mm:P,nm:e,nodem:F,irez:v.irez,atime:v.atime,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,del1:v.del1,del2:v.del2,del3:v.del3,xfact:v.xfact,xlamo:v.xlamo,xli:v.xli,xni:v.xni},k=Z2(s0);v.irez=k.irez,v.atime=k.atime,v.d2201=k.d2201,v.d2211=k.d2211,v.d3210=k.d3210,v.d3222=k.d3222,v.d4410=k.d4410,v.d4422=k.d4422,v.d5220=k.d5220,v.d5232=k.d5232,v.d5421=k.d5421,v.d5433=k.d5433,v.dedt=k.dedt,v.didt=k.didt,v.dmdt=k.dmdt,v.dnodt=k.dnodt,v.domdt=k.domdt,v.del1=k.del1,v.del2=k.del2,v.del3=k.del3,v.xfact=k.xfact,v.xlamo=k.xlamo,v.xli=k.xli,v.xni=k.xni}v.isimp!==1&&($=v.cc1*v.cc1,v.d2=4*e0*M*$,U=v.d2*M*v.cc1/3,v.d3=(17*e0+x)*U,v.d4=.5*U*e0*M*(221*e0+31*x)*v.cc1,v.t3cof=v.d2+2*$,v.t4cof=.25*(3*v.d3+v.cc1*(12*v.d2+10*$)),v.t5cof=.2*(3*v.d4+12*v.cc1*v.d3+6*v.d2*v.d2+15*$*(2*v.d2+$)))}J2(v,0),v.init="n"}function c2(v,o){var n="i",l=1440/(2*Q0),g=0,d={};d.error=0,d.satnum=v.substring(2,7),d.epochyr=parseInt(v.substring(18,20),10),d.epochdays=parseFloat(v.substring(20,32)),d.ndot=parseFloat(v.substring(33,43)),d.nddot=parseFloat(".".concat(parseInt(v.substring(44,50),10),"E").concat(v.substring(50,52))),d.bstar=parseFloat("".concat(v.substring(53,54),".").concat(parseInt(v.substring(54,59),10),"E").concat(v.substring(59,61))),d.inclo=parseFloat(o.substring(8,16)),d.nodeo=parseFloat(o.substring(17,25)),d.ecco=parseFloat(".".concat(o.substring(26,33))),d.argpo=parseFloat(o.substring(34,42)),d.mo=parseFloat(o.substring(43,51)),d.no=parseFloat(o.substring(52,63)),d.no/=l,d.inclo*=r2,d.nodeo*=r2,d.argpo*=r2,d.mo*=r2,d.epochyr<57?g=d.epochyr+2e3:g=d.epochyr+1900;var L=W2(g,d.epochdays),f=L.mon,m=L.day,b=L.hr,z=L.minute,C=L.sec;return d.jdsatepoch=w2(g,f,m,b,z,C),t2(d,{opsmode:n,satn:d.satnum,epoch:d.jdsatepoch-24332815e-1,xbstar:d.bstar,xecco:d.ecco,xargpo:d.argpo,xinclo:d.inclo,xmo:d.mo,xno:d.no,xnodeo:d.nodeo}),d}const v1="debug",M2=["error","warn","info","debug"];let v2={error:(...v)=>{},warn:(...v)=>{},info:(...v)=>{},debug:(...v)=>{}},m2=new Proxy({logLevel:v1,enabledOutputs:{},error:v2.error,warn:v2.warn,info:v2.info,debug:v2.debug,setLogLevel:o1},{});function e2(v,o,n,...l){v.enabledOutputs[o]&&n(o.toUpperCase(),...l)}function o1(v){const o=M2.indexOf(v.toLowerCase());if(o<0)throw new Error("Unknown log level");for(let n=0;n<M2.length;n++)m2.enabledOutputs[M2[n]]=n<=o}function a1(){return m2}function d1(){const v=m2,o=v.enabledOutputs;for(const n of M2)o[n]=!0;v2={error:e2.bind(v,{enabledOutputs:o},"error",console.error),warn:e2.bind(v,{enabledOutputs:o},"warn",console.warn),info:e2.bind(v,{enabledOutputs:o},"info",console.info),debug:e2.bind(v,{enabledOutputs:o},"debug",console.debug)},m2=new Proxy({...m2,...v2},{})}d1();var b2=a1();let q2;const o2=[];let Y2;function B2(v){const o=new Float32Array((q2+1)*3);if(!o2||!o2[v])return;const n=new Date;let l=w2(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());l+=n.getUTCMilliseconds()*115741e-13;const g=(l-o2[v].jdsatepoch)*1440,L=2*Math.PI/o2[v].no/q2;for(let f=0;f<q2+1;f++){const m=g+f*L,b=J2(o2[v],m).position;try{o[f*3]=b.x/3185.5,o[f*3+1]=b.z/3185.5,o[f*3+2]=b.y/3185.5}catch{o[f*3]=0,o[f*3+1]=0,o[f*3+2]=0}}postMessage({pointsOut:o.buffer,satId:v})}onmessage=function(v){b2.debug("Orbital calculation worker handling message");const o=JSON.parse(v.data);if(o.config){const n=o.config;n.logLevel&&b2.setLogLevel(n.logLevel);return}else if(o.isInit){Y2=Date.now(),b2.debug("id",Y2),b2.debug("message.data.isInit");const n=o.satData;for(let l=0;l<n.length;l++)o2[l]=c2(n[l].TLE_LINE1,n[l].TLE_LINE2);q2=o.numSegs}else{const{satId:n}=o;if(Array.isArray(n)){const l=n;for(let g=0;g<l.length;g++)B2(l[g])}else B2(n)}}})();
