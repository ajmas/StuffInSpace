(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var W0=Math.PI,Q=W0*2,m2=W0/180,X2=398600.8,t0=6378.135,J0=60/Math.sqrt(t0*t0*t0/X2),q2=t0*J0/60,_2=1/J0,X0=.001082616,Q2=-253881e-11,Z2=-165597e-11,_0=Q2/X0,l2=2/3;function R2(a,v){for(var i=[31,a%4===0?29:28,31,30,31,30,31,31,30,31,30,31],m=Math.floor(v),x=1,o=0;m>o+i[x-1]&&x<12;)o+=i[x-1],x+=1;var z=x,d=m-o,r=(v-m)*24,b=Math.floor(r);r=(r-b)*60;var g=Math.floor(r),p=(r-g)*60;return{mon:z,day:d,hr:b,minute:g,sec:p}}function P2(a,v,i,m,x,o){var z=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*a-Math.floor(7*(a+Math.floor((v+9)/12))*.25)+Math.floor(275*v/9)+i+17210135e-1+((z/6e4+o/60+x)/60+m)/24}function w2(a,v,i,m,x,o,z){if(a instanceof Date){var d=a;return P2(d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())}return P2(a,v,i,m,x,o,z)}function W2(a,v){var i=a.e3,m=a.ee2,x=a.peo,o=a.pgho,z=a.pho,d=a.pinco,r=a.plo,b=a.se2,g=a.se3,p=a.sgh2,C=a.sgh3,s=a.sgh4,V=a.sh2,h0=a.sh3,Y=a.si2,t=a.si3,R=a.sl2,E=a.sl3,W=a.sl4,G=a.t,l=a.xgh2,A=a.xgh3,k=a.xgh4,S=a.xh2,c=a.xh3,L=a.xi2,u=a.xi3,d0=a.xl2,$=a.xl3,a0=a.xl4,M=a.zmol,r0=a.zmos,J=v.init,B=v.opsmode,m0=v.ep,v0=v.inclp,f=v.nodep,A0=v.argpp,l0=v.mp,h,e,H,T,X,N,w0,o0,e0,q,U,Z,D,I,F,w,y,K,_,O,P,f0=119459e-10,g0=.01675,q0=.00015835218,b0=.0549;P=r0+f0*G,J==="y"&&(P=r0),O=P+2*g0*Math.sin(P),y=Math.sin(O),q=.5*y*y-.25,U=-.5*y*Math.cos(O);var T0=b*q+g*U,I0=Y*q+t*U,z0=R*q+E*U+W*y,x0=p*q+C*U+s*y,p0=V*q+h0*U;P=M+q0*G,J==="y"&&(P=M),O=P+2*b0*Math.sin(P),y=Math.sin(O),q=.5*y*y-.25,U=-.5*y*Math.cos(O);var G0=m*q+i*U,U0=L*q+u*U,n0=d0*q+$*U+a0*y,M0=l*q+A*U+k*y,B0=S*q+c*U;return Z=T0+G0,F=I0+U0,w=z0+n0,D=x0+M0,I=p0+B0,J==="n"&&(Z-=x,F-=d,w-=r,D-=o,I-=z,v0+=F,m0+=Z,T=Math.sin(v0),H=Math.cos(v0),v0>=.2?(I/=T,D-=H*I,A0+=D,f+=I,l0+=w):(N=Math.sin(f),X=Math.cos(f),h=T*N,e=T*X,w0=I*X+F*H*N,o0=-I*N+F*H*X,h+=w0,e+=o0,f%=Q,f<0&&B==="a"&&(f+=Q),K=l0+A0+H*f,e0=w+D-F*f*T,K+=e0,_=f,f=Math.atan2(h,e),f<0&&B==="a"&&(f+=Q),Math.abs(_-f)>W0&&(f<_?f+=Q:f-=Q),l0+=w,A0=K-l0-H*f)),{ep:m0,inclp:v0,nodep:f,argpp:A0,mp:l0}}function c2(a){var v=a.epoch,i=a.ep,m=a.argpp,x=a.tc,o=a.inclp,z=a.nodep,d=a.np,r,b,g,p,C,s,V,h0,Y,t,R,E,W,G,l,A,k,S,c,L,u,d0,$,a0,M,r0,J,B,m0,v0,f,A0,l0,h,e,H,T,X,N,w0,o0,e0,q,U,Z,D,I,F,w,y,K,_,O,P,f0,g0,q0,b0,T0,I0,z0,x0,p0,G0=.01675,U0=.0549,n0=29864797e-13,M0=47968065e-14,B0=.39785416,C0=.91744867,y0=.1945905,K0=-.98088458,j0=d,H0=i,L0=Math.sin(z),E0=Math.cos(z),s0=Math.sin(m),F0=Math.cos(m),k0=Math.sin(o),Y0=Math.cos(o),n=H0*H0,N0=1-n,O0=Math.sqrt(N0),Z0=0,j=0,d2=0,e2=0,f2=0,V0=v+18261.5+x/1440,$0=(4.523602-.00092422029*V0)%Q,u0=Math.sin($0),P0=Math.cos($0),r2=.91375164-.03568096*P0,i2=Math.sqrt(1-r2*r2),D0=.089683511*u0/i2,S0=Math.sqrt(1-D0*D0),i0=5.8351514+.001944368*V0,R0=.39785416*u0/i2,I2=S0*P0+.91744867*D0*u0;R0=Math.atan2(R0,I2),R0+=i0-$0;var D2=Math.cos(R0),S2=Math.sin(R0);L=y0,u=K0,a0=C0,M=B0,d0=E0,$=L0,R=n0;for(var U2=1/j0,z2=0;z2<2;)z2+=1,r=L*d0+u*a0*$,g=-u*d0+L*a0*$,V=-L*$+u*a0*d0,h0=u*M,Y=u*$+L*a0*d0,t=L*M,b=Y0*V+k0*h0,p=Y0*Y+k0*t,C=-k0*V+Y0*h0,s=-k0*Y+Y0*t,E=r*F0+b*s0,W=g*F0+p*s0,G=-r*s0+b*F0,l=-g*s0+p*F0,A=C*s0,k=s*s0,S=C*F0,c=s*F0,z0=12*E*E-3*G*G,x0=24*E*W-6*G*l,p0=12*W*W-3*l*l,_=3*(r*r+b*b)+z0*n,O=6*(r*g+b*p)+x0*n,P=3*(g*g+p*p)+p0*n,f0=-6*r*C+n*(-24*E*S-6*G*A),g0=-6*(r*s+g*C)+n*(-24*(W*S+E*c)+-6*(G*k+l*A)),q0=-6*g*s+n*(-24*W*c-6*l*k),b0=6*b*C+n*(24*E*A-6*G*S),T0=6*(p*C+b*s)+n*(24*(W*A+E*k)-6*(l*S+G*c)),I0=6*p*s+n*(24*W*k-6*l*c),_=_+_+N0*z0,O=O+O+N0*x0,P=P+P+N0*p0,I=R*U2,D=-.5*I/O0,F=I*O0,Z=-15*H0*F,w=E*G+W*l,y=W*G+E*l,K=W*l-E*G,z2===1&&(r0=Z,J=D,B=I,m0=F,v0=w,f=y,A0=K,l0=_,h=O,e=P,H=f0,T=g0,X=q0,N=b0,w0=T0,o0=I0,e0=z0,q=x0,U=p0,L=D2,u=S2,a0=r2,M=i2,d0=S0*E0+D0*L0,$=L0*S0-E0*D0,R=M0);var p2=(4.7199672+(.2299715*V0-i0))%Q,F2=(6.2565837+.017201977*V0)%Q,C2=2*r0*f,c0=2*r0*A0,a2=2*J*T,t2=2*J*(X-H),G2=-2*B*h,O2=-2*B*(e-l0),j2=-2*B*(-21-9*n)*G0,h2=2*m0*q,L2=2*m0*(U-e0),E2=-18*m0*G0,M2=-2*J*w0,A2=-2*J*(o0-N),y2=2*Z*y,k2=2*Z*K,N2=2*D*g0,l1=2*D*(q0-f0),g1=-2*I*O,x1=-2*I*(P-_),e1=-2*I*(-21-9*n)*U0,f1=2*F*x0,z1=2*F*(p0-z0),p1=-18*F*U0,M1=-2*D*T0,y1=-2*D*(I0-b0);return{snodm:L0,cnodm:E0,sinim:k0,cosim:Y0,sinomm:s0,cosomm:F0,day:V0,e3:k2,ee2:y2,em:H0,emsq:n,gam:i0,peo:Z0,pgho:e2,pho:f2,pinco:j,plo:d2,rtemsq:O0,se2:C2,se3:c0,sgh2:h2,sgh3:L2,sgh4:E2,sh2:M2,sh3:A2,si2:a2,si3:t2,sl2:G2,sl3:O2,sl4:j2,s1:Z,s2:D,s3:I,s4:F,s5:w,s6:y,s7:K,ss1:r0,ss2:J,ss3:B,ss4:m0,ss5:v0,ss6:f,ss7:A0,sz1:l0,sz2:h,sz3:e,sz11:H,sz12:T,sz13:X,sz21:N,sz22:w0,sz23:o0,sz31:e0,sz32:q,sz33:U,xgh2:f1,xgh3:z1,xgh4:p1,xh2:M1,xh3:y1,xi2:N2,xi3:l1,xl2:g1,xl3:x1,xl4:e1,nm:j0,z1:_,z2:O,z3:P,z11:f0,z12:g0,z13:q0,z21:b0,z22:T0,z23:I0,z31:z0,z32:x0,z33:p0,zmol:p2,zmos:F2}}function a1(a){var v=a.cosim,i=a.argpo,m=a.s1,x=a.s2,o=a.s3,z=a.s4,d=a.s5,r=a.sinim,b=a.ss1,g=a.ss2,p=a.ss3,C=a.ss4,s=a.ss5,V=a.sz1,h0=a.sz3,Y=a.sz11,t=a.sz13,R=a.sz21,E=a.sz23,W=a.sz31,G=a.sz33,l=a.t,A=a.tc,k=a.gsto,S=a.mo,c=a.mdot,L=a.no,u=a.nodeo,d0=a.nodedot,$=a.xpidot,a0=a.z1,M=a.z3,r0=a.z11,J=a.z13,B=a.z21,m0=a.z23,v0=a.z31,f=a.z33,A0=a.ecco,l0=a.eccsq,h=a.emsq,e=a.em,H=a.argpm,T=a.inclm,X=a.mm,N=a.nm,w0=a.nodem,o0=a.irez,e0=a.atime,q=a.d2201,U=a.d2211,Z=a.d3210,D=a.d3222,I=a.d4410,F=a.d4422,w=a.d5220,y=a.d5232,K=a.d5421,_=a.d5433,O=a.dedt,P=a.didt,f0=a.dmdt,g0=a.dnodt,q0=a.domdt,b0=a.del1,T0=a.del2,I0=a.del3,z0=a.xfact,x0=a.xlamo,p0=a.xli,G0=a.xni,U0,n0,M0,B0,C0,y0,K0,j0,H0,L0,E0,s0,F0,k0,Y0,n,N0,O0,Z0,j,d2,e2,f2,V0,$0,u0,P0,r2,i2,D0,S0,i0,R0=17891679e-13,I2=21460748e-13,D2=22123015e-14,S2=17891679e-13,U2=73636953e-16,z2=21765803e-16,p2=.0043752690880113,F2=37393792e-14,C2=11428639e-14,c0=.00015835218,a2=119459e-10;o0=0,N<.0052359877&&N>.0034906585&&(o0=1),N>=.00826&&N<=.00924&&e>=.5&&(o0=2);var t2=b*a2*s,G2=g*a2*(Y+t),O2=-a2*p*(V+h0-14-6*h),j2=C*a2*(W+G-6),h2=-a2*g*(R+E);(T<.052359877||T>W0-.052359877)&&(h2=0),r!==0&&(h2/=r);var L2=j2-v*h2;O=t2+m*c0*d,P=G2+x*c0*(r0+J),f0=O2-c0*o*(a0+M-14-6*h);var E2=z*c0*(v0+f-6),M2=-c0*x*(B+m0);(T<.052359877||T>W0-.052359877)&&(M2=0),q0=L2+E2,g0=h2,r!==0&&(q0-=v/r*M2,g0+=M2/r);var A2=0,y2=(k+A*p2)%Q;if(e+=O*l,T+=P*l,H+=q0*l,w0+=g0*l,X+=f0*l,o0!==0){if(D0=Math.pow(N/J0,l2),o0===2){S0=v*v;var k2=e;e=A0;var N2=h;h=l0,i0=e*h,k0=-.306-(e-.64)*.44,e<=.65?(Y0=3.616-13.247*e+16.29*h,N0=-19.302+117.39*e-228.419*h+156.591*i0,O0=-18.9068+109.7927*e-214.6334*h+146.5816*i0,Z0=-41.122+242.694*e-471.094*h+313.953*i0,j=-146.407+841.88*e-1629.014*h+1083.435*i0,d2=-532.114+3017.977*e-5740.032*h+3708.276*i0):(Y0=-72.099+331.819*e-508.738*h+266.724*i0,N0=-346.844+1582.851*e-2415.925*h+1246.113*i0,O0=-342.585+1554.908*e-2366.899*h+1215.972*i0,Z0=-1052.797+4758.686*e-7193.992*h+3651.957*i0,j=-3581.69+16178.11*e-24462.77*h+12422.52*i0,e>.715?d2=-5149.66+29936.92*e-54087.36*h+31324.56*i0:d2=1464.74-4664.75*e+3763.64*h),e<.7?(V0=-919.2277+4988.61*e-9064.77*h+5542.21*i0,e2=-822.71072+4568.6173*e-8491.4146*h+5337.524*i0,f2=-853.666+4690.25*e-8624.77*h+5341.4*i0):(V0=-37995.78+161616.52*e-229838.2*h+109377.94*i0,e2=-51752.104+218913.95*e-309468.16*h+146349.42*i0,f2=-40023.88+170470.89*e-242699.48*h+115605.82*i0),$0=r*r,U0=.75*(1+2*v+S0),n0=1.5*$0,B0=1.875*r*(1-2*v-3*S0),C0=-1.875*r*(1+2*v-3*S0),K0=35*$0*U0,j0=39.375*$0*$0,H0=9.84375*r*($0*(1-2*v-5*S0)+.33333333*(-2+4*v+6*S0)),L0=r*(4.92187512*$0*(-2-4*v+10*S0)+6.56250012*(1+2*v-3*S0)),E0=29.53125*r*(2-8*v+S0*(-12+8*v+10*S0)),s0=29.53125*r*(-2-8*v+S0*(12+8*v-10*S0)),r2=N*N,i2=D0*D0,P0=3*r2*i2,u0=P0*S2,q=u0*U0*k0,U=u0*n0*Y0,P0*=D0,u0=P0*F2,Z=u0*B0*N0,D=u0*C0*O0,P0*=D0,u0=2*P0*U2,I=u0*K0*Z0,F=u0*j0*j,P0*=D0,u0=P0*C2,w=u0*H0*d2,y=u0*L0*f2,u0=2*P0*z2,K=u0*E0*e2,_=u0*s0*V0,x0=(S+u+u-(y2+y2))%Q,z0=c+f0+2*(d0+g0-p2)-L,e=k2,h=N2}o0===1&&(F0=1+h*(-2.5+.8125*h),N0=1+2*h,n=1+h*(-6+6.60937*h),U0=.75*(1+v)*(1+v),M0=.9375*r*r*(1+3*v)-.75*(1+v),y0=1+v,y0*=1.875*y0*y0,b0=3*N*N*D0*D0,T0=2*b0*U0*F0*R0,I0=3*b0*y0*n*D2*D0,b0=b0*M0*N0*I2*D0,x0=(S+u+i-y2)%Q,z0=c+$+f0+q0+g0-(L+p2)),p0=x0,G0=L,e0=0,N=L+A2}return{em:e,argpm:H,inclm:T,mm:X,nm:N,nodem:w0,irez:o0,atime:e0,d2201:q,d2211:U,d3210:Z,d3222:D,d4410:I,d4422:F,d5220:w,d5232:y,d5421:K,d5433:_,dedt:O,didt:P,dmdt:f0,dndt:A2,dnodt:g0,domdt:q0,del1:b0,del2:T0,del3:I0,xfact:z0,xlamo:x0,xli:p0,xni:G0}}function B2(a){var v=(a-2451545)/36525,i=-62e-7*v*v*v+.093104*v*v+(876600*3600+8640184812866e-6)*v+67310.54841;return i=i*m2/240%Q,i<0&&(i+=Q),i}function H2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?B2(w2.apply(void 0,arguments)):B2.apply(void 0,arguments)}function v1(a){var v=a.ecco,i=a.epoch,m=a.inclo,x=a.opsmode,o=a.no,z=v*v,d=1-z,r=Math.sqrt(d),b=Math.cos(m),g=b*b,p=Math.pow(J0/o,l2),C=.75*X0*(3*g-1)/(r*d),s=C/(p*p),V=p*(1-s*s-s*(1/3+134*s*s/81));s=C/(V*V),o/=1+s;var h0=Math.pow(J0/o,l2),Y=Math.sin(m),t=h0*d,R=1-5*g,E=-R-g-g,W=1/h0,G=t*t,l=h0*(1-v),A="n",k;if(x==="a"){var S=i-7305,c=Math.floor(S+1e-8),L=S-c,u=.017202791694070362,d0=1.7321343856509375,$=5075514194322695e-30,a0=u+Q;k=(d0+u*c+a0*L+S*S*$)%Q,k<0&&(k+=Q)}else k=H2(i+24332815e-1);return{no:o,method:A,ainv:W,ao:h0,con41:E,con42:R,cosio:b,cosio2:g,eccsq:z,omeosq:d,posq:G,rp:l,rteosq:r,sinio:Y,gsto:k}}function o1(a){var v=a.irez,i=a.d2201,m=a.d2211,x=a.d3210,o=a.d3222,z=a.d4410,d=a.d4422,r=a.d5220,b=a.d5232,g=a.d5421,p=a.d5433,C=a.dedt,s=a.del1,V=a.del2,h0=a.del3,Y=a.didt,t=a.dmdt,R=a.dnodt,E=a.domdt,W=a.argpo,G=a.argpdot,l=a.t,A=a.tc,k=a.gsto,S=a.xfact,c=a.xlamo,L=a.no,u=a.atime,d0=a.em,$=a.argpm,a0=a.inclm,M=a.xli,r0=a.mm,J=a.xni,B=a.nodem,m0=a.nm,v0=.13130908,f=2.8843198,A0=.37448087,l0=5.7686396,h=.95240898,e=1.8014998,H=1.050833,T=4.4108898,X=.0043752690880113,N=720,w0=-720,o0=259200,e0,q,U,Z,D,I,F,w,y=0,K=0,_=(k+A*X)%Q;if(d0+=C*l,a0+=Y*l,$+=E*l,B+=R*l,r0+=t*l,v!==0){(u===0||l*u<=0||Math.abs(l)<Math.abs(u))&&(u=0,J=L,M=c),l>0?e0=N:e0=w0;for(var O=381;O===381;)v!==2?(F=s*Math.sin(M-v0)+V*Math.sin(2*(M-f))+h0*Math.sin(3*(M-A0)),D=J+S,I=s*Math.cos(M-v0)+2*V*Math.cos(2*(M-f))+3*h0*Math.cos(3*(M-A0)),I*=D):(w=W+G*u,U=w+w,q=M+M,F=i*Math.sin(U+M-l0)+m*Math.sin(M-l0)+x*Math.sin(w+M-h)+o*Math.sin(-w+M-h)+z*Math.sin(U+q-e)+d*Math.sin(q-e)+r*Math.sin(w+M-H)+b*Math.sin(-w+M-H)+g*Math.sin(w+q-T)+p*Math.sin(-w+q-T),D=J+S,I=i*Math.cos(U+M-l0)+m*Math.cos(M-l0)+x*Math.cos(w+M-h)+o*Math.cos(-w+M-h)+r*Math.cos(w+M-H)+b*Math.cos(-w+M-H)+2*(z*Math.cos(U+q-e)+d*Math.cos(q-e)+g*Math.cos(w+q-T)+p*Math.cos(-w+q-T)),I*=D),Math.abs(l-u)>=N?O=381:(K=l-u,O=0),O===381&&(M+=D*e0+F*o0,J+=F*e0+I*o0,u+=e0);m0=J+F*K+I*K*K*.5,Z=M+D*K+F*K*K*.5,v!==1?(r0=Z-2*B+2*_,y=m0-L):(r0=Z-B-$+_,y=m0-L),m0=L+y}return{atime:u,em:d0,argpm:$,inclm:a0,xli:M,mm:r0,xni:J,nodem:B,dndt:y,nm:m0}}function Y2(a,v){var i,m,x,o,z,d,r,b,g,p,C,s,V,h0,Y,t,R,E,W,G,l,A,k,S,c,L,u,d0=15e-13;a.t=v,a.error=0;var $=a.mo+a.mdot*a.t,a0=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t;g=a0,l=$;var r0=a.t*a.t;if(k=M+a.nodecf*r0,R=1-a.cc1*a.t,E=a.bstar*a.cc4*a.t,W=a.t2cof*r0,a.isimp!==1){r=a.omgcof*a.t;var J=1+a.eta*Math.cos($);d=a.xmcof*(J*J*J-a.delmo),t=r+d,l=$+t,g=a0-t,s=r0*a.t,V=s*a.t,R=R-a.d2*r0-a.d3*s-a.d4*V,E+=a.bstar*a.cc5*(Math.sin(l)-a.sinmao),W=W+a.t3cof*s+V*(a.t4cof+a.t*a.t5cof)}A=a.no;var B=a.ecco;if(G=a.inclo,a.method==="d"){h0=a.t;var m0={irez:a.irez,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,del1:a.del1,del2:a.del2,del3:a.del3,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,argpo:a.argpo,argpdot:a.argpdot,t:a.t,tc:h0,gsto:a.gsto,xfact:a.xfact,xlamo:a.xlamo,no:a.no,atime:a.atime,em:B,argpm:g,inclm:G,xli:a.xli,mm:l,xni:a.xni,nodem:k,nm:A},v0=o1(m0);B=v0.em,g=v0.argpm,G=v0.inclm,l=v0.mm,k=v0.nodem,A=v0.nm}if(A<=0)return a.error=2,[!1,!1];var f=Math.pow(J0/A,l2)*R*R;if(A=J0/Math.pow(f,1.5),B-=E,B>=1||B<-.001)return a.error=1,[!1,!1];B<1e-6&&(B=1e-6),l+=a.no*W,c=l+g+k,k%=Q,g%=Q,c%=Q,l=(c-g-k)%Q;var A0=Math.sin(G),l0=Math.cos(G),h=B;if(S=G,p=g,u=k,L=l,o=A0,x=l0,a.method==="d"){var e={inclo:a.inclo,init:"n",ep:h,inclp:S,nodep:u,argpp:p,mp:L,opsmode:a.operationmode},H=W2(a,e);if(h=H.ep,u=H.nodep,p=H.argpp,L=H.mp,S=H.inclp,S<0&&(S=-S,u+=W0,p-=W0),h<0||h>1)return a.error=3,[!1,!1]}a.method==="d"&&(o=Math.sin(S),x=Math.cos(S),a.aycof=-.5*_0*o,Math.abs(x+1)>15e-13?a.xlcof=-.25*_0*o*(3+5*x)/(1+x):a.xlcof=-.25*_0*o*(3+5*x)/d0);var T=h*Math.cos(p);t=1/(f*(1-h*h));var X=h*Math.sin(p)+t*a.aycof,N=L+p+u+t*a.xlcof*T,w0=(N-u)%Q;b=w0,Y=9999.9;for(var o0=1;Math.abs(Y)>=1e-12&&o0<=10;)m=Math.sin(b),i=Math.cos(b),Y=1-i*T-m*X,Y=(w0-X*i+T*m-b)/Y,Math.abs(Y)>=.95&&(Y>0?Y=.95:Y=-.95),b+=Y,o0+=1;var e0=T*i+X*m,q=T*m-X*i,U=T*T+X*X,Z=f*(1-U);if(Z<0)return a.error=4,[!1,!1];var D=f*(1-e0),I=Math.sqrt(f)*q/D,F=Math.sqrt(Z)/D,w=Math.sqrt(1-U);t=q/(1+w);var y=f/D*(m-X-T*t),K=f/D*(i-T+X*t);C=Math.atan2(y,K);var _=(K+K)*y,O=1-2*y*y;t=1/Z;var P=.5*X0*t,f0=P*t;a.method==="d"&&(z=x*x,a.con41=3*z-1,a.x1mth2=1-z,a.x7thm1=7*z-1);var g0=D*(1-1.5*f0*w*a.con41)+.5*P*a.x1mth2*O;if(g0<1)return a.error=6,{position:!1,velocity:!1};C-=.25*f0*a.x7thm1*_;var q0=u+1.5*f0*x*_,b0=S+1.5*f0*x*o*O,T0=I-A*P*a.x1mth2*_/J0,I0=F+A*P*(a.x1mth2*O+1.5*a.con41)/J0,z0=Math.sin(C),x0=Math.cos(C),p0=Math.sin(q0),G0=Math.cos(q0),U0=Math.sin(b0),n0=Math.cos(b0),M0=-p0*n0,B0=G0*n0,C0=M0*z0+G0*x0,y0=B0*z0+p0*x0,K0=U0*z0,j0=M0*x0-G0*z0,H0=B0*x0-p0*z0,L0=U0*x0,E0={x:g0*C0*t0,y:g0*y0*t0,z:g0*K0*t0},s0={x:(T0*C0+I0*j0)*q2,y:(T0*y0+I0*H0)*q2,z:(T0*K0+I0*L0)*q2};return{position:E0,velocity:s0}}function n1(a,v){var i=v.opsmode,m=v.satn,x=v.epoch,o=v.xbstar,z=v.xecco,d=v.xargpo,r=v.xinclo,b=v.xmo,g=v.xno,p=v.xnodeo,C,s,V,h0,Y,t,R,E,W,G,l,A,k,S,c,L,u,d0,$,a0,M,r0,J,B,m0,v0,f,A0,l0,h,e,H,T,X,N,w0,o0,e0,q,U,Z,D,I,F,w,y,K,_,O,P,f0,g0,q0,b0,T0,I0,z0=15e-13;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.pinco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0,a.bstar=o,a.ecco=z,a.argpo=d,a.inclo=r,a.mo=b,a.no=g,a.nodeo=p,a.operationmode=i;var x0=78/t0+1,p0=(120-78)/t0,G0=p0*p0*p0*p0;a.init="y",a.t=0;var U0={satn:m,ecco:a.ecco,epoch:x,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode},n0=v1(U0),M0=n0.ao,B0=n0.con42,C0=n0.cosio,y0=n0.cosio2,K0=n0.eccsq,j0=n0.omeosq,H0=n0.posq,L0=n0.rp,E0=n0.rteosq,s0=n0.sinio;if(a.no=n0.no,a.con41=n0.con41,a.gsto=n0.gsto,a.a=Math.pow(a.no*_2,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,j0>=0||a.no>=0){if(a.isimp=0,L0<220/t0+1&&(a.isimp=1),f=x0,M=G0,d0=(L0-1)*t0,d0<156){f=d0-78,d0<98&&(f=20);var F0=(120-f)/t0;M=F0*F0*F0*F0,f=f/t0+1}$=1/H0,y=1/(M0-f),a.eta=M0*a.ecco*y,A=a.eta*a.eta,l=a.ecco*a.eta,a0=Math.abs(1-A),t=M*Math.pow(y,4),R=t/Math.pow(a0,3.5),h0=R*a.no*(M0*(1+1.5*A+l*(4+A))+.375*X0*y/a0*a.con41*(8+3*A*(8+A))),a.cc1=a.bstar*h0,Y=0,a.ecco>1e-4&&(Y=-2*t*y*_0*a.no*s0/a.ecco),a.x1mth2=1-y0,a.cc4=2*a.no*R*M0*j0*(a.eta*(2+.5*A)+a.ecco*(.5+2*A)-X0*y/(M0*a0)*(-3*a.con41*(1-2*l+A*(1.5-.5*l))+.75*a.x1mth2*(2*A-l*(1+A))*Math.cos(2*a.argpo))),a.cc5=2*R*M0*j0*(1+2.75*(A+l)+l*A),E=y0*y0,I=1.5*X0*$*a.no,F=.5*I*X0*$,w=-.46875*Z2*$*$*a.no,a.mdot=a.no+.5*I*E0*a.con41+.0625*F*E0*(13-78*y0+137*E),a.argpdot=-.5*I*B0+.0625*F*(7-114*y0+395*E)+w*(3-36*y0+49*E),_=-I*C0,a.nodedot=_+(.5*F*(4-19*y0)+2*w*(3-7*y0))*C0,K=a.argpdot+a.nodedot,a.omgcof=a.bstar*Y*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-l2*t*a.bstar/l),a.nodecf=3.5*j0*_*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(C0+1)>15e-13?a.xlcof=-.25*_0*s0*(3+5*C0)/(1+C0):a.xlcof=-.25*_0*s0*(3+5*C0)/z0,a.aycof=-.5*_0*s0;var k0=1+a.eta*Math.cos(a.mo);if(a.delmo=k0*k0*k0,a.sinmao=Math.sin(a.mo),a.x7thm1=7*y0-1,2*W0/a.no>=225){a.method="d",a.isimp=1,Z=0,c=a.inclo;var Y0={epoch:x,ep:a.ecco,argpp:a.argpo,tc:Z,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,pinco:a.pinco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},n=c2(Y0);a.e3=n.e3,a.ee2=n.ee2,a.peo=n.peo,a.pgho=n.pgho,a.pho=n.pho,a.pinco=n.pinco,a.plo=n.plo,a.se2=n.se2,a.se3=n.se3,a.sgh2=n.sgh2,a.sgh3=n.sgh3,a.sgh4=n.sgh4,a.sh2=n.sh2,a.sh3=n.sh3,a.si2=n.si2,a.si3=n.si3,a.sl2=n.sl2,a.sl3=n.sl3,a.sl4=n.sl4,s=n.sinim,C=n.cosim,W=n.em,G=n.emsq,r0=n.s1,J=n.s2,B=n.s3,m0=n.s4,v0=n.s5,A0=n.ss1,l0=n.ss2,h=n.ss3,e=n.ss4,H=n.ss5,T=n.sz1,X=n.sz3,N=n.sz11,w0=n.sz13,o0=n.sz21,e0=n.sz23,q=n.sz31,U=n.sz33,a.xgh2=n.xgh2,a.xgh3=n.xgh3,a.xgh4=n.xgh4,a.xh2=n.xh2,a.xh3=n.xh3,a.xi2=n.xi2,a.xi3=n.xi3,a.xl2=n.xl2,a.xl3=n.xl3,a.xl4=n.xl4,a.zmol=n.zmol,a.zmos=n.zmos,u=n.nm,O=n.z1,P=n.z3,f0=n.z11,g0=n.z13,q0=n.z21,b0=n.z23,T0=n.z31,I0=n.z33;var N0={inclo:c,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},O0=W2(a,N0);a.ecco=O0.ep,a.inclo=O0.inclp,a.nodeo=O0.nodep,a.argpo=O0.argpp,a.mo=O0.mp,k=0,S=0,L=0;var Z0={cosim:C,emsq:G,argpo:a.argpo,s1:r0,s2:J,s3:B,s4:m0,s5:v0,sinim:s,ss1:A0,ss2:l0,ss3:h,ss4:e,ss5:H,sz1:T,sz3:X,sz11:N,sz13:w0,sz21:o0,sz23:e0,sz31:q,sz33:U,t:a.t,tc:Z,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xpidot:K,z1:O,z3:P,z11:f0,z13:g0,z21:q0,z23:b0,z31:T0,z33:I0,ecco:a.ecco,eccsq:K0,em:W,argpm:k,inclm:c,mm:L,nm:u,nodem:S,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},j=a1(Z0);a.irez=j.irez,a.atime=j.atime,a.d2201=j.d2201,a.d2211=j.d2211,a.d3210=j.d3210,a.d3222=j.d3222,a.d4410=j.d4410,a.d4422=j.d4422,a.d5220=j.d5220,a.d5232=j.d5232,a.d5421=j.d5421,a.d5433=j.d5433,a.dedt=j.dedt,a.didt=j.didt,a.dmdt=j.dmdt,a.dnodt=j.dnodt,a.domdt=j.domdt,a.del1=j.del1,a.del2=j.del2,a.del3=j.del3,a.xfact=j.xfact,a.xlamo=j.xlamo,a.xli=j.xli,a.xni=j.xni}a.isimp!==1&&(V=a.cc1*a.cc1,a.d2=4*M0*y*V,D=a.d2*y*a.cc1/3,a.d3=(17*M0+f)*D,a.d4=.5*D*M0*y*(221*M0+31*f)*a.cc1,a.t3cof=a.d2+2*V,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*V)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*V*(2*a.d2+V)))}Y2(a,0),a.init="n"}function d1(a,v){var i="i",m=1440/(2*W0),x=0,o={};o.error=0,o.satnum=a.substring(2,7),o.epochyr=parseInt(a.substring(18,20),10),o.epochdays=parseFloat(a.substring(20,32)),o.ndot=parseFloat(a.substring(33,43)),o.nddot=parseFloat(".".concat(parseInt(a.substring(44,50),10),"E").concat(a.substring(50,52))),o.bstar=parseFloat("".concat(a.substring(53,54),".").concat(parseInt(a.substring(54,59),10),"E").concat(a.substring(59,61))),o.inclo=parseFloat(v.substring(8,16)),o.nodeo=parseFloat(v.substring(17,25)),o.ecco=parseFloat(".".concat(v.substring(26,33))),o.argpo=parseFloat(v.substring(34,42)),o.mo=parseFloat(v.substring(43,51)),o.no=parseFloat(v.substring(52,63)),o.no/=m,o.inclo*=m2,o.nodeo*=m2,o.argpo*=m2,o.mo*=m2,o.epochyr<57?x=o.epochyr+2e3:x=o.epochyr+1900;var z=R2(x,o.epochdays),d=z.mon,r=z.day,b=z.hr,g=z.minute,p=z.sec;return o.jdsatepoch=w2(x,d,r,b,g,p),n1(o,{opsmode:i,satn:o.satnum,epoch:o.jdsatepoch-24332815e-1,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}function r1(a,v){for(var i=6378.137,m=6356.7523142,x=Math.sqrt(a.x*a.x+a.y*a.y),o=(i-m)/i,z=2*o-o*o,d=Math.atan2(a.y,a.x)-v;d<-W0;)d+=Q;for(;d>W0;)d-=Q;for(var r=20,b=0,g=Math.atan2(a.z,Math.sqrt(a.x*a.x+a.y*a.y)),p;b<r;)p=1/Math.sqrt(1-z*(Math.sin(g)*Math.sin(g))),g=Math.atan2(a.z+i*p*z*Math.sin(g),x),b+=1;var C=x/Math.cos(g)-i*p;return{longitude:d,latitude:g,height:C}}const $2={appName:"Stuff in Space",baseUrl:"/StuffInSpace",propergateInterval:1e3,pushHistory:!1,logLevel:"debug",satWorker:{runOnce:!0},satelliteGroups:[{id:"GPSGroup",name:"GPS",groupType:"intlDes",data:["90103A","93068A","96041A","97035A","99055A","00025A","00040A","00071A","01004A","03005A","03010A","03058A","04009A","04023A","04045A","05038A","06042A","06052A","07047A","07062A","08012A","09043A","10022A","11036A","12053A","13023A","14008A","14026A","14045A","14068A","15013A"]},{id:"IridiumGroup",name:"Iridium Debris",groupType:"nameRegex",data:/IRIDIUM(?!.*DEB)/},{id:"Iridium33DebrisGroup",name:"Iridium 33 Debris",groupType:"nameRegex",data:/(COSMOS 2251|IRIDIUM 33) DEB/},{id:"GlonassGroup",name:"Glonass",groupType:"nameRegex",data:/GLONASS/},{id:"GalileoGroup",name:"Galileo",groupType:"nameRegex",data:/GALILEO/},{id:"FunGroup",name:"Fun",groupType:"nameRegex",data:/SYLDA/},{id:"WestfordNeedlesGroup",name:"Westford Needles",groupType:"nameRegex",data:/WESTFORD NEEDLES/},{id:"SpaceXGroup",name:"Space X",groupType:"nameRegex",data:/FALCON [19]/},{id:"DebrisGroup",name:"Debris",groupType:"objectType",data:"DEBRIS"},{id:"Starlink",name:"Starlink",groupType:"nameRegex",data:/STARLINK/},{id:"Unknown",name:"Unknown Objects",groupType:"objectType",data:"UNKNOWN"}]},g2=["error","warn","info","debug"],v2={};let x2={};function b2(a,v,i,...m){a.enabledOutputs[v]&&i(v.toUpperCase(),...m)}function J2(a){const v=g2.indexOf(a.toLowerCase());if(v<0)throw new Error("Unknown log level");for(let i=0;i<g2.length;i++)v2[g2[i]]=i<=v}function i1(){return{error:x2.error,warn:x2.warn,info:x2.info,debug:x2.debug,setLogLevel:J2}}function h1(){x2={error:b2.bind(this,{enabledOutputs:v2},"error",console.error),warn:b2.bind(this,{enabledOutputs:v2},"warn",console.warn),info:b2.bind(this,{enabledOutputs:v2},"info",console.info),debug:b2.bind(this,{enabledOutputs:v2},"debug",console.debug)};for(let a=0;a<g2.length;a++)v2[g2[a]]=!0}h1(),J2($2.logLevel);var s2=i1();const Q0=[],m1=$2.propergateInterval;let K2=!1,T2={},o2,n2,u2;function V2(){const a=new Date;let v=w2(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds());v+=a.getUTCMilliseconds()*115741e-13;const i=H2(v);for(let m=0;m<Q0.length;m++){const x=(v-Q0[m].jdsatepoch)*1440,o=Y2(Q0[m],x);let z,d,r,b,g,p,C;try{z=o.position.x,d=o.position.y,r=o.position.z,b=o.velocity.x,g=o.velocity.y,p=o.velocity.z,C=r1(o.position,i).height}catch{z=0,d=0,r=0,b=0,g=0,p=0,C=0}const s=3185.5;o2[m*3]=z/s,o2[m*3+1]=r/s,o2[m*3+2]=d/s,n2[m*3]=b,n2[m*3+1]=p,n2[m*3+2]=g,u2[m]=C}postMessage({satPos:o2.buffer,satVel:n2.buffer,satAlt:u2.buffer}),o2=new Float32Array(Q0.length*3),n2=new Float32Array(Q0.length*3),u2=new Float32Array(Q0.length),K2||setTimeout(V2,m1)}onmessage=function(a){try{s2.debug("Sat cruncher worker handling message");const v=Date.now(),i=JSON.parse(a.data);if(!Array.isArray(i)){i.config&&(T2=i.config,T2.runOnce&&(K2=T2.runOnce));return}const m=i.length,x=[];for(let z=0;z<m;z++){const d={},r=d1(i[z].TLE_LINE1,i[z].TLE_LINE2);d.inclination=r.inclo,d.eccentricity=r.ecco,d.raan=r.nodeo,d.argPe=r.argpo,d.meanMotion=r.no*60*24/(2*Math.PI),d.semiMajorAxis=(8681663653e-3/d.meanMotion)**(2/3),d.semiMinorAxis=d.semiMajorAxis*Math.sqrt(1-d.eccentricity**2),d.apogee=d.semiMajorAxis*(1+d.eccentricity)-6371,d.perigee=d.semiMajorAxis*(1-d.eccentricity)-6371,d.period=1440/d.meanMotion,x.push(d),Q0.push(r)}o2=new Float32Array(m*3),n2=new Float32Array(m*3),u2=new Float32Array(m);const o=Date.now();postMessage({extraData:JSON.stringify(x)}),s2.debug(`sat-cruncher init: ${Date.now()-v} ms  (incl post: ${Date.now()-o} ms)`),V2()}catch(v){s2.error("Error while runnning worker",v)}}})();
