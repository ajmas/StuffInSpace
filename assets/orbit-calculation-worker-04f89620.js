(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var G0=Math.PI,d0=G0*2,h2=G0/180,W2=398600.8,E0=6378.135,Q0=60/Math.sqrt(E0*E0*E0/W2),e2=E0*Q0/60,B2=1/Q0,Z0=.001082616,G2=-253881e-11,Q2=-165597e-11,$0=G2/Z0,m2=2/3;function V2(v,a){for(var n=[31,v%4===0?29:28,31,30,31,30,31,31,30,31,30,31],z=Math.floor(a),g=1,d=0;z>d+n[g-1]&&g<12;)d+=n[g-1],g+=1;var U=g,F=z-d,i=(a-z)*24,y=Math.floor(i);i=(i-y)*60;var l=Math.floor(i),w=(i-l)*60;return{mon:U,day:F,hr:y,minute:l,sec:w}}function N2(v,a,n,z,g,d){var U=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*v-Math.floor(7*(v+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+n+17210135e-1+((U/6e4+d/60+g)/60+z)/24}function y2(v,a,n,z,g,d,U){if(v instanceof Date){var F=v;return N2(F.getUTCFullYear(),F.getUTCMonth()+1,F.getUTCDate(),F.getUTCHours(),F.getUTCMinutes(),F.getUTCSeconds(),F.getUTCMilliseconds())}return N2(v,a,n,z,g,d,U)}function _2(v,a){var n=v.e3,z=v.ee2,g=v.peo,d=v.pgho,U=v.pho,F=v.pinco,i=v.plo,y=v.se2,l=v.se3,w=v.sgh2,Z=v.sgh3,D=v.sgh4,$=v.sh2,m0=v.sh3,W=v.si2,L=v.si3,R=v.sl2,N=v.sl3,Y=v.sl4,E=v.t,m=v.xgh2,b=v.xgh3,_=v.xgh4,I=v.xh2,t=v.xh3,P=v.xi2,M=v.xi3,n0=v.xl2,B=v.xl3,c=v.xl4,f=v.zmol,i0=v.zmos,G=a.init,A=a.opsmode,r0=a.ep,v0=a.inclp,x=a.nodep,w0=a.argpp,x0=a.mp,h,r,K,u,V,H,C0,a0,z0,q,j,s,T,C,O,e,p,Q,X,k,J,f0=119459e-10,g0=.01675,u0=.00015835218,e0=.0549;J=i0+f0*E,G==="y"&&(J=i0),k=J+2*g0*Math.sin(J),p=Math.sin(k),q=.5*p*p-.25,j=-.5*p*Math.cos(k);var U0=y*q+l*j,F0=W*q+L*j,p0=R*q+N*j+Y*p,l0=w*q+Z*j+D*p,M0=$*q+m0*j;J=f+u0*E,G==="y"&&(J=f),k=J+2*e0*Math.sin(J),p=Math.sin(k),q=.5*p*p-.25,j=-.5*p*Math.cos(k);var k0=z*q+n*j,O0=P*q+M*j,o0=n0*q+B*j+c*p,b0=m*q+b*j+_*p,A0=I*q+t*j;return s=U0+k0,O=F0+O0,e=p0+o0,T=l0+b0,C=M0+A0,G==="n"&&(s-=g,O-=F,e-=i,T-=d,C-=U,v0+=O,r0+=s,u=Math.sin(v0),K=Math.cos(v0),v0>=.2?(C/=u,T-=K*C,w0+=T,x+=C,x0+=e):(H=Math.sin(x),V=Math.cos(x),h=u*H,r=u*V,C0=C*V+O*K*H,a0=-C*H+O*K*V,h+=C0,r+=a0,x%=d0,x<0&&A==="a"&&(x+=d0),Q=x0+w0+K*x,z0=e+T-O*x*u,Q+=z0,X=x,x=Math.atan2(h,r),x<0&&A==="a"&&(x+=d0),Math.abs(X-x)>G0&&(x<X?x+=d0:x-=d0),x0+=e,w0=Q-x0-K*x)),{ep:r0,inclp:v0,nodep:x,argpp:w0,mp:x0}}function X2(v){var a=v.epoch,n=v.ep,z=v.argpp,g=v.tc,d=v.inclp,U=v.nodep,F=v.np,i,y,l,w,Z,D,$,m0,W,L,R,N,Y,E,m,b,_,I,t,P,M,n0,B,c,f,i0,G,A,r0,v0,x,w0,x0,h,r,K,u,V,H,C0,a0,z0,q,j,s,T,C,O,e,p,Q,X,k,J,f0,g0,u0,e0,U0,F0,p0,l0,M0,k0=.01675,O0=.0549,o0=29864797e-13,b0=47968065e-14,A0=.39785416,L0=.91744867,q0=.1945905,V0=-.98088458,P0=F,K0=n,N0=Math.sin(U),_0=Math.cos(U),T0=Math.sin(z),D0=Math.cos(z),H0=Math.sin(d),W0=Math.cos(d),o=K0*K0,J0=1-o,S0=Math.sqrt(J0),s0=0,S=0,o2=0,x2=0,g2=0,X0=a+18261.5+g/1440,B0=(4.523602-.00092422029*X0)%d0,y0=Math.sin(B0),Y0=Math.cos(B0),d2=.91375164-.03568096*Y0,n2=Math.sqrt(1-d2*d2),I0=.089683511*y0/n2,j0=Math.sqrt(1-I0*I0),h0=5.8351514+.001944368*X0,R0=.39785416*y0/n2,u2=j0*Y0+.91744867*I0*y0;R0=Math.atan2(R0,u2),R0+=h0-B0;var C2=Math.cos(R0),T2=Math.sin(R0);P=q0,M=V0,c=L0,f=A0,n0=_0,B=N0,R=o0;for(var U2=1/P0,l2=0;l2<2;)l2+=1,i=P*n0+M*c*B,l=-M*n0+P*c*B,$=-P*B+M*c*n0,m0=M*f,W=M*B+P*c*n0,L=P*f,y=W0*$+H0*m0,w=W0*W+H0*L,Z=-H0*$+W0*m0,D=-H0*W+W0*L,N=i*D0+y*T0,Y=l*D0+w*T0,E=-i*T0+y*D0,m=-l*T0+w*D0,b=Z*T0,_=D*T0,I=Z*D0,t=D*D0,p0=12*N*N-3*E*E,l0=24*N*Y-6*E*m,M0=12*Y*Y-3*m*m,X=3*(i*i+y*y)+p0*o,k=6*(i*l+y*w)+l0*o,J=3*(l*l+w*w)+M0*o,f0=-6*i*Z+o*(-24*N*I-6*E*b),g0=-6*(i*D+l*Z)+o*(-24*(Y*I+N*t)+-6*(E*_+m*b)),u0=-6*l*D+o*(-24*Y*t-6*m*_),e0=6*y*Z+o*(24*N*b-6*E*I),U0=6*(w*Z+y*D)+o*(24*(Y*b+N*_)-6*(m*I+E*t)),F0=6*w*D+o*(24*Y*_-6*m*t),X=X+X+J0*p0,k=k+k+J0*l0,J=J+J+J0*M0,C=R*U2,T=-.5*C/S0,O=C*S0,s=-15*K0*O,e=N*E+Y*m,p=Y*E+N*m,Q=Y*m-N*E,l2===1&&(i0=s,G=T,A=C,r0=O,v0=e,x=p,w0=Q,x0=X,h=k,r=J,K=f0,u=g0,V=u0,H=e0,C0=U0,a0=F0,z0=p0,q=l0,j=M0,P=C2,M=T2,c=d2,f=n2,n0=j0*_0+I0*N0,B=N0*j0-_0*I0,R=b0);var z2=(4.7199672+(.2299715*X0-h0))%d0,F2=(6.2565837+.017201977*X0)%d0,I2=2*i0*x,t0=2*i0*w0,c0=2*G*u,j2=2*G*(V-K),O2=-2*A*h,D2=-2*A*(r-x0),L2=-2*A*(-21-9*o)*k0,i2=2*r0*q,E2=2*r0*(j-z0),k2=-18*r0*k0,f2=-2*G*C0,q2=-2*G*(a0-H),p2=2*s*p,S2=2*s*Q,P2=2*T*g0,o1=2*T*(u0-f0),d1=-2*C*k,n1=-2*C*(J-X),i1=-2*C*(-21-9*o)*O0,h1=2*O*l0,m1=2*O*(M0-p0),r1=-18*O*O0,x1=-2*T*U0,g1=-2*T*(F0-e0);return{snodm:N0,cnodm:_0,sinim:H0,cosim:W0,sinomm:T0,cosomm:D0,day:X0,e3:S2,ee2:p2,em:K0,emsq:o,gam:h0,peo:s0,pgho:x2,pho:g2,pinco:S,plo:o2,rtemsq:S0,se2:I2,se3:t0,sgh2:i2,sgh3:E2,sgh4:k2,sh2:f2,sh3:q2,si2:c0,si3:j2,sl2:O2,sl3:D2,sl4:L2,s1:s,s2:T,s3:C,s4:O,s5:e,s6:p,s7:Q,ss1:i0,ss2:G,ss3:A,ss4:r0,ss5:v0,ss6:x,ss7:w0,sz1:x0,sz2:h,sz3:r,sz11:K,sz12:u,sz13:V,sz21:H,sz22:C0,sz23:a0,sz31:z0,sz32:q,sz33:j,xgh2:h1,xgh3:m1,xgh4:r1,xh2:x1,xh3:g1,xi2:P2,xi3:o1,xl2:d1,xl3:n1,xl4:i1,nm:P0,z1:X,z2:k,z3:J,z11:f0,z12:g0,z13:u0,z21:e0,z22:U0,z23:F0,z31:p0,z32:l0,z33:M0,zmol:z2,zmos:F2}}function Z2(v){var a=v.cosim,n=v.argpo,z=v.s1,g=v.s2,d=v.s3,U=v.s4,F=v.s5,i=v.sinim,y=v.ss1,l=v.ss2,w=v.ss3,Z=v.ss4,D=v.ss5,$=v.sz1,m0=v.sz3,W=v.sz11,L=v.sz13,R=v.sz21,N=v.sz23,Y=v.sz31,E=v.sz33,m=v.t,b=v.tc,_=v.gsto,I=v.mo,t=v.mdot,P=v.no,M=v.nodeo,n0=v.nodedot,B=v.xpidot,c=v.z1,f=v.z3,i0=v.z11,G=v.z13,A=v.z21,r0=v.z23,v0=v.z31,x=v.z33,w0=v.ecco,x0=v.eccsq,h=v.emsq,r=v.em,K=v.argpm,u=v.inclm,V=v.mm,H=v.nm,C0=v.nodem,a0=v.irez,z0=v.atime,q=v.d2201,j=v.d2211,s=v.d3210,T=v.d3222,C=v.d4410,O=v.d4422,e=v.d5220,p=v.d5232,Q=v.d5421,X=v.d5433,k=v.dedt,J=v.didt,f0=v.dmdt,g0=v.dnodt,u0=v.domdt,e0=v.del1,U0=v.del2,F0=v.del3,p0=v.xfact,l0=v.xlamo,M0=v.xli,k0=v.xni,O0,o0,b0,A0,L0,q0,V0,P0,K0,N0,_0,T0,D0,H0,W0,o,J0,S0,s0,S,o2,x2,g2,X0,B0,y0,Y0,d2,n2,I0,j0,h0,R0=17891679e-13,u2=21460748e-13,C2=22123015e-14,T2=17891679e-13,U2=73636953e-16,l2=21765803e-16,z2=.0043752690880113,F2=37393792e-14,I2=11428639e-14,t0=.00015835218,c0=119459e-10;a0=0,H<.0052359877&&H>.0034906585&&(a0=1),H>=.00826&&H<=.00924&&r>=.5&&(a0=2);var j2=y*c0*D,O2=l*c0*(W+L),D2=-c0*w*($+m0-14-6*h),L2=Z*c0*(Y+E-6),i2=-c0*l*(R+N);(u<.052359877||u>G0-.052359877)&&(i2=0),i!==0&&(i2/=i);var E2=L2-a*i2;k=j2+z*t0*F,J=O2+g*t0*(i0+G),f0=D2-t0*d*(c+f-14-6*h);var k2=U*t0*(v0+x-6),f2=-t0*g*(A+r0);(u<.052359877||u>G0-.052359877)&&(f2=0),u0=E2+k2,g0=i2,i!==0&&(u0-=a/i*f2,g0+=f2/i);var q2=0,p2=(_+b*z2)%d0;if(r+=k*m,u+=J*m,K+=u0*m,C0+=g0*m,V+=f0*m,a0!==0){if(I0=Math.pow(H/Q0,m2),a0===2){j0=a*a;var S2=r;r=w0;var P2=h;h=x0,h0=r*h,H0=-.306-(r-.64)*.44,r<=.65?(W0=3.616-13.247*r+16.29*h,J0=-19.302+117.39*r-228.419*h+156.591*h0,S0=-18.9068+109.7927*r-214.6334*h+146.5816*h0,s0=-41.122+242.694*r-471.094*h+313.953*h0,S=-146.407+841.88*r-1629.014*h+1083.435*h0,o2=-532.114+3017.977*r-5740.032*h+3708.276*h0):(W0=-72.099+331.819*r-508.738*h+266.724*h0,J0=-346.844+1582.851*r-2415.925*h+1246.113*h0,S0=-342.585+1554.908*r-2366.899*h+1215.972*h0,s0=-1052.797+4758.686*r-7193.992*h+3651.957*h0,S=-3581.69+16178.11*r-24462.77*h+12422.52*h0,r>.715?o2=-5149.66+29936.92*r-54087.36*h+31324.56*h0:o2=1464.74-4664.75*r+3763.64*h),r<.7?(X0=-919.2277+4988.61*r-9064.77*h+5542.21*h0,x2=-822.71072+4568.6173*r-8491.4146*h+5337.524*h0,g2=-853.666+4690.25*r-8624.77*h+5341.4*h0):(X0=-37995.78+161616.52*r-229838.2*h+109377.94*h0,x2=-51752.104+218913.95*r-309468.16*h+146349.42*h0,g2=-40023.88+170470.89*r-242699.48*h+115605.82*h0),B0=i*i,O0=.75*(1+2*a+j0),o0=1.5*B0,A0=1.875*i*(1-2*a-3*j0),L0=-1.875*i*(1+2*a-3*j0),V0=35*B0*O0,P0=39.375*B0*B0,K0=9.84375*i*(B0*(1-2*a-5*j0)+.33333333*(-2+4*a+6*j0)),N0=i*(4.92187512*B0*(-2-4*a+10*j0)+6.56250012*(1+2*a-3*j0)),_0=29.53125*i*(2-8*a+j0*(-12+8*a+10*j0)),T0=29.53125*i*(-2-8*a+j0*(12+8*a-10*j0)),d2=H*H,n2=I0*I0,Y0=3*d2*n2,y0=Y0*T2,q=y0*O0*H0,j=y0*o0*W0,Y0*=I0,y0=Y0*F2,s=y0*A0*J0,T=y0*L0*S0,Y0*=I0,y0=2*Y0*U2,C=y0*V0*s0,O=y0*P0*S,Y0*=I0,y0=Y0*I2,e=y0*K0*o2,p=y0*N0*g2,y0=2*Y0*l2,Q=y0*_0*x2,X=y0*T0*X0,l0=(I+M+M-(p2+p2))%d0,p0=t+f0+2*(n0+g0-z2)-P,r=S2,h=P2}a0===1&&(D0=1+h*(-2.5+.8125*h),J0=1+2*h,o=1+h*(-6+6.60937*h),O0=.75*(1+a)*(1+a),b0=.9375*i*i*(1+3*a)-.75*(1+a),q0=1+a,q0*=1.875*q0*q0,e0=3*H*H*I0*I0,U0=2*e0*O0*D0*R0,F0=3*e0*q0*o*C2*I0,e0=e0*b0*J0*u2*I0,l0=(I+M+n-p2)%d0,p0=t+B+f0+u0+g0-(P+z2)),M0=l0,k0=P,z0=0,H=P+q2}return{em:r,argpm:K,inclm:u,mm:V,nm:H,nodem:C0,irez:a0,atime:z0,d2201:q,d2211:j,d3210:s,d3222:T,d4410:C,d4422:O,d5220:e,d5232:p,d5421:Q,d5433:X,dedt:k,didt:J,dmdt:f0,dndt:q2,dnodt:g0,domdt:u0,del1:e0,del2:U0,del3:F0,xfact:p0,xlamo:l0,xli:M0,xni:k0}}function H2(v){var a=(v-2451545)/36525,n=-62e-7*a*a*a+.093104*a*a+(876600*3600+8640184812866e-6)*a+67310.54841;return n=n*h2/240%d0,n<0&&(n+=d0),n}function $2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?H2(y2.apply(void 0,arguments)):H2.apply(void 0,arguments)}function s2(v){var a=v.ecco,n=v.epoch,z=v.inclo,g=v.opsmode,d=v.no,U=a*a,F=1-U,i=Math.sqrt(F),y=Math.cos(z),l=y*y,w=Math.pow(Q0/d,m2),Z=.75*Z0*(3*l-1)/(i*F),D=Z/(w*w),$=w*(1-D*D-D*(1/3+134*D*D/81));D=Z/($*$),d/=1+D;var m0=Math.pow(Q0/d,m2),W=Math.sin(z),L=m0*F,R=1-5*l,N=-R-l-l,Y=1/m0,E=L*L,m=m0*(1-a),b="n",_;if(g==="a"){var I=n-7305,t=Math.floor(I+1e-8),P=I-t,M=.017202791694070362,n0=1.7321343856509375,B=5075514194322695e-30,c=M+d0;_=(n0+M*t+c*P+I*I*B)%d0,_<0&&(_+=d0)}else _=$2(n+24332815e-1);return{no:d,method:b,ainv:Y,ao:m0,con41:N,con42:R,cosio:y,cosio2:l,eccsq:U,omeosq:F,posq:E,rp:m,rteosq:i,sinio:W,gsto:_}}function R2(v){var a=v.irez,n=v.d2201,z=v.d2211,g=v.d3210,d=v.d3222,U=v.d4410,F=v.d4422,i=v.d5220,y=v.d5232,l=v.d5421,w=v.d5433,Z=v.dedt,D=v.del1,$=v.del2,m0=v.del3,W=v.didt,L=v.dmdt,R=v.dnodt,N=v.domdt,Y=v.argpo,E=v.argpdot,m=v.t,b=v.tc,_=v.gsto,I=v.xfact,t=v.xlamo,P=v.no,M=v.atime,n0=v.em,B=v.argpm,c=v.inclm,f=v.xli,i0=v.mm,G=v.xni,A=v.nodem,r0=v.nm,v0=.13130908,x=2.8843198,w0=.37448087,x0=5.7686396,h=.95240898,r=1.8014998,K=1.050833,u=4.4108898,V=.0043752690880113,H=720,C0=-720,a0=259200,z0,q,j,s,T,C,O,e,p=0,Q=0,X=(_+b*V)%d0;if(n0+=Z*m,c+=W*m,B+=N*m,A+=R*m,i0+=L*m,a!==0){(M===0||m*M<=0||Math.abs(m)<Math.abs(M))&&(M=0,G=P,f=t),m>0?z0=H:z0=C0;for(var k=381;k===381;)a!==2?(O=D*Math.sin(f-v0)+$*Math.sin(2*(f-x))+m0*Math.sin(3*(f-w0)),T=G+I,C=D*Math.cos(f-v0)+2*$*Math.cos(2*(f-x))+3*m0*Math.cos(3*(f-w0)),C*=T):(e=Y+E*M,j=e+e,q=f+f,O=n*Math.sin(j+f-x0)+z*Math.sin(f-x0)+g*Math.sin(e+f-h)+d*Math.sin(-e+f-h)+U*Math.sin(j+q-r)+F*Math.sin(q-r)+i*Math.sin(e+f-K)+y*Math.sin(-e+f-K)+l*Math.sin(e+q-u)+w*Math.sin(-e+q-u),T=G+I,C=n*Math.cos(j+f-x0)+z*Math.cos(f-x0)+g*Math.cos(e+f-h)+d*Math.cos(-e+f-h)+i*Math.cos(e+f-K)+y*Math.cos(-e+f-K)+2*(U*Math.cos(j+q-r)+F*Math.cos(q-r)+l*Math.cos(e+q-u)+w*Math.cos(-e+q-u)),C*=T),Math.abs(m-M)>=H?k=381:(Q=m-M,k=0),k===381&&(f+=T*z0+O*a0,G+=O*z0+C*a0,M+=z0);r0=G+O*Q+C*Q*Q*.5,s=f+T*Q+O*Q*Q*.5,a!==1?(i0=s-2*A+2*X,p=r0-P):(i0=s-A-B+X,p=r0-P),r0=P+p}return{atime:M,em:n0,argpm:B,inclm:c,xli:f,mm:i0,xni:G,nodem:A,dndt:p,nm:r0}}function J2(v,a){var n,z,g,d,U,F,i,y,l,w,Z,D,$,m0,W,L,R,N,Y,E,m,b,_,I,t,P,M,n0=15e-13;v.t=a,v.error=0;var B=v.mo+v.mdot*v.t,c=v.argpo+v.argpdot*v.t,f=v.nodeo+v.nodedot*v.t;l=c,m=B;var i0=v.t*v.t;if(_=f+v.nodecf*i0,R=1-v.cc1*v.t,N=v.bstar*v.cc4*v.t,Y=v.t2cof*i0,v.isimp!==1){i=v.omgcof*v.t;var G=1+v.eta*Math.cos(B);F=v.xmcof*(G*G*G-v.delmo),L=i+F,m=B+L,l=c-L,D=i0*v.t,$=D*v.t,R=R-v.d2*i0-v.d3*D-v.d4*$,N+=v.bstar*v.cc5*(Math.sin(m)-v.sinmao),Y=Y+v.t3cof*D+$*(v.t4cof+v.t*v.t5cof)}b=v.no;var A=v.ecco;if(E=v.inclo,v.method==="d"){m0=v.t;var r0={irez:v.irez,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,del1:v.del1,del2:v.del2,del3:v.del3,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,argpo:v.argpo,argpdot:v.argpdot,t:v.t,tc:m0,gsto:v.gsto,xfact:v.xfact,xlamo:v.xlamo,no:v.no,atime:v.atime,em:A,argpm:l,inclm:E,xli:v.xli,mm:m,xni:v.xni,nodem:_,nm:b},v0=R2(r0);A=v0.em,l=v0.argpm,E=v0.inclm,m=v0.mm,_=v0.nodem,b=v0.nm}if(b<=0)return v.error=2,[!1,!1];var x=Math.pow(Q0/b,m2)*R*R;if(b=Q0/Math.pow(x,1.5),A-=N,A>=1||A<-.001)return v.error=1,[!1,!1];A<1e-6&&(A=1e-6),m+=v.no*Y,t=m+l+_,_%=d0,l%=d0,t%=d0,m=(t-l-_)%d0;var w0=Math.sin(E),x0=Math.cos(E),h=A;if(I=E,w=l,M=_,P=m,d=w0,g=x0,v.method==="d"){var r={inclo:v.inclo,init:"n",ep:h,inclp:I,nodep:M,argpp:w,mp:P,opsmode:v.operationmode},K=_2(v,r);if(h=K.ep,M=K.nodep,w=K.argpp,P=K.mp,I=K.inclp,I<0&&(I=-I,M+=G0,w-=G0),h<0||h>1)return v.error=3,[!1,!1]}v.method==="d"&&(d=Math.sin(I),g=Math.cos(I),v.aycof=-.5*$0*d,Math.abs(g+1)>15e-13?v.xlcof=-.25*$0*d*(3+5*g)/(1+g):v.xlcof=-.25*$0*d*(3+5*g)/n0);var u=h*Math.cos(w);L=1/(x*(1-h*h));var V=h*Math.sin(w)+L*v.aycof,H=P+w+M+L*v.xlcof*u,C0=(H-M)%d0;y=C0,W=9999.9;for(var a0=1;Math.abs(W)>=1e-12&&a0<=10;)z=Math.sin(y),n=Math.cos(y),W=1-n*u-z*V,W=(C0-V*n+u*z-y)/W,Math.abs(W)>=.95&&(W>0?W=.95:W=-.95),y+=W,a0+=1;var z0=u*n+V*z,q=u*z-V*n,j=u*u+V*V,s=x*(1-j);if(s<0)return v.error=4,[!1,!1];var T=x*(1-z0),C=Math.sqrt(x)*q/T,O=Math.sqrt(s)/T,e=Math.sqrt(1-j);L=q/(1+e);var p=x/T*(z-V-u*L),Q=x/T*(n-u+V*L);Z=Math.atan2(p,Q);var X=(Q+Q)*p,k=1-2*p*p;L=1/s;var J=.5*Z0*L,f0=J*L;v.method==="d"&&(U=g*g,v.con41=3*U-1,v.x1mth2=1-U,v.x7thm1=7*U-1);var g0=T*(1-1.5*f0*e*v.con41)+.5*J*v.x1mth2*k;if(g0<1)return v.error=6,{position:!1,velocity:!1};Z-=.25*f0*v.x7thm1*X;var u0=M+1.5*f0*g*X,e0=I+1.5*f0*g*d*k,U0=C-b*J*v.x1mth2*X/Q0,F0=O+b*J*(v.x1mth2*k+1.5*v.con41)/Q0,p0=Math.sin(Z),l0=Math.cos(Z),M0=Math.sin(u0),k0=Math.cos(u0),O0=Math.sin(e0),o0=Math.cos(e0),b0=-M0*o0,A0=k0*o0,L0=b0*p0+k0*l0,q0=A0*p0+M0*l0,V0=O0*p0,P0=b0*l0-k0*p0,K0=A0*l0-M0*p0,N0=O0*l0,_0={x:g0*L0*E0,y:g0*q0*E0,z:g0*V0*E0},T0={x:(U0*L0+F0*P0)*e2,y:(U0*q0+F0*K0)*e2,z:(U0*V0+F0*N0)*e2};return{position:_0,velocity:T0}}function t2(v,a){var n=a.opsmode,z=a.satn,g=a.epoch,d=a.xbstar,U=a.xecco,F=a.xargpo,i=a.xinclo,y=a.xmo,l=a.xno,w=a.xnodeo,Z,D,$,m0,W,L,R,N,Y,E,m,b,_,I,t,P,M,n0,B,c,f,i0,G,A,r0,v0,x,w0,x0,h,r,K,u,V,H,C0,a0,z0,q,j,s,T,C,O,e,p,Q,X,k,J,f0,g0,u0,e0,U0,F0,p0=15e-13;v.isimp=0,v.method="n",v.aycof=0,v.con41=0,v.cc1=0,v.cc4=0,v.cc5=0,v.d2=0,v.d3=0,v.d4=0,v.delmo=0,v.eta=0,v.argpdot=0,v.omgcof=0,v.sinmao=0,v.t=0,v.t2cof=0,v.t3cof=0,v.t4cof=0,v.t5cof=0,v.x1mth2=0,v.x7thm1=0,v.mdot=0,v.nodedot=0,v.xlcof=0,v.xmcof=0,v.nodecf=0,v.irez=0,v.d2201=0,v.d2211=0,v.d3210=0,v.d3222=0,v.d4410=0,v.d4422=0,v.d5220=0,v.d5232=0,v.d5421=0,v.d5433=0,v.dedt=0,v.del1=0,v.del2=0,v.del3=0,v.didt=0,v.dmdt=0,v.dnodt=0,v.domdt=0,v.e3=0,v.ee2=0,v.peo=0,v.pgho=0,v.pho=0,v.pinco=0,v.plo=0,v.se2=0,v.se3=0,v.sgh2=0,v.sgh3=0,v.sgh4=0,v.sh2=0,v.sh3=0,v.si2=0,v.si3=0,v.sl2=0,v.sl3=0,v.sl4=0,v.gsto=0,v.xfact=0,v.xgh2=0,v.xgh3=0,v.xgh4=0,v.xh2=0,v.xh3=0,v.xi2=0,v.xi3=0,v.xl2=0,v.xl3=0,v.xl4=0,v.xlamo=0,v.zmol=0,v.zmos=0,v.atime=0,v.xli=0,v.xni=0,v.bstar=d,v.ecco=U,v.argpo=F,v.inclo=i,v.mo=y,v.no=l,v.nodeo=w,v.operationmode=n;var l0=78/E0+1,M0=(120-78)/E0,k0=M0*M0*M0*M0;v.init="y",v.t=0;var O0={satn:z,ecco:v.ecco,epoch:g,inclo:v.inclo,no:v.no,method:v.method,opsmode:v.operationmode},o0=s2(O0),b0=o0.ao,A0=o0.con42,L0=o0.cosio,q0=o0.cosio2,V0=o0.eccsq,P0=o0.omeosq,K0=o0.posq,N0=o0.rp,_0=o0.rteosq,T0=o0.sinio;if(v.no=o0.no,v.con41=o0.con41,v.gsto=o0.gsto,v.a=Math.pow(v.no*B2,-2/3),v.alta=v.a*(1+v.ecco)-1,v.altp=v.a*(1-v.ecco)-1,v.error=0,P0>=0||v.no>=0){if(v.isimp=0,N0<220/E0+1&&(v.isimp=1),x=l0,f=k0,n0=(N0-1)*E0,n0<156){x=n0-78,n0<98&&(x=20);var D0=(120-x)/E0;f=D0*D0*D0*D0,x=x/E0+1}B=1/K0,p=1/(b0-x),v.eta=b0*v.ecco*p,b=v.eta*v.eta,m=v.ecco*v.eta,c=Math.abs(1-b),L=f*Math.pow(p,4),R=L/Math.pow(c,3.5),m0=R*v.no*(b0*(1+1.5*b+m*(4+b))+.375*Z0*p/c*v.con41*(8+3*b*(8+b))),v.cc1=v.bstar*m0,W=0,v.ecco>1e-4&&(W=-2*L*p*$0*v.no*T0/v.ecco),v.x1mth2=1-q0,v.cc4=2*v.no*R*b0*P0*(v.eta*(2+.5*b)+v.ecco*(.5+2*b)-Z0*p/(b0*c)*(-3*v.con41*(1-2*m+b*(1.5-.5*m))+.75*v.x1mth2*(2*b-m*(1+b))*Math.cos(2*v.argpo))),v.cc5=2*R*b0*P0*(1+2.75*(b+m)+m*b),N=q0*q0,C=1.5*Z0*B*v.no,O=.5*C*Z0*B,e=-.46875*Q2*B*B*v.no,v.mdot=v.no+.5*C*_0*v.con41+.0625*O*_0*(13-78*q0+137*N),v.argpdot=-.5*C*A0+.0625*O*(7-114*q0+395*N)+e*(3-36*q0+49*N),X=-C*L0,v.nodedot=X+(.5*O*(4-19*q0)+2*e*(3-7*q0))*L0,Q=v.argpdot+v.nodedot,v.omgcof=v.bstar*W*Math.cos(v.argpo),v.xmcof=0,v.ecco>1e-4&&(v.xmcof=-m2*L*v.bstar/m),v.nodecf=3.5*P0*X*v.cc1,v.t2cof=1.5*v.cc1,Math.abs(L0+1)>15e-13?v.xlcof=-.25*$0*T0*(3+5*L0)/(1+L0):v.xlcof=-.25*$0*T0*(3+5*L0)/p0,v.aycof=-.5*$0*T0;var H0=1+v.eta*Math.cos(v.mo);if(v.delmo=H0*H0*H0,v.sinmao=Math.sin(v.mo),v.x7thm1=7*q0-1,2*G0/v.no>=225){v.method="d",v.isimp=1,s=0,t=v.inclo;var W0={epoch:g,ep:v.ecco,argpp:v.argpo,tc:s,inclp:v.inclo,nodep:v.nodeo,np:v.no,e3:v.e3,ee2:v.ee2,peo:v.peo,pgho:v.pgho,pho:v.pho,pinco:v.pinco,plo:v.plo,se2:v.se2,se3:v.se3,sgh2:v.sgh2,sgh3:v.sgh3,sgh4:v.sgh4,sh2:v.sh2,sh3:v.sh3,si2:v.si2,si3:v.si3,sl2:v.sl2,sl3:v.sl3,sl4:v.sl4,xgh2:v.xgh2,xgh3:v.xgh3,xgh4:v.xgh4,xh2:v.xh2,xh3:v.xh3,xi2:v.xi2,xi3:v.xi3,xl2:v.xl2,xl3:v.xl3,xl4:v.xl4,zmol:v.zmol,zmos:v.zmos},o=X2(W0);v.e3=o.e3,v.ee2=o.ee2,v.peo=o.peo,v.pgho=o.pgho,v.pho=o.pho,v.pinco=o.pinco,v.plo=o.plo,v.se2=o.se2,v.se3=o.se3,v.sgh2=o.sgh2,v.sgh3=o.sgh3,v.sgh4=o.sgh4,v.sh2=o.sh2,v.sh3=o.sh3,v.si2=o.si2,v.si3=o.si3,v.sl2=o.sl2,v.sl3=o.sl3,v.sl4=o.sl4,D=o.sinim,Z=o.cosim,Y=o.em,E=o.emsq,i0=o.s1,G=o.s2,A=o.s3,r0=o.s4,v0=o.s5,w0=o.ss1,x0=o.ss2,h=o.ss3,r=o.ss4,K=o.ss5,u=o.sz1,V=o.sz3,H=o.sz11,C0=o.sz13,a0=o.sz21,z0=o.sz23,q=o.sz31,j=o.sz33,v.xgh2=o.xgh2,v.xgh3=o.xgh3,v.xgh4=o.xgh4,v.xh2=o.xh2,v.xh3=o.xh3,v.xi2=o.xi2,v.xi3=o.xi3,v.xl2=o.xl2,v.xl3=o.xl3,v.xl4=o.xl4,v.zmol=o.zmol,v.zmos=o.zmos,M=o.nm,k=o.z1,J=o.z3,f0=o.z11,g0=o.z13,u0=o.z21,e0=o.z23,U0=o.z31,F0=o.z33;var J0={inclo:t,init:v.init,ep:v.ecco,inclp:v.inclo,nodep:v.nodeo,argpp:v.argpo,mp:v.mo,opsmode:v.operationmode},S0=_2(v,J0);v.ecco=S0.ep,v.inclo=S0.inclp,v.nodeo=S0.nodep,v.argpo=S0.argpp,v.mo=S0.mp,_=0,I=0,P=0;var s0={cosim:Z,emsq:E,argpo:v.argpo,s1:i0,s2:G,s3:A,s4:r0,s5:v0,sinim:D,ss1:w0,ss2:x0,ss3:h,ss4:r,ss5:K,sz1:u,sz3:V,sz11:H,sz13:C0,sz21:a0,sz23:z0,sz31:q,sz33:j,t:v.t,tc:s,gsto:v.gsto,mo:v.mo,mdot:v.mdot,no:v.no,nodeo:v.nodeo,nodedot:v.nodedot,xpidot:Q,z1:k,z3:J,z11:f0,z13:g0,z21:u0,z23:e0,z31:U0,z33:F0,ecco:v.ecco,eccsq:V0,em:Y,argpm:_,inclm:t,mm:P,nm:M,nodem:I,irez:v.irez,atime:v.atime,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,del1:v.del1,del2:v.del2,del3:v.del3,xfact:v.xfact,xlamo:v.xlamo,xli:v.xli,xni:v.xni},S=Z2(s0);v.irez=S.irez,v.atime=S.atime,v.d2201=S.d2201,v.d2211=S.d2211,v.d3210=S.d3210,v.d3222=S.d3222,v.d4410=S.d4410,v.d4422=S.d4422,v.d5220=S.d5220,v.d5232=S.d5232,v.d5421=S.d5421,v.d5433=S.d5433,v.dedt=S.dedt,v.didt=S.didt,v.dmdt=S.dmdt,v.dnodt=S.dnodt,v.domdt=S.domdt,v.del1=S.del1,v.del2=S.del2,v.del3=S.del3,v.xfact=S.xfact,v.xlamo=S.xlamo,v.xli=S.xli,v.xni=S.xni}v.isimp!==1&&($=v.cc1*v.cc1,v.d2=4*b0*p*$,T=v.d2*p*v.cc1/3,v.d3=(17*b0+x)*T,v.d4=.5*T*b0*p*(221*b0+31*x)*v.cc1,v.t3cof=v.d2+2*$,v.t4cof=.25*(3*v.d3+v.cc1*(12*v.d2+10*$)),v.t5cof=.2*(3*v.d4+12*v.cc1*v.d3+6*v.d2*v.d2+15*$*(2*v.d2+$)))}J2(v,0),v.init="n"}function c2(v,a){var n="i",z=1440/(2*G0),g=0,d={};d.error=0,d.satnum=v.substring(2,7),d.epochyr=parseInt(v.substring(18,20),10),d.epochdays=parseFloat(v.substring(20,32)),d.ndot=parseFloat(v.substring(33,43)),d.nddot=parseFloat(".".concat(parseInt(v.substring(44,50),10),"E").concat(v.substring(50,52))),d.bstar=parseFloat("".concat(v.substring(53,54),".").concat(parseInt(v.substring(54,59),10),"E").concat(v.substring(59,61))),d.inclo=parseFloat(a.substring(8,16)),d.nodeo=parseFloat(a.substring(17,25)),d.ecco=parseFloat(".".concat(a.substring(26,33))),d.argpo=parseFloat(a.substring(34,42)),d.mo=parseFloat(a.substring(43,51)),d.no=parseFloat(a.substring(52,63)),d.no/=z,d.inclo*=h2,d.nodeo*=h2,d.argpo*=h2,d.mo*=h2,d.epochyr<57?g=d.epochyr+2e3:g=d.epochyr+1900;var U=V2(g,d.epochdays),F=U.mon,i=U.day,y=U.hr,l=U.minute,w=U.sec;return d.jdsatepoch=y2(g,F,i,y,l,w),t2(d,{opsmode:n,satn:d.satnum,epoch:d.jdsatepoch-24332815e-1,xbstar:d.bstar,xecco:d.ecco,xargpo:d.argpo,xinclo:d.inclo,xmo:d.mo,xno:d.no,xnodeo:d.nodeo}),d}const r2=["error","warn","info","debug"],v2={};let Y2={};function M2(v,a,n,...z){v.enabledOutputs[a]&&n(a.toUpperCase(),...z)}function A2(v){const a=r2.indexOf(v.toLowerCase());for(let n=0;n<r2.length;n++)v2[r2[n]]=n<=a}function v1(){return{...Y2,setLogLevel:A2}}function a1(){Y2={error:M2.bind(this,{enabledOutputs:v2},"error",console.error),warn:M2.bind(this,{enabledOutputs:v2},"warn",console.warn),info:M2.bind(this,{enabledOutputs:v2},"info",console.info),debug:M2.bind(this,{enabledOutputs:v2},"debug",console.debug)};for(let v=0;v<r2.length;v++)v2[r2[v]]=!0}a1(),A2("debug");var w2=v1();let b2;const a2=[];let K2;onmessage=function(v){if(w2.debug("WORKER: Orbital calculation worker handling message"),v.data.isInit){K2=Date.now(),w2.debug("id",K2),w2.debug("message.data.isInit");const a=JSON.parse(v.data.satData);for(let n=0;n<a.length;n++)a2[n]=c2(a[n].TLE_LINE1,a[n].TLE_LINE2);b2=v.data.numSegs}else{const{satId:a}=v.data,n=new Float32Array((b2+1)*3);if(!a2||!a2[a])return;const z=new Date;let g=y2(z.getUTCFullYear(),z.getUTCMonth()+1,z.getUTCDate(),z.getUTCHours(),z.getUTCMinutes(),z.getUTCSeconds());g+=z.getUTCMilliseconds()*115741e-13;const d=(g-a2[a].jdsatepoch)*1440,F=2*Math.PI/a2[a].no/b2;for(let i=0;i<b2+1;i++){const y=d+i*F,l=J2(a2[a],y).position;try{n[i*3]=l.x,n[i*3+1]=l.y,n[i*3+2]=l.z}catch{n[i*3]=0,n[i*3+1]=0,n[i*3+2]=0}}postMessage({pointsOut:n.buffer,satId:a},[n.buffer])}}})();
