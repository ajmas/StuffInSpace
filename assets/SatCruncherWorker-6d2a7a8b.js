(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var W0=Math.PI,Q=W0*2,m2=W0/180,X2=398600.8,F0=6378.135,J0=60/Math.sqrt(F0*F0*F0/X2),t2=F0*J0/60,_2=1/J0,X0=.001082616,Q2=-253881e-11,Z2=-165597e-11,_0=Q2/X0,l2=2/3;function c2(a,o){for(var d=[31,a%4===0?29:28,31,30,31,30,31,31,30,31,30,31],m=Math.floor(o),x=1,v=0;m>v+d[x-1]&&x<12;)v+=d[x-1],x+=1;var p=x,r=m-v,i=(o-m)*24,y=Math.floor(i);i=(i-y)*60;var g=Math.floor(i),z=(i-g)*60;return{mon:p,day:r,hr:y,minute:g,sec:z}}function $2(a,o,d,m,x,v){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*a-Math.floor(7*(a+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+d+17210135e-1+((p/6e4+v/60+x)/60+m)/24}function T2(a,o,d,m,x,v,p){if(a instanceof Date){var r=a;return $2(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return $2(a,o,d,m,x,v,p)}function B2(a,o){var d=a.e3,m=a.ee2,x=a.peo,v=a.pgho,p=a.pho,r=a.pinco,i=a.plo,y=a.se2,g=a.se3,z=a.sgh2,U=a.sgh3,w=a.sgh4,V=a.sh2,h0=a.sh3,H=a.si2,F=a.si3,c=a.sl2,E=a.sl3,W=a.sl4,O=a.t,l=a.xgh2,s=a.xgh3,k=a.xgh4,D=a.xh2,R=a.xh3,j=a.xi2,b=a.xi3,d0=a.xl2,Y=a.xl3,a0=a.xl4,M=a.zmol,r0=a.zmos,J=o.init,$=o.opsmode,m0=o.ep,o0=o.inclp,f=o.nodep,s0=o.argpp,l0=o.mp,h,e,B,t,X,N,q0,v0,e0,A,L,Z,I,T,S,q,u,K,_,C,P,f0=119459e-10,g0=.01675,A0=.00015835218,y0=.0549;P=r0+f0*O,J==="y"&&(P=r0),C=P+2*g0*Math.sin(P),u=Math.sin(C),A=.5*u*u-.25,L=-.5*u*Math.cos(C);var t0=y*A+g*L,T0=H*A+F*L,p0=c*A+E*L+W*u,x0=z*A+U*L+w*u,z0=V*A+h0*L;P=M+A0*O,J==="y"&&(P=M),C=P+2*y0*Math.sin(P),u=Math.sin(C),A=.5*u*u-.25,L=-.5*u*Math.cos(C);var O0=m*A+d*L,L0=j*A+b*L,n0=d0*A+Y*L+a0*u,M0=l*A+s*L+k*u,$0=D*A+R*L;return Z=t0+O0,S=T0+L0,q=p0+n0,I=x0+M0,T=z0+$0,J==="n"&&(Z-=x,S-=r,q-=i,I-=v,T-=p,o0+=S,m0+=Z,t=Math.sin(o0),B=Math.cos(o0),o0>=.2?(T/=t,I-=B*T,s0+=I,f+=T,l0+=q):(N=Math.sin(f),X=Math.cos(f),h=t*N,e=t*X,q0=T*X+S*B*N,v0=-T*N+S*B*X,h+=q0,e+=v0,f%=Q,f<0&&$==="a"&&(f+=Q),K=l0+s0+B*f,e0=q+I-S*f*t,K+=e0,_=f,f=Math.atan2(h,e),f<0&&$==="a"&&(f+=Q),Math.abs(_-f)>W0&&(f<_?f+=Q:f-=Q),l0+=q,s0=K-l0-B*f)),{ep:m0,inclp:o0,nodep:f,argpp:s0,mp:l0}}function R2(a){var o=a.epoch,d=a.ep,m=a.argpp,x=a.tc,v=a.inclp,p=a.nodep,r=a.np,i,y,g,z,U,w,V,h0,H,F,c,E,W,O,l,s,k,D,R,j,b,d0,Y,a0,M,r0,J,$,m0,o0,f,s0,l0,h,e,B,t,X,N,q0,v0,e0,A,L,Z,I,T,S,q,u,K,_,C,P,f0,g0,A0,y0,t0,T0,p0,x0,z0,O0=.01675,L0=.0549,n0=29864797e-13,M0=47968065e-14,$0=.39785416,U0=.91744867,u0=.1945905,K0=-.98088458,G0=r,B0=d,j0=Math.sin(p),E0=Math.cos(p),w0=Math.sin(m),S0=Math.cos(m),k0=Math.sin(v),H0=Math.cos(v),n=B0*B0,N0=1-n,C0=Math.sqrt(N0),Z0=0,G=0,d2=0,p2=0,z2=0,V0=o+18261.5+x/1440,Y0=(4.523602-.00092422029*V0)%Q,b0=Math.sin(Y0),P0=Math.cos(Y0),r2=.91375164-.03568096*P0,i2=Math.sqrt(1-r2*r2),I0=.089683511*b0/i2,D0=Math.sqrt(1-I0*I0),i0=5.8351514+.001944368*V0,c0=.39785416*b0/i2,D2=D0*P0+.91744867*I0*b0;c0=Math.atan2(c0,D2),c0+=i0-Y0;var L2=Math.cos(c0),S2=Math.sin(c0);j=u0,b=K0,a0=U0,M=$0,d0=E0,Y=j0,c=n0;for(var U2=1/G0,M2=0;M2<2;)M2+=1,i=j*d0+b*a0*Y,g=-b*d0+j*a0*Y,V=-j*Y+b*a0*d0,h0=b*M,H=b*Y+j*a0*d0,F=j*M,y=H0*V+k0*h0,z=H0*H+k0*F,U=-k0*V+H0*h0,w=-k0*H+H0*F,E=i*S0+y*w0,W=g*S0+z*w0,O=-i*w0+y*S0,l=-g*w0+z*S0,s=U*w0,k=w*w0,D=U*S0,R=w*S0,p0=12*E*E-3*O*O,x0=24*E*W-6*O*l,z0=12*W*W-3*l*l,_=3*(i*i+y*y)+p0*n,C=6*(i*g+y*z)+x0*n,P=3*(g*g+z*z)+z0*n,f0=-6*i*U+n*(-24*E*D-6*O*s),g0=-6*(i*w+g*U)+n*(-24*(W*D+E*R)+-6*(O*k+l*s)),A0=-6*g*w+n*(-24*W*R-6*l*k),y0=6*y*U+n*(24*E*s-6*O*D),t0=6*(z*U+y*w)+n*(24*(W*s+E*k)-6*(l*D+O*R)),T0=6*z*w+n*(24*W*k-6*l*R),_=_+_+N0*p0,C=C+C+N0*x0,P=P+P+N0*z0,T=c*U2,I=-.5*T/C0,S=T*C0,Z=-15*B0*S,q=E*O+W*l,u=W*O+E*l,K=W*l-E*O,M2===1&&(r0=Z,J=I,$=T,m0=S,o0=q,f=u,s0=K,l0=_,h=C,e=P,B=f0,t=g0,X=A0,N=y0,q0=t0,v0=T0,e0=p0,A=x0,L=z0,j=L2,b=S2,a0=r2,M=i2,d0=D0*E0+I0*j0,Y=j0*D0-E0*I0,c=M0);var u2=(4.7199672+(.2299715*V0-i0))%Q,F2=(6.2565837+.017201977*V0)%Q,O2=2*r0*f,R0=2*r0*s0,a2=2*J*t,C2=2*J*(X-B),G2=-2*$*h,j2=-2*$*(e-l0),E2=-2*$*(-21-9*n)*O0,h2=2*m0*A,k2=2*m0*(L-e0),N2=-18*m0*O0,y2=-2*J*q0,w2=-2*J*(v0-N),b2=2*Z*u,P2=2*Z*K,W2=2*I*g0,e1=2*I*(A0-f0),f1=-2*T*C,p1=-2*T*(P-_),z1=-2*T*(-21-9*n)*L0,M1=2*S*x0,u1=2*S*(z0-p0),y1=-18*S*L0,b1=-2*I*t0,s1=-2*I*(T0-y0);return{snodm:j0,cnodm:E0,sinim:k0,cosim:H0,sinomm:w0,cosomm:S0,day:V0,e3:P2,ee2:b2,em:B0,emsq:n,gam:i0,peo:Z0,pgho:p2,pho:z2,pinco:G,plo:d2,rtemsq:C0,se2:O2,se3:R0,sgh2:h2,sgh3:k2,sgh4:N2,sh2:y2,sh3:w2,si2:a2,si3:C2,sl2:G2,sl3:j2,sl4:E2,s1:Z,s2:I,s3:T,s4:S,s5:q,s6:u,s7:K,ss1:r0,ss2:J,ss3:$,ss4:m0,ss5:o0,ss6:f,ss7:s0,sz1:l0,sz2:h,sz3:e,sz11:B,sz12:t,sz13:X,sz21:N,sz22:q0,sz23:v0,sz31:e0,sz32:A,sz33:L,xgh2:M1,xgh3:u1,xgh4:y1,xh2:b1,xh3:s1,xi2:W2,xi3:e1,xl2:f1,xl3:p1,xl4:z1,nm:G0,z1:_,z2:C,z3:P,z11:f0,z12:g0,z13:A0,z21:y0,z22:t0,z23:T0,z31:p0,z32:x0,z33:z0,zmol:u2,zmos:F2}}function a1(a){var o=a.cosim,d=a.argpo,m=a.s1,x=a.s2,v=a.s3,p=a.s4,r=a.s5,i=a.sinim,y=a.ss1,g=a.ss2,z=a.ss3,U=a.ss4,w=a.ss5,V=a.sz1,h0=a.sz3,H=a.sz11,F=a.sz13,c=a.sz21,E=a.sz23,W=a.sz31,O=a.sz33,l=a.t,s=a.tc,k=a.gsto,D=a.mo,R=a.mdot,j=a.no,b=a.nodeo,d0=a.nodedot,Y=a.xpidot,a0=a.z1,M=a.z3,r0=a.z11,J=a.z13,$=a.z21,m0=a.z23,o0=a.z31,f=a.z33,s0=a.ecco,l0=a.eccsq,h=a.emsq,e=a.em,B=a.argpm,t=a.inclm,X=a.mm,N=a.nm,q0=a.nodem,v0=a.irez,e0=a.atime,A=a.d2201,L=a.d2211,Z=a.d3210,I=a.d3222,T=a.d4410,S=a.d4422,q=a.d5220,u=a.d5232,K=a.d5421,_=a.d5433,C=a.dedt,P=a.didt,f0=a.dmdt,g0=a.dnodt,A0=a.domdt,y0=a.del1,t0=a.del2,T0=a.del3,p0=a.xfact,x0=a.xlamo,z0=a.xli,O0=a.xni,L0,n0,M0,$0,U0,u0,K0,G0,B0,j0,E0,w0,S0,k0,H0,n,N0,C0,Z0,G,d2,p2,z2,V0,Y0,b0,P0,r2,i2,I0,D0,i0,c0=17891679e-13,D2=21460748e-13,L2=22123015e-14,S2=17891679e-13,U2=73636953e-16,M2=21765803e-16,u2=.0043752690880113,F2=37393792e-14,O2=11428639e-14,R0=.00015835218,a2=119459e-10;v0=0,N<.0052359877&&N>.0034906585&&(v0=1),N>=.00826&&N<=.00924&&e>=.5&&(v0=2);var C2=y*a2*w,G2=g*a2*(H+F),j2=-a2*z*(V+h0-14-6*h),E2=U*a2*(W+O-6),h2=-a2*g*(c+E);(t<.052359877||t>W0-.052359877)&&(h2=0),i!==0&&(h2/=i);var k2=E2-o*h2;C=C2+m*R0*r,P=G2+x*R0*(r0+J),f0=j2-R0*v*(a0+M-14-6*h);var N2=p*R0*(o0+f-6),y2=-R0*x*($+m0);(t<.052359877||t>W0-.052359877)&&(y2=0),A0=k2+N2,g0=h2,i!==0&&(A0-=o/i*y2,g0+=y2/i);var w2=0,b2=(k+s*u2)%Q;if(e+=C*l,t+=P*l,B+=A0*l,q0+=g0*l,X+=f0*l,v0!==0){if(I0=Math.pow(N/J0,l2),v0===2){D0=o*o;var P2=e;e=s0;var W2=h;h=l0,i0=e*h,k0=-.306-(e-.64)*.44,e<=.65?(H0=3.616-13.247*e+16.29*h,N0=-19.302+117.39*e-228.419*h+156.591*i0,C0=-18.9068+109.7927*e-214.6334*h+146.5816*i0,Z0=-41.122+242.694*e-471.094*h+313.953*i0,G=-146.407+841.88*e-1629.014*h+1083.435*i0,d2=-532.114+3017.977*e-5740.032*h+3708.276*i0):(H0=-72.099+331.819*e-508.738*h+266.724*i0,N0=-346.844+1582.851*e-2415.925*h+1246.113*i0,C0=-342.585+1554.908*e-2366.899*h+1215.972*i0,Z0=-1052.797+4758.686*e-7193.992*h+3651.957*i0,G=-3581.69+16178.11*e-24462.77*h+12422.52*i0,e>.715?d2=-5149.66+29936.92*e-54087.36*h+31324.56*i0:d2=1464.74-4664.75*e+3763.64*h),e<.7?(V0=-919.2277+4988.61*e-9064.77*h+5542.21*i0,p2=-822.71072+4568.6173*e-8491.4146*h+5337.524*i0,z2=-853.666+4690.25*e-8624.77*h+5341.4*i0):(V0=-37995.78+161616.52*e-229838.2*h+109377.94*i0,p2=-51752.104+218913.95*e-309468.16*h+146349.42*i0,z2=-40023.88+170470.89*e-242699.48*h+115605.82*i0),Y0=i*i,L0=.75*(1+2*o+D0),n0=1.5*Y0,$0=1.875*i*(1-2*o-3*D0),U0=-1.875*i*(1+2*o-3*D0),K0=35*Y0*L0,G0=39.375*Y0*Y0,B0=9.84375*i*(Y0*(1-2*o-5*D0)+.33333333*(-2+4*o+6*D0)),j0=i*(4.92187512*Y0*(-2-4*o+10*D0)+6.56250012*(1+2*o-3*D0)),E0=29.53125*i*(2-8*o+D0*(-12+8*o+10*D0)),w0=29.53125*i*(-2-8*o+D0*(12+8*o-10*D0)),r2=N*N,i2=I0*I0,P0=3*r2*i2,b0=P0*S2,A=b0*L0*k0,L=b0*n0*H0,P0*=I0,b0=P0*F2,Z=b0*$0*N0,I=b0*U0*C0,P0*=I0,b0=2*P0*U2,T=b0*K0*Z0,S=b0*G0*G,P0*=I0,b0=P0*O2,q=b0*B0*d2,u=b0*j0*z2,b0=2*P0*M2,K=b0*E0*p2,_=b0*w0*V0,x0=(D+b+b-(b2+b2))%Q,p0=R+f0+2*(d0+g0-u2)-j,e=P2,h=W2}v0===1&&(S0=1+h*(-2.5+.8125*h),N0=1+2*h,n=1+h*(-6+6.60937*h),L0=.75*(1+o)*(1+o),M0=.9375*i*i*(1+3*o)-.75*(1+o),u0=1+o,u0*=1.875*u0*u0,y0=3*N*N*I0*I0,t0=2*y0*L0*S0*c0,T0=3*y0*u0*n*L2*I0,y0=y0*M0*N0*D2*I0,x0=(D+b+d-b2)%Q,p0=R+Y+f0+A0+g0-(j+u2)),z0=x0,O0=j,e0=0,N=j+w2}return{em:e,argpm:B,inclm:t,mm:X,nm:N,nodem:q0,irez:v0,atime:e0,d2201:A,d2211:L,d3210:Z,d3222:I,d4410:T,d4422:S,d5220:q,d5232:u,d5421:K,d5433:_,dedt:C,didt:P,dmdt:f0,dndt:w2,dnodt:g0,domdt:A0,del1:y0,del2:t0,del3:T0,xfact:p0,xlamo:x0,xli:z0,xni:O0}}function H2(a){var o=(a-2451545)/36525,d=-62e-7*o*o*o+.093104*o*o+(876600*3600+8640184812866e-6)*o+67310.54841;return d=d*m2/240%Q,d<0&&(d+=Q),d}function Y2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?H2(T2.apply(void 0,arguments)):H2.apply(void 0,arguments)}function o1(a){var o=a.ecco,d=a.epoch,m=a.inclo,x=a.opsmode,v=a.no,p=o*o,r=1-p,i=Math.sqrt(r),y=Math.cos(m),g=y*y,z=Math.pow(J0/v,l2),U=.75*X0*(3*g-1)/(i*r),w=U/(z*z),V=z*(1-w*w-w*(1/3+134*w*w/81));w=U/(V*V),v/=1+w;var h0=Math.pow(J0/v,l2),H=Math.sin(m),F=h0*r,c=1-5*g,E=-c-g-g,W=1/h0,O=F*F,l=h0*(1-o),s="n",k;if(x==="a"){var D=d-7305,R=Math.floor(D+1e-8),j=D-R,b=.017202791694070362,d0=1.7321343856509375,Y=5075514194322695e-30,a0=b+Q;k=(d0+b*R+a0*j+D*D*Y)%Q,k<0&&(k+=Q)}else k=Y2(d+24332815e-1);return{no:v,method:s,ainv:W,ao:h0,con41:E,con42:c,cosio:y,cosio2:g,eccsq:p,omeosq:r,posq:O,rp:l,rteosq:i,sinio:H,gsto:k}}function v1(a){var o=a.irez,d=a.d2201,m=a.d2211,x=a.d3210,v=a.d3222,p=a.d4410,r=a.d4422,i=a.d5220,y=a.d5232,g=a.d5421,z=a.d5433,U=a.dedt,w=a.del1,V=a.del2,h0=a.del3,H=a.didt,F=a.dmdt,c=a.dnodt,E=a.domdt,W=a.argpo,O=a.argpdot,l=a.t,s=a.tc,k=a.gsto,D=a.xfact,R=a.xlamo,j=a.no,b=a.atime,d0=a.em,Y=a.argpm,a0=a.inclm,M=a.xli,r0=a.mm,J=a.xni,$=a.nodem,m0=a.nm,o0=.13130908,f=2.8843198,s0=.37448087,l0=5.7686396,h=.95240898,e=1.8014998,B=1.050833,t=4.4108898,X=.0043752690880113,N=720,q0=-720,v0=259200,e0,A,L,Z,I,T,S,q,u=0,K=0,_=(k+s*X)%Q;if(d0+=U*l,a0+=H*l,Y+=E*l,$+=c*l,r0+=F*l,o!==0){(b===0||l*b<=0||Math.abs(l)<Math.abs(b))&&(b=0,J=j,M=R),l>0?e0=N:e0=q0;for(var C=381;C===381;)o!==2?(S=w*Math.sin(M-o0)+V*Math.sin(2*(M-f))+h0*Math.sin(3*(M-s0)),I=J+D,T=w*Math.cos(M-o0)+2*V*Math.cos(2*(M-f))+3*h0*Math.cos(3*(M-s0)),T*=I):(q=W+O*b,L=q+q,A=M+M,S=d*Math.sin(L+M-l0)+m*Math.sin(M-l0)+x*Math.sin(q+M-h)+v*Math.sin(-q+M-h)+p*Math.sin(L+A-e)+r*Math.sin(A-e)+i*Math.sin(q+M-B)+y*Math.sin(-q+M-B)+g*Math.sin(q+A-t)+z*Math.sin(-q+A-t),I=J+D,T=d*Math.cos(L+M-l0)+m*Math.cos(M-l0)+x*Math.cos(q+M-h)+v*Math.cos(-q+M-h)+i*Math.cos(q+M-B)+y*Math.cos(-q+M-B)+2*(p*Math.cos(L+A-e)+r*Math.cos(A-e)+g*Math.cos(q+A-t)+z*Math.cos(-q+A-t)),T*=I),Math.abs(l-b)>=N?C=381:(K=l-b,C=0),C===381&&(M+=I*e0+S*v0,J+=S*e0+T*v0,b+=e0);m0=J+S*K+T*K*K*.5,Z=M+I*K+S*K*K*.5,o!==1?(r0=Z-2*$+2*_,u=m0-j):(r0=Z-$-Y+_,u=m0-j),m0=j+u}return{atime:b,em:d0,argpm:Y,inclm:a0,xli:M,mm:r0,xni:J,nodem:$,dndt:u,nm:m0}}function J2(a,o){var d,m,x,v,p,r,i,y,g,z,U,w,V,h0,H,F,c,E,W,O,l,s,k,D,R,j,b,d0=15e-13;a.t=o,a.error=0;var Y=a.mo+a.mdot*a.t,a0=a.argpo+a.argpdot*a.t,M=a.nodeo+a.nodedot*a.t;g=a0,l=Y;var r0=a.t*a.t;if(k=M+a.nodecf*r0,c=1-a.cc1*a.t,E=a.bstar*a.cc4*a.t,W=a.t2cof*r0,a.isimp!==1){i=a.omgcof*a.t;var J=1+a.eta*Math.cos(Y);r=a.xmcof*(J*J*J-a.delmo),F=i+r,l=Y+F,g=a0-F,w=r0*a.t,V=w*a.t,c=c-a.d2*r0-a.d3*w-a.d4*V,E+=a.bstar*a.cc5*(Math.sin(l)-a.sinmao),W=W+a.t3cof*w+V*(a.t4cof+a.t*a.t5cof)}s=a.no;var $=a.ecco;if(O=a.inclo,a.method==="d"){h0=a.t;var m0={irez:a.irez,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,del1:a.del1,del2:a.del2,del3:a.del3,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,argpo:a.argpo,argpdot:a.argpdot,t:a.t,tc:h0,gsto:a.gsto,xfact:a.xfact,xlamo:a.xlamo,no:a.no,atime:a.atime,em:$,argpm:g,inclm:O,xli:a.xli,mm:l,xni:a.xni,nodem:k,nm:s},o0=v1(m0);$=o0.em,g=o0.argpm,O=o0.inclm,l=o0.mm,k=o0.nodem,s=o0.nm}if(s<=0)return a.error=2,[!1,!1];var f=Math.pow(J0/s,l2)*c*c;if(s=J0/Math.pow(f,1.5),$-=E,$>=1||$<-.001)return a.error=1,[!1,!1];$<1e-6&&($=1e-6),l+=a.no*W,R=l+g+k,k%=Q,g%=Q,R%=Q,l=(R-g-k)%Q;var s0=Math.sin(O),l0=Math.cos(O),h=$;if(D=O,z=g,b=k,j=l,v=s0,x=l0,a.method==="d"){var e={inclo:a.inclo,init:"n",ep:h,inclp:D,nodep:b,argpp:z,mp:j,opsmode:a.operationmode},B=B2(a,e);if(h=B.ep,b=B.nodep,z=B.argpp,j=B.mp,D=B.inclp,D<0&&(D=-D,b+=W0,z-=W0),h<0||h>1)return a.error=3,[!1,!1]}a.method==="d"&&(v=Math.sin(D),x=Math.cos(D),a.aycof=-.5*_0*v,Math.abs(x+1)>15e-13?a.xlcof=-.25*_0*v*(3+5*x)/(1+x):a.xlcof=-.25*_0*v*(3+5*x)/d0);var t=h*Math.cos(z);F=1/(f*(1-h*h));var X=h*Math.sin(z)+F*a.aycof,N=j+z+b+F*a.xlcof*t,q0=(N-b)%Q;y=q0,H=9999.9;for(var v0=1;Math.abs(H)>=1e-12&&v0<=10;)m=Math.sin(y),d=Math.cos(y),H=1-d*t-m*X,H=(q0-X*d+t*m-y)/H,Math.abs(H)>=.95&&(H>0?H=.95:H=-.95),y+=H,v0+=1;var e0=t*d+X*m,A=t*m-X*d,L=t*t+X*X,Z=f*(1-L);if(Z<0)return a.error=4,[!1,!1];var I=f*(1-e0),T=Math.sqrt(f)*A/I,S=Math.sqrt(Z)/I,q=Math.sqrt(1-L);F=A/(1+q);var u=f/I*(m-X-t*F),K=f/I*(d-t+X*F);U=Math.atan2(u,K);var _=(K+K)*u,C=1-2*u*u;F=1/Z;var P=.5*X0*F,f0=P*F;a.method==="d"&&(p=x*x,a.con41=3*p-1,a.x1mth2=1-p,a.x7thm1=7*p-1);var g0=I*(1-1.5*f0*q*a.con41)+.5*P*a.x1mth2*C;if(g0<1)return a.error=6,{position:!1,velocity:!1};U-=.25*f0*a.x7thm1*_;var A0=b+1.5*f0*x*_,y0=D+1.5*f0*x*v*C,t0=T-s*P*a.x1mth2*_/J0,T0=S+s*P*(a.x1mth2*C+1.5*a.con41)/J0,p0=Math.sin(U),x0=Math.cos(U),z0=Math.sin(A0),O0=Math.cos(A0),L0=Math.sin(y0),n0=Math.cos(y0),M0=-z0*n0,$0=O0*n0,U0=M0*p0+O0*x0,u0=$0*p0+z0*x0,K0=L0*p0,G0=M0*x0-O0*p0,B0=$0*x0-z0*p0,j0=L0*x0,E0={x:g0*U0*F0,y:g0*u0*F0,z:g0*K0*F0},w0={x:(t0*U0+T0*G0)*t2,y:(t0*u0+T0*B0)*t2,z:(t0*K0+T0*j0)*t2};return{position:E0,velocity:w0}}function n1(a,o){var d=o.opsmode,m=o.satn,x=o.epoch,v=o.xbstar,p=o.xecco,r=o.xargpo,i=o.xinclo,y=o.xmo,g=o.xno,z=o.xnodeo,U,w,V,h0,H,F,c,E,W,O,l,s,k,D,R,j,b,d0,Y,a0,M,r0,J,$,m0,o0,f,s0,l0,h,e,B,t,X,N,q0,v0,e0,A,L,Z,I,T,S,q,u,K,_,C,P,f0,g0,A0,y0,t0,T0,p0=15e-13;a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.pinco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0,a.bstar=v,a.ecco=p,a.argpo=r,a.inclo=i,a.mo=y,a.no=g,a.nodeo=z,a.operationmode=d;var x0=78/F0+1,z0=(120-78)/F0,O0=z0*z0*z0*z0;a.init="y",a.t=0;var L0={satn:m,ecco:a.ecco,epoch:x,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode},n0=o1(L0),M0=n0.ao,$0=n0.con42,U0=n0.cosio,u0=n0.cosio2,K0=n0.eccsq,G0=n0.omeosq,B0=n0.posq,j0=n0.rp,E0=n0.rteosq,w0=n0.sinio;if(a.no=n0.no,a.con41=n0.con41,a.gsto=n0.gsto,a.a=Math.pow(a.no*_2,-2/3),a.alta=a.a*(1+a.ecco)-1,a.altp=a.a*(1-a.ecco)-1,a.error=0,G0>=0||a.no>=0){if(a.isimp=0,j0<220/F0+1&&(a.isimp=1),f=x0,M=O0,d0=(j0-1)*F0,d0<156){f=d0-78,d0<98&&(f=20);var S0=(120-f)/F0;M=S0*S0*S0*S0,f=f/F0+1}Y=1/B0,u=1/(M0-f),a.eta=M0*a.ecco*u,s=a.eta*a.eta,l=a.ecco*a.eta,a0=Math.abs(1-s),F=M*Math.pow(u,4),c=F/Math.pow(a0,3.5),h0=c*a.no*(M0*(1+1.5*s+l*(4+s))+.375*X0*u/a0*a.con41*(8+3*s*(8+s))),a.cc1=a.bstar*h0,H=0,a.ecco>1e-4&&(H=-2*F*u*_0*a.no*w0/a.ecco),a.x1mth2=1-u0,a.cc4=2*a.no*c*M0*G0*(a.eta*(2+.5*s)+a.ecco*(.5+2*s)-X0*u/(M0*a0)*(-3*a.con41*(1-2*l+s*(1.5-.5*l))+.75*a.x1mth2*(2*s-l*(1+s))*Math.cos(2*a.argpo))),a.cc5=2*c*M0*G0*(1+2.75*(s+l)+l*s),E=u0*u0,T=1.5*X0*Y*a.no,S=.5*T*X0*Y,q=-.46875*Z2*Y*Y*a.no,a.mdot=a.no+.5*T*E0*a.con41+.0625*S*E0*(13-78*u0+137*E),a.argpdot=-.5*T*$0+.0625*S*(7-114*u0+395*E)+q*(3-36*u0+49*E),_=-T*U0,a.nodedot=_+(.5*S*(4-19*u0)+2*q*(3-7*u0))*U0,K=a.argpdot+a.nodedot,a.omgcof=a.bstar*H*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-l2*F*a.bstar/l),a.nodecf=3.5*G0*_*a.cc1,a.t2cof=1.5*a.cc1,Math.abs(U0+1)>15e-13?a.xlcof=-.25*_0*w0*(3+5*U0)/(1+U0):a.xlcof=-.25*_0*w0*(3+5*U0)/p0,a.aycof=-.5*_0*w0;var k0=1+a.eta*Math.cos(a.mo);if(a.delmo=k0*k0*k0,a.sinmao=Math.sin(a.mo),a.x7thm1=7*u0-1,2*W0/a.no>=225){a.method="d",a.isimp=1,Z=0,R=a.inclo;var H0={epoch:x,ep:a.ecco,argpp:a.argpo,tc:Z,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,pinco:a.pinco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},n=R2(H0);a.e3=n.e3,a.ee2=n.ee2,a.peo=n.peo,a.pgho=n.pgho,a.pho=n.pho,a.pinco=n.pinco,a.plo=n.plo,a.se2=n.se2,a.se3=n.se3,a.sgh2=n.sgh2,a.sgh3=n.sgh3,a.sgh4=n.sgh4,a.sh2=n.sh2,a.sh3=n.sh3,a.si2=n.si2,a.si3=n.si3,a.sl2=n.sl2,a.sl3=n.sl3,a.sl4=n.sl4,w=n.sinim,U=n.cosim,W=n.em,O=n.emsq,r0=n.s1,J=n.s2,$=n.s3,m0=n.s4,o0=n.s5,s0=n.ss1,l0=n.ss2,h=n.ss3,e=n.ss4,B=n.ss5,t=n.sz1,X=n.sz3,N=n.sz11,q0=n.sz13,v0=n.sz21,e0=n.sz23,A=n.sz31,L=n.sz33,a.xgh2=n.xgh2,a.xgh3=n.xgh3,a.xgh4=n.xgh4,a.xh2=n.xh2,a.xh3=n.xh3,a.xi2=n.xi2,a.xi3=n.xi3,a.xl2=n.xl2,a.xl3=n.xl3,a.xl4=n.xl4,a.zmol=n.zmol,a.zmos=n.zmos,b=n.nm,C=n.z1,P=n.z3,f0=n.z11,g0=n.z13,A0=n.z21,y0=n.z23,t0=n.z31,T0=n.z33;var N0={inclo:R,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},C0=B2(a,N0);a.ecco=C0.ep,a.inclo=C0.inclp,a.nodeo=C0.nodep,a.argpo=C0.argpp,a.mo=C0.mp,k=0,D=0,j=0;var Z0={cosim:U,emsq:O,argpo:a.argpo,s1:r0,s2:J,s3:$,s4:m0,s5:o0,sinim:w,ss1:s0,ss2:l0,ss3:h,ss4:e,ss5:B,sz1:t,sz3:X,sz11:N,sz13:q0,sz21:v0,sz23:e0,sz31:A,sz33:L,t:a.t,tc:Z,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xpidot:K,z1:C,z3:P,z11:f0,z13:g0,z21:A0,z23:y0,z31:t0,z33:T0,ecco:a.ecco,eccsq:K0,em:W,argpm:k,inclm:R,mm:j,nm:b,nodem:D,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},G=a1(Z0);a.irez=G.irez,a.atime=G.atime,a.d2201=G.d2201,a.d2211=G.d2211,a.d3210=G.d3210,a.d3222=G.d3222,a.d4410=G.d4410,a.d4422=G.d4422,a.d5220=G.d5220,a.d5232=G.d5232,a.d5421=G.d5421,a.d5433=G.d5433,a.dedt=G.dedt,a.didt=G.didt,a.dmdt=G.dmdt,a.dnodt=G.dnodt,a.domdt=G.domdt,a.del1=G.del1,a.del2=G.del2,a.del3=G.del3,a.xfact=G.xfact,a.xlamo=G.xlamo,a.xli=G.xli,a.xni=G.xni}a.isimp!==1&&(V=a.cc1*a.cc1,a.d2=4*M0*u*V,I=a.d2*u*a.cc1/3,a.d3=(17*M0+f)*I,a.d4=.5*I*M0*u*(221*M0+31*f)*a.cc1,a.t3cof=a.d2+2*V,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*V)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*V*(2*a.d2+V)))}J2(a,0),a.init="n"}function d1(a,o){var d="i",m=1440/(2*W0),x=0,v={};v.error=0,v.satnum=a.substring(2,7),v.epochyr=parseInt(a.substring(18,20),10),v.epochdays=parseFloat(a.substring(20,32)),v.ndot=parseFloat(a.substring(33,43)),v.nddot=parseFloat(".".concat(parseInt(a.substring(44,50),10),"E").concat(a.substring(50,52))),v.bstar=parseFloat("".concat(a.substring(53,54),".").concat(parseInt(a.substring(54,59),10),"E").concat(a.substring(59,61))),v.inclo=parseFloat(o.substring(8,16)),v.nodeo=parseFloat(o.substring(17,25)),v.ecco=parseFloat(".".concat(o.substring(26,33))),v.argpo=parseFloat(o.substring(34,42)),v.mo=parseFloat(o.substring(43,51)),v.no=parseFloat(o.substring(52,63)),v.no/=m,v.inclo*=m2,v.nodeo*=m2,v.argpo*=m2,v.mo*=m2,v.epochyr<57?x=v.epochyr+2e3:x=v.epochyr+1900;var p=c2(x,v.epochdays),r=p.mon,i=p.day,y=p.hr,g=p.minute,z=p.sec;return v.jdsatepoch=T2(x,r,i,y,g,z),n1(v,{opsmode:d,satn:v.satnum,epoch:v.jdsatepoch-24332815e-1,xbstar:v.bstar,xecco:v.ecco,xargpo:v.argpo,xinclo:v.inclo,xmo:v.mo,xno:v.no,xnodeo:v.nodeo}),v}function r1(a,o){for(var d=6378.137,m=6356.7523142,x=Math.sqrt(a.x*a.x+a.y*a.y),v=(d-m)/d,p=2*v-v*v,r=Math.atan2(a.y,a.x)-o;r<-W0;)r+=Q;for(;r>W0;)r-=Q;for(var i=20,y=0,g=Math.atan2(a.z,Math.sqrt(a.x*a.x+a.y*a.y)),z;y<i;)z=1/Math.sqrt(1-p*(Math.sin(g)*Math.sin(g))),g=Math.atan2(a.z+d*z*p*Math.sin(g),x),y+=1;var U=x/Math.cos(g)-d*z;return{longitude:r,latitude:g,height:U}}const i1="debug",g2=["error","warn","info","debug"];let o2={},x2=new Proxy({logLevel:i1,enabledOutputs:{},error:o2.error,warn:o2.warn,info:o2.info,debug:o2.debug,setLogLevel:h1},{});function s2(a,o,d,...m){a.enabledOutputs[o]&&d(o.toUpperCase(),...m)}function h1(a){const o=g2.indexOf(a.toLowerCase());if(o<0)throw new Error("Unknown log level");for(let d=0;d<g2.length;d++)x2.enabledOutputs[g2[d]]=d<=o}function m1(){return x2}function l1(){const a=x2,o=a.enabledOutputs;for(let d=0;d<g2.length;d++)o[g2[d]]=!0;o2={error:s2.bind(a,{enabledOutputs:o},"error",console.error),warn:s2.bind(a,{enabledOutputs:o},"warn",console.warn),info:s2.bind(a,{enabledOutputs:o},"info",console.info),debug:s2.bind(a,{enabledOutputs:o},"debug",console.debug)},x2=new Proxy({...x2,...o2},{})}l1();var e2=m1();const g1={appName:"Stuff in Space",baseUrl:"/StuffInSpace",propergateInterval:1e3,pushHistory:!1,logLevel:"debug",satWorker:{runOnce:!0},satelliteGroups:[{id:"GPSGroup",name:"GPS",groupType:"intlDes",data:["90103A","93068A","96041A","97035A","99055A","00025A","00040A","00071A","01004A","03005A","03010A","03058A","04009A","04023A","04045A","05038A","06042A","06052A","07047A","07062A","08012A","09043A","10022A","11036A","12053A","13023A","14008A","14026A","14045A","14068A","15013A"]},{id:"IridiumGroup",name:"Iridium Debris",groupType:"nameRegex",data:/IRIDIUM(?!.*DEB)/},{id:"Iridium33DebrisGroup",name:"Iridium 33 Debris",groupType:"nameRegex",data:/(COSMOS 2251|IRIDIUM 33) DEB/},{id:"GlonassGroup",name:"Glonass",groupType:"nameRegex",data:/GLONASS/},{id:"GalileoGroup",name:"Galileo",groupType:"nameRegex",data:/GALILEO/},{id:"FunGroup",name:"Fun",groupType:"nameRegex",data:/SYLDA/},{id:"WestfordNeedlesGroup",name:"Westford Needles",groupType:"nameRegex",data:/WESTFORD NEEDLES/},{id:"SpaceXGroup",name:"Space X",groupType:"nameRegex",data:/FALCON [19]/},{id:"DebrisGroup",name:"Debris",groupType:"objectType",data:"DEBRIS"},{id:"Starlink",name:"Starlink",groupType:"nameRegex",data:/STARLINK/},{id:"Unknown",name:"Unknown Objects",groupType:"objectType",data:"UNKNOWN"}]},Q0=[],x1=g1.propergateInterval;let K2=!1,f2={},v2,n2,A2,q2=!0,V2;function I2(){const a=new Date;let o=T2(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds());o+=a.getUTCMilliseconds()*115741e-13;const d=Y2(o);for(let m=0;m<Q0.length;m++){const x=(o-Q0[m].jdsatepoch)*1440,v=J2(Q0[m],x);let p,r,i,y,g,z,U;try{p=v.position.x,r=v.position.y,i=v.position.z,y=v.velocity.x,g=v.velocity.y,z=v.velocity.z,U=r1(v.position,d).height}catch{p=0,r=0,i=0,y=0,g=0,z=0,U=0}const w=3185.5;v2[m*3]=p/w,v2[m*3+1]=i/w,v2[m*3+2]=r/w,n2[m*3]=y,n2[m*3+1]=z,n2[m*3+2]=g,A2[m]=U}postMessage({satPos:v2.buffer,satVel:n2.buffer,satAlt:A2.buffer}),v2=new Float32Array(Q0.length*3),n2=new Float32Array(Q0.length*3),A2=new Float32Array(Q0.length),!K2&&q2&&(V2=setTimeout(I2,x1))}onmessage=function(a){try{e2.debug("Sat cruncher worker handling message");const o=Date.now(),d=JSON.parse(a.data);if(!Array.isArray(d)){d.config&&(f2=d.config,f2.runOnce&&(K2=f2.runOnce),f2.logLevel&&e2.setLogLevel(f2.logLevel)),d.state&&typeof d.state.running=="boolean"&&(q2=d.state.running,e2.debug(`Worker set to running === ${q2}`),q2?I2():this.clearTimeout(V2));return}const m=d.length,x=[];for(let p=0;p<m;p++){const r={},i=d1(d[p].TLE_LINE1,d[p].TLE_LINE2);r.inclination=i.inclo,r.eccentricity=i.ecco,r.raan=i.nodeo,r.argPe=i.argpo,r.meanMotion=i.no*60*24/(2*Math.PI),r.semiMajorAxis=(8681663653e-3/r.meanMotion)**(2/3),r.semiMinorAxis=r.semiMajorAxis*Math.sqrt(1-r.eccentricity**2),r.apogee=r.semiMajorAxis*(1+r.eccentricity)-6371,r.perigee=r.semiMajorAxis*(1-r.eccentricity)-6371,r.period=1440/r.meanMotion,x.push(r),Q0.push(i)}v2=new Float32Array(m*3),n2=new Float32Array(m*3),A2=new Float32Array(m);const v=Date.now();postMessage({extraData:JSON.stringify(x)}),e2.debug(`sat-cruncher init: ${Date.now()-o} ms  (incl post: ${Date.now()-v} ms)`),I2()}catch(o){e2.error("Error while runnning worker",o)}}})();
