(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var V0=Math.PI,X=V0*2,r2=V0/180,V2=398600.8,k0=6378.135,B0=60/Math.sqrt(k0*k0*k0/V2),q2=k0*B0/60,Y2=1/B0,Q0=.001082616,_2=-253881e-11,$2=-165597e-11,X0=_2/Q0,m2=2/3;function s2(v,a){for(var l=[31,v%4===0?29:28,31,30,31,30,31,31,30,31,30,31],m=Math.floor(a),g=1,o=0;m>o+l[g-1]&&g<12;)o+=l[g-1],g+=1;var p=g,n=m-o,i=(a-m)*24,b=Math.floor(i);i=(i-b)*60;var x=Math.floor(i),M=(i-x)*60;return{mon:p,day:n,hr:b,minute:x,sec:M}}function L2(v,a,l,m,g,o){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*v-Math.floor(7*(v+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+l+17210135e-1+((p/6e4+o/60+g)/60+m)/24}function w2(v,a,l,m,g,o,p){if(v instanceof Date){var n=v;return L2(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())}return L2(v,a,l,m,g,o,p)}function O2(v,a){var l=v.e3,m=v.ee2,g=v.peo,o=v.pgho,p=v.pho,n=v.pinco,i=v.plo,b=v.se2,x=v.se3,M=v.sgh2,E=v.sgh3,U=v.sgh4,Z=v.sh2,r0=v.sh3,$=v.si2,k=v.si3,R=v.sl2,O=v.sl3,V=v.sl4,P=v.t,r=v.xgh2,w=v.xgh3,G=v.xgh4,A=v.xh2,c=v.xh3,L=v.xi2,q=v.xi3,n0=v.xl2,s=v.xl3,v0=v.xl4,e=v.zmol,i0=v.zmos,B=a.init,Y=a.opsmode,m0=a.ep,a0=a.inclp,f=a.nodep,w0=a.argpp,x0=a.mp,h,z,_,T,K,H,F0,o0,z0,u,D,t,j,C,I,F,y,W,Q,N,J,f0=119459e-10,l0=.01675,u0=.00015835218,b0=.0549;J=i0+f0*P,B==="y"&&(J=i0),N=J+2*l0*Math.sin(J),y=Math.sin(N),u=.5*y*y-.25,D=-.5*y*Math.cos(N);var C0=b*u+x*D,j0=$*u+k*D,p0=R*u+O*D+V*y,g0=M*u+E*D+U*y,M0=Z*u+r0*D;J=e+u0*P,B==="y"&&(J=e),N=J+2*b0*Math.sin(J),y=Math.sin(N),u=.5*y*y-.25,D=-.5*y*Math.cos(N);var P0=m*u+l*D,D0=L*u+q*D,d0=n0*u+s*D+v0*y,e0=r*u+w*D+G*y,Y0=A*u+c*D;return t=C0+P0,I=j0+D0,F=p0+d0,j=g0+e0,C=M0+Y0,B==="n"&&(t-=g,I-=n,F-=i,j-=o,C-=p,a0+=I,m0+=t,T=Math.sin(a0),_=Math.cos(a0),a0>=.2?(C/=T,j-=_*C,w0+=j,f+=C,x0+=F):(H=Math.sin(f),K=Math.cos(f),h=T*H,z=T*K,F0=C*K+I*_*H,o0=-C*H+I*_*K,h+=F0,z+=o0,f%=X,f<0&&Y==="a"&&(f+=X),W=x0+w0+_*f,z0=F+j-I*f*T,W+=z0,Q=f,f=Math.atan2(h,z),f<0&&Y==="a"&&(f+=X),Math.abs(Q-f)>V0&&(f<Q?f+=X:f-=X),x0+=F,w0=W-x0-_*f)),{ep:m0,inclp:a0,nodep:f,argpp:w0,mp:x0}}function B2(v){var a=v.epoch,l=v.ep,m=v.argpp,g=v.tc,o=v.inclp,p=v.nodep,n=v.np,i,b,x,M,E,U,Z,r0,$,k,R,O,V,P,r,w,G,A,c,L,q,n0,s,v0,e,i0,B,Y,m0,a0,f,w0,x0,h,z,_,T,K,H,F0,o0,z0,u,D,t,j,C,I,F,y,W,Q,N,J,f0,l0,u0,b0,C0,j0,p0,g0,M0,P0=.01675,D0=.0549,d0=29864797e-13,e0=47968065e-14,Y0=.39785416,E0=.91744867,y0=.1945905,W0=-.98088458,S0=n,_0=l,L0=Math.sin(p),O0=Math.cos(p),T0=Math.sin(m),I0=Math.cos(m),G0=Math.sin(o),$0=Math.cos(o),d=_0*_0,H0=1-d,N0=Math.sqrt(H0),c0=0,S=0,d2=0,l2=0,g2=0,K0=a+18261.5+g/1440,s0=(4.523602-.00092422029*K0)%X,q0=Math.sin(s0),J0=Math.cos(s0),n2=.91375164-.03568096*J0,i2=Math.sqrt(1-n2*n2),U0=.089683511*q0/i2,A0=Math.sqrt(1-U0*U0),h0=5.8351514+.001944368*K0,v2=.39785416*q0/i2,u2=A0*J0+.91744867*U0*q0;v2=Math.atan2(v2,u2),v2+=h0-s0;var F2=Math.cos(v2),T2=Math.sin(v2);L=y0,q=W0,v0=E0,e=Y0,n0=O0,s=L0,R=d0;for(var C2=1/S0,z2=0;z2<2;)z2+=1,i=L*n0+q*v0*s,x=-q*n0+L*v0*s,Z=-L*s+q*v0*n0,r0=q*e,$=q*s+L*v0*n0,k=L*e,b=$0*Z+G0*r0,M=$0*$+G0*k,E=-G0*Z+$0*r0,U=-G0*$+$0*k,O=i*I0+b*T0,V=x*I0+M*T0,P=-i*T0+b*I0,r=-x*T0+M*I0,w=E*T0,G=U*T0,A=E*I0,c=U*I0,p0=12*O*O-3*P*P,g0=24*O*V-6*P*r,M0=12*V*V-3*r*r,Q=3*(i*i+b*b)+p0*d,N=6*(i*x+b*M)+g0*d,J=3*(x*x+M*M)+M0*d,f0=-6*i*E+d*(-24*O*A-6*P*w),l0=-6*(i*U+x*E)+d*(-24*(V*A+O*c)+-6*(P*G+r*w)),u0=-6*x*U+d*(-24*V*c-6*r*G),b0=6*b*E+d*(24*O*w-6*P*A),C0=6*(M*E+b*U)+d*(24*(V*w+O*G)-6*(r*A+P*c)),j0=6*M*U+d*(24*V*G-6*r*c),Q=Q+Q+H0*p0,N=N+N+H0*g0,J=J+J+H0*M0,C=R*C2,j=-.5*C/N0,I=C*N0,t=-15*_0*I,F=O*P+V*r,y=V*P+O*r,W=V*r-O*P,z2===1&&(i0=t,B=j,Y=C,m0=I,a0=F,f=y,w0=W,x0=Q,h=N,z=J,_=f0,T=l0,K=u0,H=b0,F0=C0,o0=j0,z0=p0,u=g0,D=M0,L=F2,q=T2,v0=n2,e=i2,n0=A0*O0+U0*L0,s=L0*A0-O0*U0,R=e0);var f2=(4.7199672+(.2299715*K0-h0))%X,j2=(6.2565837+.017201977*K0)%X,U2=2*i0*f,a2=2*i0*w0,o2=2*B*T,A2=2*B*(K-_),D2=-2*Y*h,I2=-2*Y*(z-x0),E2=-2*Y*(-21-9*d)*P0,h2=2*m0*u,k2=2*m0*(D-z0),P2=-18*m0*P0,p2=-2*B*F0,b2=-2*B*(o0-H),M2=2*t*y,N2=2*t*W,S2=2*j*l0,v1=2*j*(u0-f0),a1=-2*C*N,o1=-2*C*(J-Q),d1=-2*C*(-21-9*d)*D0,n1=2*I*g0,i1=2*I*(M0-p0),h1=-18*I*D0,r1=-2*j*C0,m1=-2*j*(j0-b0);return{snodm:L0,cnodm:O0,sinim:G0,cosim:$0,sinomm:T0,cosomm:I0,day:K0,e3:N2,ee2:M2,em:_0,emsq:d,gam:h0,peo:c0,pgho:l2,pho:g2,pinco:S,plo:d2,rtemsq:N0,se2:U2,se3:a2,sgh2:h2,sgh3:k2,sgh4:P2,sh2:p2,sh3:b2,si2:o2,si3:A2,sl2:D2,sl3:I2,sl4:E2,s1:t,s2:j,s3:C,s4:I,s5:F,s6:y,s7:W,ss1:i0,ss2:B,ss3:Y,ss4:m0,ss5:a0,ss6:f,ss7:w0,sz1:x0,sz2:h,sz3:z,sz11:_,sz12:T,sz13:K,sz21:H,sz22:F0,sz23:o0,sz31:z0,sz32:u,sz33:D,xgh2:n1,xgh3:i1,xgh4:h1,xh2:r1,xh3:m1,xi2:S2,xi3:v1,xl2:a1,xl3:o1,xl4:d1,nm:S0,z1:Q,z2:N,z3:J,z11:f0,z12:l0,z13:u0,z21:b0,z22:C0,z23:j0,z31:p0,z32:g0,z33:M0,zmol:f2,zmos:j2}}function W2(v){var a=v.cosim,l=v.argpo,m=v.s1,g=v.s2,o=v.s3,p=v.s4,n=v.s5,i=v.sinim,b=v.ss1,x=v.ss2,M=v.ss3,E=v.ss4,U=v.ss5,Z=v.sz1,r0=v.sz3,$=v.sz11,k=v.sz13,R=v.sz21,O=v.sz23,V=v.sz31,P=v.sz33,r=v.t,w=v.tc,G=v.gsto,A=v.mo,c=v.mdot,L=v.no,q=v.nodeo,n0=v.nodedot,s=v.xpidot,v0=v.z1,e=v.z3,i0=v.z11,B=v.z13,Y=v.z21,m0=v.z23,a0=v.z31,f=v.z33,w0=v.ecco,x0=v.eccsq,h=v.emsq,z=v.em,_=v.argpm,T=v.inclm,K=v.mm,H=v.nm,F0=v.nodem,o0=v.irez,z0=v.atime,u=v.d2201,D=v.d2211,t=v.d3210,j=v.d3222,C=v.d4410,I=v.d4422,F=v.d5220,y=v.d5232,W=v.d5421,Q=v.d5433,N=v.dedt,J=v.didt,f0=v.dmdt,l0=v.dnodt,u0=v.domdt,b0=v.del1,C0=v.del2,j0=v.del3,p0=v.xfact,g0=v.xlamo,M0=v.xli,P0=v.xni,D0,d0,e0,Y0,E0,y0,W0,S0,_0,L0,O0,T0,I0,G0,$0,d,H0,N0,c0,S,d2,l2,g2,K0,s0,q0,J0,n2,i2,U0,A0,h0,v2=17891679e-13,u2=21460748e-13,F2=22123015e-14,T2=17891679e-13,C2=73636953e-16,z2=21765803e-16,f2=.0043752690880113,j2=37393792e-14,U2=11428639e-14,a2=.00015835218,o2=119459e-10;o0=0,H<.0052359877&&H>.0034906585&&(o0=1),H>=.00826&&H<=.00924&&z>=.5&&(o0=2);var A2=b*o2*U,D2=x*o2*($+k),I2=-o2*M*(Z+r0-14-6*h),E2=E*o2*(V+P-6),h2=-o2*x*(R+O);(T<.052359877||T>V0-.052359877)&&(h2=0),i!==0&&(h2/=i);var k2=E2-a*h2;N=A2+m*a2*n,J=D2+g*a2*(i0+B),f0=I2-a2*o*(v0+e-14-6*h);var P2=p*a2*(a0+f-6),p2=-a2*g*(Y+m0);(T<.052359877||T>V0-.052359877)&&(p2=0),u0=k2+P2,l0=h2,i!==0&&(u0-=a/i*p2,l0+=p2/i);var b2=0,M2=(G+w*f2)%X;if(z+=N*r,T+=J*r,_+=u0*r,F0+=l0*r,K+=f0*r,o0!==0){if(U0=Math.pow(H/B0,m2),o0===2){A0=a*a;var N2=z;z=w0;var S2=h;h=x0,h0=z*h,G0=-.306-(z-.64)*.44,z<=.65?($0=3.616-13.247*z+16.29*h,H0=-19.302+117.39*z-228.419*h+156.591*h0,N0=-18.9068+109.7927*z-214.6334*h+146.5816*h0,c0=-41.122+242.694*z-471.094*h+313.953*h0,S=-146.407+841.88*z-1629.014*h+1083.435*h0,d2=-532.114+3017.977*z-5740.032*h+3708.276*h0):($0=-72.099+331.819*z-508.738*h+266.724*h0,H0=-346.844+1582.851*z-2415.925*h+1246.113*h0,N0=-342.585+1554.908*z-2366.899*h+1215.972*h0,c0=-1052.797+4758.686*z-7193.992*h+3651.957*h0,S=-3581.69+16178.11*z-24462.77*h+12422.52*h0,z>.715?d2=-5149.66+29936.92*z-54087.36*h+31324.56*h0:d2=1464.74-4664.75*z+3763.64*h),z<.7?(K0=-919.2277+4988.61*z-9064.77*h+5542.21*h0,l2=-822.71072+4568.6173*z-8491.4146*h+5337.524*h0,g2=-853.666+4690.25*z-8624.77*h+5341.4*h0):(K0=-37995.78+161616.52*z-229838.2*h+109377.94*h0,l2=-51752.104+218913.95*z-309468.16*h+146349.42*h0,g2=-40023.88+170470.89*z-242699.48*h+115605.82*h0),s0=i*i,D0=.75*(1+2*a+A0),d0=1.5*s0,Y0=1.875*i*(1-2*a-3*A0),E0=-1.875*i*(1+2*a-3*A0),W0=35*s0*D0,S0=39.375*s0*s0,_0=9.84375*i*(s0*(1-2*a-5*A0)+.33333333*(-2+4*a+6*A0)),L0=i*(4.92187512*s0*(-2-4*a+10*A0)+6.56250012*(1+2*a-3*A0)),O0=29.53125*i*(2-8*a+A0*(-12+8*a+10*A0)),T0=29.53125*i*(-2-8*a+A0*(12+8*a-10*A0)),n2=H*H,i2=U0*U0,J0=3*n2*i2,q0=J0*T2,u=q0*D0*G0,D=q0*d0*$0,J0*=U0,q0=J0*j2,t=q0*Y0*H0,j=q0*E0*N0,J0*=U0,q0=2*J0*C2,C=q0*W0*c0,I=q0*S0*S,J0*=U0,q0=J0*U2,F=q0*_0*d2,y=q0*L0*g2,q0=2*J0*z2,W=q0*O0*l2,Q=q0*T0*K0,g0=(A+q+q-(M2+M2))%X,p0=c+f0+2*(n0+l0-f2)-L,z=N2,h=S2}o0===1&&(I0=1+h*(-2.5+.8125*h),H0=1+2*h,d=1+h*(-6+6.60937*h),D0=.75*(1+a)*(1+a),e0=.9375*i*i*(1+3*a)-.75*(1+a),y0=1+a,y0*=1.875*y0*y0,b0=3*H*H*U0*U0,C0=2*b0*D0*I0*v2,j0=3*b0*y0*d*F2*U0,b0=b0*e0*H0*u2*U0,g0=(A+q+l-M2)%X,p0=c+s+f0+u0+l0-(L+f2)),M0=g0,P0=L,z0=0,H=L+b2}return{em:z,argpm:_,inclm:T,mm:K,nm:H,nodem:F0,irez:o0,atime:z0,d2201:u,d2211:D,d3210:t,d3222:j,d4410:C,d4422:I,d5220:F,d5232:y,d5421:W,d5433:Q,dedt:N,didt:J,dmdt:f0,dndt:b2,dnodt:l0,domdt:u0,del1:b0,del2:C0,del3:j0,xfact:p0,xlamo:g0,xli:M0,xni:P0}}function G2(v){var a=(v-2451545)/36525,l=-62e-7*a*a*a+.093104*a*a+(876600*3600+8640184812866e-6)*a+67310.54841;return l=l*r2/240%X,l<0&&(l+=X),l}function H2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?G2(w2.apply(void 0,arguments)):G2.apply(void 0,arguments)}function K2(v){var a=v.ecco,l=v.epoch,m=v.inclo,g=v.opsmode,o=v.no,p=a*a,n=1-p,i=Math.sqrt(n),b=Math.cos(m),x=b*b,M=Math.pow(B0/o,m2),E=.75*Q0*(3*x-1)/(i*n),U=E/(M*M),Z=M*(1-U*U-U*(1/3+134*U*U/81));U=E/(Z*Z),o/=1+U;var r0=Math.pow(B0/o,m2),$=Math.sin(m),k=r0*n,R=1-5*x,O=-R-x-x,V=1/r0,P=k*k,r=r0*(1-a),w="n",G;if(g==="a"){var A=l-7305,c=Math.floor(A+1e-8),L=A-c,q=.017202791694070362,n0=1.7321343856509375,s=5075514194322695e-30,v0=q+X;G=(n0+q*c+v0*L+A*A*s)%X,G<0&&(G+=X)}else G=H2(l+24332815e-1);return{no:o,method:w,ainv:V,ao:r0,con41:O,con42:R,cosio:b,cosio2:x,eccsq:p,omeosq:n,posq:P,rp:r,rteosq:i,sinio:$,gsto:G}}function Q2(v){var a=v.irez,l=v.d2201,m=v.d2211,g=v.d3210,o=v.d3222,p=v.d4410,n=v.d4422,i=v.d5220,b=v.d5232,x=v.d5421,M=v.d5433,E=v.dedt,U=v.del1,Z=v.del2,r0=v.del3,$=v.didt,k=v.dmdt,R=v.dnodt,O=v.domdt,V=v.argpo,P=v.argpdot,r=v.t,w=v.tc,G=v.gsto,A=v.xfact,c=v.xlamo,L=v.no,q=v.atime,n0=v.em,s=v.argpm,v0=v.inclm,e=v.xli,i0=v.mm,B=v.xni,Y=v.nodem,m0=v.nm,a0=.13130908,f=2.8843198,w0=.37448087,x0=5.7686396,h=.95240898,z=1.8014998,_=1.050833,T=4.4108898,K=.0043752690880113,H=720,F0=-720,o0=259200,z0,u,D,t,j,C,I,F,y=0,W=0,Q=(G+w*K)%X;if(n0+=E*r,v0+=$*r,s+=O*r,Y+=R*r,i0+=k*r,a!==0){(q===0||r*q<=0||Math.abs(r)<Math.abs(q))&&(q=0,B=L,e=c),r>0?z0=H:z0=F0;for(var N=381;N===381;)a!==2?(I=U*Math.sin(e-a0)+Z*Math.sin(2*(e-f))+r0*Math.sin(3*(e-w0)),j=B+A,C=U*Math.cos(e-a0)+2*Z*Math.cos(2*(e-f))+3*r0*Math.cos(3*(e-w0)),C*=j):(F=V+P*q,D=F+F,u=e+e,I=l*Math.sin(D+e-x0)+m*Math.sin(e-x0)+g*Math.sin(F+e-h)+o*Math.sin(-F+e-h)+p*Math.sin(D+u-z)+n*Math.sin(u-z)+i*Math.sin(F+e-_)+b*Math.sin(-F+e-_)+x*Math.sin(F+u-T)+M*Math.sin(-F+u-T),j=B+A,C=l*Math.cos(D+e-x0)+m*Math.cos(e-x0)+g*Math.cos(F+e-h)+o*Math.cos(-F+e-h)+i*Math.cos(F+e-_)+b*Math.cos(-F+e-_)+2*(p*Math.cos(D+u-z)+n*Math.cos(u-z)+x*Math.cos(F+u-T)+M*Math.cos(-F+u-T)),C*=j),Math.abs(r-q)>=H?N=381:(W=r-q,N=0),N===381&&(e+=j*z0+I*o0,B+=I*z0+C*o0,q+=z0);m0=B+I*W+C*W*W*.5,t=e+j*W+I*W*W*.5,a!==1?(i0=t-2*Y+2*Q,y=m0-L):(i0=t-Y-s+Q,y=m0-L),m0=L+y}return{atime:q,em:n0,argpm:s,inclm:v0,xli:e,mm:i0,xni:B,nodem:Y,dndt:y,nm:m0}}function J2(v,a){var l,m,g,o,p,n,i,b,x,M,E,U,Z,r0,$,k,R,O,V,P,r,w,G,A,c,L,q,n0=15e-13;v.t=a,v.error=0;var s=v.mo+v.mdot*v.t,v0=v.argpo+v.argpdot*v.t,e=v.nodeo+v.nodedot*v.t;x=v0,r=s;var i0=v.t*v.t;if(G=e+v.nodecf*i0,R=1-v.cc1*v.t,O=v.bstar*v.cc4*v.t,V=v.t2cof*i0,v.isimp!==1){i=v.omgcof*v.t;var B=1+v.eta*Math.cos(s);n=v.xmcof*(B*B*B-v.delmo),k=i+n,r=s+k,x=v0-k,U=i0*v.t,Z=U*v.t,R=R-v.d2*i0-v.d3*U-v.d4*Z,O+=v.bstar*v.cc5*(Math.sin(r)-v.sinmao),V=V+v.t3cof*U+Z*(v.t4cof+v.t*v.t5cof)}w=v.no;var Y=v.ecco;if(P=v.inclo,v.method==="d"){r0=v.t;var m0={irez:v.irez,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,del1:v.del1,del2:v.del2,del3:v.del3,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,argpo:v.argpo,argpdot:v.argpdot,t:v.t,tc:r0,gsto:v.gsto,xfact:v.xfact,xlamo:v.xlamo,no:v.no,atime:v.atime,em:Y,argpm:x,inclm:P,xli:v.xli,mm:r,xni:v.xni,nodem:G,nm:w},a0=Q2(m0);Y=a0.em,x=a0.argpm,P=a0.inclm,r=a0.mm,G=a0.nodem,w=a0.nm}if(w<=0)return v.error=2,[!1,!1];var f=Math.pow(B0/w,m2)*R*R;if(w=B0/Math.pow(f,1.5),Y-=O,Y>=1||Y<-.001)return v.error=1,[!1,!1];Y<1e-6&&(Y=1e-6),r+=v.no*V,c=r+x+G,G%=X,x%=X,c%=X,r=(c-x-G)%X;var w0=Math.sin(P),x0=Math.cos(P),h=Y;if(A=P,M=x,q=G,L=r,o=w0,g=x0,v.method==="d"){var z={inclo:v.inclo,init:"n",ep:h,inclp:A,nodep:q,argpp:M,mp:L,opsmode:v.operationmode},_=O2(v,z);if(h=_.ep,q=_.nodep,M=_.argpp,L=_.mp,A=_.inclp,A<0&&(A=-A,q+=V0,M-=V0),h<0||h>1)return v.error=3,[!1,!1]}v.method==="d"&&(o=Math.sin(A),g=Math.cos(A),v.aycof=-.5*X0*o,Math.abs(g+1)>15e-13?v.xlcof=-.25*X0*o*(3+5*g)/(1+g):v.xlcof=-.25*X0*o*(3+5*g)/n0);var T=h*Math.cos(M);k=1/(f*(1-h*h));var K=h*Math.sin(M)+k*v.aycof,H=L+M+q+k*v.xlcof*T,F0=(H-q)%X;b=F0,$=9999.9;for(var o0=1;Math.abs($)>=1e-12&&o0<=10;)m=Math.sin(b),l=Math.cos(b),$=1-l*T-m*K,$=(F0-K*l+T*m-b)/$,Math.abs($)>=.95&&($>0?$=.95:$=-.95),b+=$,o0+=1;var z0=T*l+K*m,u=T*m-K*l,D=T*T+K*K,t=f*(1-D);if(t<0)return v.error=4,[!1,!1];var j=f*(1-z0),C=Math.sqrt(f)*u/j,I=Math.sqrt(t)/j,F=Math.sqrt(1-D);k=u/(1+F);var y=f/j*(m-K-T*k),W=f/j*(l-T+K*k);E=Math.atan2(y,W);var Q=(W+W)*y,N=1-2*y*y;k=1/t;var J=.5*Q0*k,f0=J*k;v.method==="d"&&(p=g*g,v.con41=3*p-1,v.x1mth2=1-p,v.x7thm1=7*p-1);var l0=j*(1-1.5*f0*F*v.con41)+.5*J*v.x1mth2*N;if(l0<1)return v.error=6,{position:!1,velocity:!1};E-=.25*f0*v.x7thm1*Q;var u0=q+1.5*f0*g*Q,b0=A+1.5*f0*g*o*N,C0=C-w*J*v.x1mth2*Q/B0,j0=I+w*J*(v.x1mth2*N+1.5*v.con41)/B0,p0=Math.sin(E),g0=Math.cos(E),M0=Math.sin(u0),P0=Math.cos(u0),D0=Math.sin(b0),d0=Math.cos(b0),e0=-M0*d0,Y0=P0*d0,E0=e0*p0+P0*g0,y0=Y0*p0+M0*g0,W0=D0*p0,S0=e0*g0-P0*p0,_0=Y0*g0-M0*p0,L0=D0*g0,O0={x:l0*E0*k0,y:l0*y0*k0,z:l0*W0*k0},T0={x:(C0*E0+j0*S0)*q2,y:(C0*y0+j0*_0)*q2,z:(C0*W0+j0*L0)*q2};return{position:O0,velocity:T0}}function X2(v,a){var l=a.opsmode,m=a.satn,g=a.epoch,o=a.xbstar,p=a.xecco,n=a.xargpo,i=a.xinclo,b=a.xmo,x=a.xno,M=a.xnodeo,E,U,Z,r0,$,k,R,O,V,P,r,w,G,A,c,L,q,n0,s,v0,e,i0,B,Y,m0,a0,f,w0,x0,h,z,_,T,K,H,F0,o0,z0,u,D,t,j,C,I,F,y,W,Q,N,J,f0,l0,u0,b0,C0,j0,p0=15e-13;v.isimp=0,v.method="n",v.aycof=0,v.con41=0,v.cc1=0,v.cc4=0,v.cc5=0,v.d2=0,v.d3=0,v.d4=0,v.delmo=0,v.eta=0,v.argpdot=0,v.omgcof=0,v.sinmao=0,v.t=0,v.t2cof=0,v.t3cof=0,v.t4cof=0,v.t5cof=0,v.x1mth2=0,v.x7thm1=0,v.mdot=0,v.nodedot=0,v.xlcof=0,v.xmcof=0,v.nodecf=0,v.irez=0,v.d2201=0,v.d2211=0,v.d3210=0,v.d3222=0,v.d4410=0,v.d4422=0,v.d5220=0,v.d5232=0,v.d5421=0,v.d5433=0,v.dedt=0,v.del1=0,v.del2=0,v.del3=0,v.didt=0,v.dmdt=0,v.dnodt=0,v.domdt=0,v.e3=0,v.ee2=0,v.peo=0,v.pgho=0,v.pho=0,v.pinco=0,v.plo=0,v.se2=0,v.se3=0,v.sgh2=0,v.sgh3=0,v.sgh4=0,v.sh2=0,v.sh3=0,v.si2=0,v.si3=0,v.sl2=0,v.sl3=0,v.sl4=0,v.gsto=0,v.xfact=0,v.xgh2=0,v.xgh3=0,v.xgh4=0,v.xh2=0,v.xh3=0,v.xi2=0,v.xi3=0,v.xl2=0,v.xl3=0,v.xl4=0,v.xlamo=0,v.zmol=0,v.zmos=0,v.atime=0,v.xli=0,v.xni=0,v.bstar=o,v.ecco=p,v.argpo=n,v.inclo=i,v.mo=b,v.no=x,v.nodeo=M,v.operationmode=l;var g0=78/k0+1,M0=(120-78)/k0,P0=M0*M0*M0*M0;v.init="y",v.t=0;var D0={satn:m,ecco:v.ecco,epoch:g,inclo:v.inclo,no:v.no,method:v.method,opsmode:v.operationmode},d0=K2(D0),e0=d0.ao,Y0=d0.con42,E0=d0.cosio,y0=d0.cosio2,W0=d0.eccsq,S0=d0.omeosq,_0=d0.posq,L0=d0.rp,O0=d0.rteosq,T0=d0.sinio;if(v.no=d0.no,v.con41=d0.con41,v.gsto=d0.gsto,v.a=Math.pow(v.no*Y2,-2/3),v.alta=v.a*(1+v.ecco)-1,v.altp=v.a*(1-v.ecco)-1,v.error=0,S0>=0||v.no>=0){if(v.isimp=0,L0<220/k0+1&&(v.isimp=1),f=g0,e=P0,n0=(L0-1)*k0,n0<156){f=n0-78,n0<98&&(f=20);var I0=(120-f)/k0;e=I0*I0*I0*I0,f=f/k0+1}s=1/_0,y=1/(e0-f),v.eta=e0*v.ecco*y,w=v.eta*v.eta,r=v.ecco*v.eta,v0=Math.abs(1-w),k=e*Math.pow(y,4),R=k/Math.pow(v0,3.5),r0=R*v.no*(e0*(1+1.5*w+r*(4+w))+.375*Q0*y/v0*v.con41*(8+3*w*(8+w))),v.cc1=v.bstar*r0,$=0,v.ecco>1e-4&&($=-2*k*y*X0*v.no*T0/v.ecco),v.x1mth2=1-y0,v.cc4=2*v.no*R*e0*S0*(v.eta*(2+.5*w)+v.ecco*(.5+2*w)-Q0*y/(e0*v0)*(-3*v.con41*(1-2*r+w*(1.5-.5*r))+.75*v.x1mth2*(2*w-r*(1+w))*Math.cos(2*v.argpo))),v.cc5=2*R*e0*S0*(1+2.75*(w+r)+r*w),O=y0*y0,C=1.5*Q0*s*v.no,I=.5*C*Q0*s,F=-.46875*$2*s*s*v.no,v.mdot=v.no+.5*C*O0*v.con41+.0625*I*O0*(13-78*y0+137*O),v.argpdot=-.5*C*Y0+.0625*I*(7-114*y0+395*O)+F*(3-36*y0+49*O),Q=-C*E0,v.nodedot=Q+(.5*I*(4-19*y0)+2*F*(3-7*y0))*E0,W=v.argpdot+v.nodedot,v.omgcof=v.bstar*$*Math.cos(v.argpo),v.xmcof=0,v.ecco>1e-4&&(v.xmcof=-m2*k*v.bstar/r),v.nodecf=3.5*S0*Q*v.cc1,v.t2cof=1.5*v.cc1,Math.abs(E0+1)>15e-13?v.xlcof=-.25*X0*T0*(3+5*E0)/(1+E0):v.xlcof=-.25*X0*T0*(3+5*E0)/p0,v.aycof=-.5*X0*T0;var G0=1+v.eta*Math.cos(v.mo);if(v.delmo=G0*G0*G0,v.sinmao=Math.sin(v.mo),v.x7thm1=7*y0-1,2*V0/v.no>=225){v.method="d",v.isimp=1,t=0,c=v.inclo;var $0={epoch:g,ep:v.ecco,argpp:v.argpo,tc:t,inclp:v.inclo,nodep:v.nodeo,np:v.no,e3:v.e3,ee2:v.ee2,peo:v.peo,pgho:v.pgho,pho:v.pho,pinco:v.pinco,plo:v.plo,se2:v.se2,se3:v.se3,sgh2:v.sgh2,sgh3:v.sgh3,sgh4:v.sgh4,sh2:v.sh2,sh3:v.sh3,si2:v.si2,si3:v.si3,sl2:v.sl2,sl3:v.sl3,sl4:v.sl4,xgh2:v.xgh2,xgh3:v.xgh3,xgh4:v.xgh4,xh2:v.xh2,xh3:v.xh3,xi2:v.xi2,xi3:v.xi3,xl2:v.xl2,xl3:v.xl3,xl4:v.xl4,zmol:v.zmol,zmos:v.zmos},d=B2($0);v.e3=d.e3,v.ee2=d.ee2,v.peo=d.peo,v.pgho=d.pgho,v.pho=d.pho,v.pinco=d.pinco,v.plo=d.plo,v.se2=d.se2,v.se3=d.se3,v.sgh2=d.sgh2,v.sgh3=d.sgh3,v.sgh4=d.sgh4,v.sh2=d.sh2,v.sh3=d.sh3,v.si2=d.si2,v.si3=d.si3,v.sl2=d.sl2,v.sl3=d.sl3,v.sl4=d.sl4,U=d.sinim,E=d.cosim,V=d.em,P=d.emsq,i0=d.s1,B=d.s2,Y=d.s3,m0=d.s4,a0=d.s5,w0=d.ss1,x0=d.ss2,h=d.ss3,z=d.ss4,_=d.ss5,T=d.sz1,K=d.sz3,H=d.sz11,F0=d.sz13,o0=d.sz21,z0=d.sz23,u=d.sz31,D=d.sz33,v.xgh2=d.xgh2,v.xgh3=d.xgh3,v.xgh4=d.xgh4,v.xh2=d.xh2,v.xh3=d.xh3,v.xi2=d.xi2,v.xi3=d.xi3,v.xl2=d.xl2,v.xl3=d.xl3,v.xl4=d.xl4,v.zmol=d.zmol,v.zmos=d.zmos,q=d.nm,N=d.z1,J=d.z3,f0=d.z11,l0=d.z13,u0=d.z21,b0=d.z23,C0=d.z31,j0=d.z33;var H0={inclo:c,init:v.init,ep:v.ecco,inclp:v.inclo,nodep:v.nodeo,argpp:v.argpo,mp:v.mo,opsmode:v.operationmode},N0=O2(v,H0);v.ecco=N0.ep,v.inclo=N0.inclp,v.nodeo=N0.nodep,v.argpo=N0.argpp,v.mo=N0.mp,G=0,A=0,L=0;var c0={cosim:E,emsq:P,argpo:v.argpo,s1:i0,s2:B,s3:Y,s4:m0,s5:a0,sinim:U,ss1:w0,ss2:x0,ss3:h,ss4:z,ss5:_,sz1:T,sz3:K,sz11:H,sz13:F0,sz21:o0,sz23:z0,sz31:u,sz33:D,t:v.t,tc:t,gsto:v.gsto,mo:v.mo,mdot:v.mdot,no:v.no,nodeo:v.nodeo,nodedot:v.nodedot,xpidot:W,z1:N,z3:J,z11:f0,z13:l0,z21:u0,z23:b0,z31:C0,z33:j0,ecco:v.ecco,eccsq:W0,em:V,argpm:G,inclm:c,mm:L,nm:q,nodem:A,irez:v.irez,atime:v.atime,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,del1:v.del1,del2:v.del2,del3:v.del3,xfact:v.xfact,xlamo:v.xlamo,xli:v.xli,xni:v.xni},S=W2(c0);v.irez=S.irez,v.atime=S.atime,v.d2201=S.d2201,v.d2211=S.d2211,v.d3210=S.d3210,v.d3222=S.d3222,v.d4410=S.d4410,v.d4422=S.d4422,v.d5220=S.d5220,v.d5232=S.d5232,v.d5421=S.d5421,v.d5433=S.d5433,v.dedt=S.dedt,v.didt=S.didt,v.dmdt=S.dmdt,v.dnodt=S.dnodt,v.domdt=S.domdt,v.del1=S.del1,v.del2=S.del2,v.del3=S.del3,v.xfact=S.xfact,v.xlamo=S.xlamo,v.xli=S.xli,v.xni=S.xni}v.isimp!==1&&(Z=v.cc1*v.cc1,v.d2=4*e0*y*Z,j=v.d2*y*v.cc1/3,v.d3=(17*e0+f)*j,v.d4=.5*j*e0*y*(221*e0+31*f)*v.cc1,v.t3cof=v.d2+2*Z,v.t4cof=.25*(3*v.d3+v.cc1*(12*v.d2+10*Z)),v.t5cof=.2*(3*v.d4+12*v.cc1*v.d3+6*v.d2*v.d2+15*Z*(2*v.d2+Z)))}J2(v,0),v.init="n"}function Z2(v,a){var l="i",m=1440/(2*V0),g=0,o={};o.error=0,o.satnum=v.substring(2,7),o.epochyr=parseInt(v.substring(18,20),10),o.epochdays=parseFloat(v.substring(20,32)),o.ndot=parseFloat(v.substring(33,43)),o.nddot=parseFloat(".".concat(parseInt(v.substring(44,50),10),"E").concat(v.substring(50,52))),o.bstar=parseFloat("".concat(v.substring(53,54),".").concat(parseInt(v.substring(54,59),10),"E").concat(v.substring(59,61))),o.inclo=parseFloat(a.substring(8,16)),o.nodeo=parseFloat(a.substring(17,25)),o.ecco=parseFloat(".".concat(a.substring(26,33))),o.argpo=parseFloat(a.substring(34,42)),o.mo=parseFloat(a.substring(43,51)),o.no=parseFloat(a.substring(52,63)),o.no/=m,o.inclo*=r2,o.nodeo*=r2,o.argpo*=r2,o.mo*=r2,o.epochyr<57?g=o.epochyr+2e3:g=o.epochyr+1900;var p=s2(g,o.epochdays),n=p.mon,i=p.day,b=p.hr,x=p.minute,M=p.sec;return o.jdsatepoch=w2(g,n,i,b,x,M),X2(o,{opsmode:l,satn:o.satnum,epoch:o.jdsatepoch-24332815e-1,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}function t2(v,a){for(var l=6378.137,m=6356.7523142,g=Math.sqrt(v.x*v.x+v.y*v.y),o=(l-m)/l,p=2*o-o*o,n=Math.atan2(v.y,v.x)-a;n<-V0;)n+=X;for(;n>V0;)n-=X;for(var i=20,b=0,x=Math.atan2(v.z,Math.sqrt(v.x*v.x+v.y*v.y)),M;b<i;)M=1/Math.sqrt(1-p*(Math.sin(x)*Math.sin(x))),x=Math.atan2(v.z+l*M*p*Math.sin(x),g),b+=1;var E=g/Math.cos(x)-l*M;return{longitude:n,latitude:x,height:E}}function e2(v,a,...l){a(v,...l)}function R2(){return{error:e2.bind(this,"ERROR",console.error),warn:e2.bind(this,"WARN",console.warn),info:e2.bind(this,"INFO",console.info),debug:e2.bind(this,"DEBUG",console.debug)}}var y2=R2();const Z0=[];let t0,R0,x2;function c2(){y2.debug("Propagate");const v=new Date;let a=w2(v.getUTCFullYear(),v.getUTCMonth()+1,v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds());a+=v.getUTCMilliseconds()*115741e-13;const l=H2(a);for(let m=0;m<Z0.length;m++){const g=(a-Z0[m].jdsatepoch)*1440,o=J2(Z0[m],g);let p,n,i,b,x,M,E;try{p=o.position.x,n=o.position.y,i=o.position.z,b=o.velocity.x,x=o.velocity.y,M=o.velocity.z,E=t2(o.position,l).height}catch{p=0,n=0,i=0,b=0,x=0,M=0,E=0}t0[m*3]=p,t0[m*3+1]=n,t0[m*3+2]=i,R0[m*3]=b,R0[m*3+1]=x,R0[m*3+2]=M,x2[m]=E}postMessage({satPos:t0.buffer,satVel:R0.buffer,satAlt:x2.buffer},[t0.buffer,R0.buffer,x2.buffer]),t0=new Float32Array(Z0.length*3),R0=new Float32Array(Z0.length*3),x2=new Float32Array(Z0.length)}onmessage=function(v){try{y2.debug("Sat cruncher worker handling message");const a=Date.now(),l=JSON.parse(v.data),m=l.length,g=[];for(let p=0;p<m;p++){const n={},i=Z2(l[p].TLE_LINE1,l[p].TLE_LINE2);n.inclination=i.inclo,n.eccentricity=i.ecco,n.raan=i.nodeo,n.argPe=i.argpo,n.meanMotion=i.no*60*24/(2*Math.PI),n.semiMajorAxis=(8681663653e-3/n.meanMotion)**(2/3),n.semiMinorAxis=n.semiMajorAxis*Math.sqrt(1-n.eccentricity**2),n.apogee=n.semiMajorAxis*(1+n.eccentricity)-6371,n.perigee=n.semiMajorAxis*(1-n.eccentricity)-6371,n.period=1440/n.meanMotion,g.push(n),Z0.push(i)}t0=new Float32Array(m*3),R0=new Float32Array(m*3),x2=new Float32Array(m);const o=Date.now();postMessage({extraData:JSON.stringify(g)}),y2.debug(`sat-cruncher init: ${Date.now()-a} ms  (incl post: ${Date.now()-o} ms)`),c2()}catch(a){y2.error("Error while runnning worker",a)}}})();
