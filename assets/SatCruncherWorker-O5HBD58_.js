(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var $0=Math.PI,X=$0*2,g2=$0/180,Q2=398600.8,I0=6378.135,G0=60/Math.sqrt(I0*I0*I0/Q2),C2=I0*G0/60,X2=1/G0,K0=.001082616,Z2=-253881e-11,c2=-165597e-11,Q0=Z2/K0,x2=2/3;function R2(v,a){for(var d=[31,v%4===0?29:28,31,30,31,30,31,31,30,31,30,31],m=Math.floor(a),x=1,o=0;m>o+d[x-1]&&x<12;)o+=d[x-1],x+=1;var e=x,r=m-o,i=(a-m)*24,y=Math.floor(i);i=(i-y)*60;var g=Math.floor(i),p=(i-g)*60;return{mon:e,day:r,hr:y,minute:g,sec:p}}function J2(v,a,d,m,x,o){var e=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*v-Math.floor(7*(v+Math.floor((a+9)/12))*.25)+Math.floor(275*a/9)+d+17210135e-1+((e/6e4+o/60+x)/60+m)/24}function F2(v,a,d,m,x,o,e){if(v instanceof Date){var r=v;return J2(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return J2(v,a,d,m,x,o,e)}function V2(v,a){var d=v.e3,m=v.ee2,x=v.peo,o=v.pgho,e=v.pho,r=v.pinco,i=v.plo,y=v.se2,g=v.se3,p=v.sgh2,U=v.sgh3,T=v.sgh4,B=v.sh2,h0=v.sh3,V=v.si2,I=v.si3,c=v.sl2,E=v.sl3,$=v.sl4,O=v.t,l=v.xgh2,q=v.xgh3,S=v.xgh4,j=v.xh2,R=v.xh3,P=v.xi2,u=v.xi3,d0=v.xl2,Y=v.xl3,v0=v.xl4,M=v.zmol,r0=v.zmos,G=a.init,H=a.opsmode,m0=a.ep,a0=a.inclp,z=a.nodep,q0=a.argpp,l0=a.mp,h,f,J,C,K,_,s0,o0,f0,w,t,Z,L,F,A,s,b,W,Q,D,N,z0=119459e-10,g0=.01675,w0=.00015835218,y0=.0549;N=r0+z0*O,G==="y"&&(N=r0),D=N+2*g0*Math.sin(N),b=Math.sin(D),w=.5*b*b-.25,t=-.5*b*Math.cos(D);var C0=y*w+g*t,F0=V*w+I*t,e0=c*w+E*t+$*b,x0=p*w+U*t+T*b,p0=B*w+h0*t;N=M+w0*O,G==="y"&&(N=M),D=N+2*y0*Math.sin(N),b=Math.sin(D),w=.5*b*b-.25,t=-.5*b*Math.cos(D);var O0=m*w+d*t,t0=P*w+u*t,n0=d0*w+Y*t+v0*b,M0=l*w+q*t+S*b,H0=j*w+R*t;return Z=C0+O0,A=F0+t0,s=e0+n0,L=x0+M0,F=p0+H0,G==="n"&&(Z-=x,A-=r,s-=i,L-=o,F-=e,a0+=A,m0+=Z,C=Math.sin(a0),J=Math.cos(a0),a0>=.2?(F/=C,L-=J*F,q0+=L,z+=F,l0+=s):(_=Math.sin(z),K=Math.cos(z),h=C*_,f=C*K,s0=F*K+A*J*_,o0=-F*_+A*J*K,h+=s0,f+=o0,z%=X,z<0&&H==="a"&&(z+=X),W=l0+q0+J*z,f0=s+L-A*z*C,W+=f0,Q=z,z=Math.atan2(h,f),z<0&&H==="a"&&(z+=X),Math.abs(Q-z)>$0&&(z<Q?z+=X:z-=X),l0+=s,q0=W-l0-J*z)),{ep:m0,inclp:a0,nodep:z,argpp:q0,mp:l0}}function v1(v){var a=v.epoch,d=v.ep,m=v.argpp,x=v.tc,o=v.inclp,e=v.nodep,r=v.np,i,y,g,p,U,T,B,h0,V,I,c,E,$,O,l,q,S,j,R,P,u,d0,Y,v0,M,r0,G,H,m0,a0,z,q0,l0,h,f,J,C,K,_,s0,o0,f0,w,t,Z,L,F,A,s,b,W,Q,D,N,z0,g0,w0,y0,C0,F0,e0,x0,p0,O0=.01675,t0=.0549,n0=29864797e-13,M0=47968065e-14,H0=.39785416,U0=.91744867,b0=.1945905,W0=-.98088458,k0=r,J0=d,P0=Math.sin(e),E0=Math.cos(e),T0=Math.sin(m),A0=Math.cos(m),S0=Math.sin(o),V0=Math.cos(o),n=J0*J0,_0=1-n,D0=Math.sqrt(_0),c0=0,k=0,i2=0,z2=0,e2=0,B0=a+18261.5+x/1440,Y0=(4.523602-.00092422029*B0)%X,u0=Math.sin(Y0),N0=Math.cos(Y0),h2=.91375164-.03568096*N0,m2=Math.sqrt(1-h2*h2),L0=.089683511*u0/m2,j0=Math.sqrt(1-L0*L0),i0=5.8351514+.001944368*B0,R0=.39785416*u0/m2,t2=j0*N0+.91744867*L0*u0;R0=Math.atan2(R0,t2),R0+=i0-Y0;var A2=Math.cos(R0),U2=Math.sin(R0);P=b0,u=W0,v0=U0,M=H0,d0=E0,Y=P0,c=n0;for(var I2=1/k0,p2=0;p2<2;)p2+=1,i=P*d0+u*v0*Y,g=-u*d0+P*v0*Y,B=-P*Y+u*v0*d0,h0=u*M,V=u*Y+P*v0*d0,I=P*M,y=V0*B+S0*h0,p=V0*V+S0*I,U=-S0*B+V0*h0,T=-S0*V+V0*I,E=i*A0+y*T0,$=g*A0+p*T0,O=-i*T0+y*A0,l=-g*T0+p*A0,q=U*T0,S=T*T0,j=U*A0,R=T*A0,e0=12*E*E-3*O*O,x0=24*E*$-6*O*l,p0=12*$*$-3*l*l,Q=3*(i*i+y*y)+e0*n,D=6*(i*g+y*p)+x0*n,N=3*(g*g+p*p)+p0*n,z0=-6*i*U+n*(-24*E*j-6*O*q),g0=-6*(i*T+g*U)+n*(-24*($*j+E*R)+-6*(O*S+l*q)),w0=-6*g*T+n*(-24*$*R-6*l*S),y0=6*y*U+n*(24*E*q-6*O*j),C0=6*(p*U+y*T)+n*(24*($*q+E*S)-6*(l*j+O*R)),F0=6*p*T+n*(24*$*S-6*l*R),Q=Q+Q+_0*e0,D=D+D+_0*x0,N=N+N+_0*p0,F=c*I2,L=-.5*F/D0,A=F*D0,Z=-15*J0*A,s=E*O+$*l,b=$*O+E*l,W=$*l-E*O,p2===1&&(r0=Z,G=L,H=F,m0=A,a0=s,z=b,q0=W,l0=Q,h=D,f=N,J=z0,C=g0,K=w0,_=y0,s0=C0,o0=F0,f0=e0,w=x0,t=p0,P=A2,u=U2,v0=h2,M=m2,d0=j0*E0+L0*P0,Y=P0*j0-E0*L0,c=M0);var M2=(4.7199672+(.2299715*B0-i0))%X,O2=(6.2565837+.017201977*B0)%X,D2=2*r0*z,v2=2*r0*q0,a2=2*G*C,k2=2*G*(K-J),P2=-2*H*h,E2=-2*H*(f-l0),S2=-2*H*(-21-9*n)*O0,l2=2*m0*w,_2=2*m0*(t-f0),N2=-18*m0*O0,b2=-2*G*s0,T2=-2*G*(o0-_),y2=2*Z*b,$2=2*Z*W,H2=2*L*g0,x1=2*L*(w0-z0),f1=-2*F*D,z1=-2*F*(N-Q),e1=-2*F*(-21-9*n)*t0,p1=2*A*x0,M1=2*A*(p0-e0),b1=-18*A*t0,y1=-2*L*C0,u1=-2*L*(F0-y0);return{snodm:P0,cnodm:E0,sinim:S0,cosim:V0,sinomm:T0,cosomm:A0,day:B0,e3:$2,ee2:y2,em:J0,emsq:n,gam:i0,peo:c0,pgho:z2,pho:e2,pinco:k,plo:i2,rtemsq:D0,se2:D2,se3:v2,sgh2:l2,sgh3:_2,sgh4:N2,sh2:b2,sh3:T2,si2:a2,si3:k2,sl2:P2,sl3:E2,sl4:S2,s1:Z,s2:L,s3:F,s4:A,s5:s,s6:b,s7:W,ss1:r0,ss2:G,ss3:H,ss4:m0,ss5:a0,ss6:z,ss7:q0,sz1:l0,sz2:h,sz3:f,sz11:J,sz12:C,sz13:K,sz21:_,sz22:s0,sz23:o0,sz31:f0,sz32:w,sz33:t,xgh2:p1,xgh3:M1,xgh4:b1,xh2:y1,xh3:u1,xi2:H2,xi3:x1,xl2:f1,xl3:z1,xl4:e1,nm:k0,z1:Q,z2:D,z3:N,z11:z0,z12:g0,z13:w0,z21:y0,z22:C0,z23:F0,z31:e0,z32:x0,z33:p0,zmol:M2,zmos:O2}}function a1(v){var a=v.cosim,d=v.argpo,m=v.s1,x=v.s2,o=v.s3,e=v.s4,r=v.s5,i=v.sinim,y=v.ss1,g=v.ss2,p=v.ss3,U=v.ss4,T=v.ss5,B=v.sz1,h0=v.sz3,V=v.sz11,I=v.sz13,c=v.sz21,E=v.sz23,$=v.sz31,O=v.sz33,l=v.t,q=v.tc,S=v.gsto,j=v.mo,R=v.mdot,P=v.no,u=v.nodeo,d0=v.nodedot,Y=v.xpidot,v0=v.z1,M=v.z3,r0=v.z11,G=v.z13,H=v.z21,m0=v.z23,a0=v.z31,z=v.z33,q0=v.ecco,l0=v.eccsq,h=v.emsq,f=v.em,J=v.argpm,C=v.inclm,K=v.mm,_=v.nm,s0=v.nodem,o0=v.irez,f0=v.atime,w=v.d2201,t=v.d2211,Z=v.d3210,L=v.d3222,F=v.d4410,A=v.d4422,s=v.d5220,b=v.d5232,W=v.d5421,Q=v.d5433,D=v.dedt,N=v.didt,z0=v.dmdt,g0=v.dnodt,w0=v.domdt,y0=v.del1,C0=v.del2,F0=v.del3,e0=v.xfact,x0=v.xlamo,p0=v.xli,O0=v.xni,t0,n0,M0,H0,U0,b0,W0,k0,J0,P0,E0,T0,A0,S0,V0,n,_0,D0,c0,k,i2,z2,e2,B0,Y0,u0,N0,h2,m2,L0,j0,i0,R0=17891679e-13,t2=21460748e-13,A2=22123015e-14,U2=17891679e-13,I2=73636953e-16,p2=21765803e-16,M2=.0043752690880113,O2=37393792e-14,D2=11428639e-14,v2=.00015835218,a2=119459e-10;o0=0,_<.0052359877&&_>.0034906585&&(o0=1),_>=.00826&&_<=.00924&&f>=.5&&(o0=2);var k2=y*a2*T,P2=g*a2*(V+I),E2=-a2*p*(B+h0-14-6*h),S2=U*a2*($+O-6),l2=-a2*g*(c+E);(C<.052359877||C>$0-.052359877)&&(l2=0),i!==0&&(l2/=i);var _2=S2-a*l2;D=k2+m*v2*r,N=P2+x*v2*(r0+G),z0=E2-v2*o*(v0+M-14-6*h);var N2=e*v2*(a0+z-6),b2=-v2*x*(H+m0);(C<.052359877||C>$0-.052359877)&&(b2=0),w0=_2+N2,g0=l2,i!==0&&(w0-=a/i*b2,g0+=b2/i);var T2=0,y2=(S+q*M2)%X;if(f+=D*l,C+=N*l,J+=w0*l,s0+=g0*l,K+=z0*l,o0!==0){if(L0=Math.pow(_/G0,x2),o0===2){j0=a*a;var $2=f;f=q0;var H2=h;h=l0,i0=f*h,S0=-.306-(f-.64)*.44,f<=.65?(V0=3.616-13.247*f+16.29*h,_0=-19.302+117.39*f-228.419*h+156.591*i0,D0=-18.9068+109.7927*f-214.6334*h+146.5816*i0,c0=-41.122+242.694*f-471.094*h+313.953*i0,k=-146.407+841.88*f-1629.014*h+1083.435*i0,i2=-532.114+3017.977*f-5740.032*h+3708.276*i0):(V0=-72.099+331.819*f-508.738*h+266.724*i0,_0=-346.844+1582.851*f-2415.925*h+1246.113*i0,D0=-342.585+1554.908*f-2366.899*h+1215.972*i0,c0=-1052.797+4758.686*f-7193.992*h+3651.957*i0,k=-3581.69+16178.11*f-24462.77*h+12422.52*i0,f>.715?i2=-5149.66+29936.92*f-54087.36*h+31324.56*i0:i2=1464.74-4664.75*f+3763.64*h),f<.7?(B0=-919.2277+4988.61*f-9064.77*h+5542.21*i0,z2=-822.71072+4568.6173*f-8491.4146*h+5337.524*i0,e2=-853.666+4690.25*f-8624.77*h+5341.4*i0):(B0=-37995.78+161616.52*f-229838.2*h+109377.94*i0,z2=-51752.104+218913.95*f-309468.16*h+146349.42*i0,e2=-40023.88+170470.89*f-242699.48*h+115605.82*i0),Y0=i*i,t0=.75*(1+2*a+j0),n0=1.5*Y0,H0=1.875*i*(1-2*a-3*j0),U0=-1.875*i*(1+2*a-3*j0),W0=35*Y0*t0,k0=39.375*Y0*Y0,J0=9.84375*i*(Y0*(1-2*a-5*j0)+.33333333*(-2+4*a+6*j0)),P0=i*(4.92187512*Y0*(-2-4*a+10*j0)+6.56250012*(1+2*a-3*j0)),E0=29.53125*i*(2-8*a+j0*(-12+8*a+10*j0)),T0=29.53125*i*(-2-8*a+j0*(12+8*a-10*j0)),h2=_*_,m2=L0*L0,N0=3*h2*m2,u0=N0*U2,w=u0*t0*S0,t=u0*n0*V0,N0*=L0,u0=N0*O2,Z=u0*H0*_0,L=u0*U0*D0,N0*=L0,u0=2*N0*I2,F=u0*W0*c0,A=u0*k0*k,N0*=L0,u0=N0*D2,s=u0*J0*i2,b=u0*P0*e2,u0=2*N0*p2,W=u0*E0*z2,Q=u0*T0*B0,x0=(j+u+u-(y2+y2))%X,e0=R+z0+2*(d0+g0-M2)-P,f=$2,h=H2}o0===1&&(A0=1+h*(-2.5+.8125*h),_0=1+2*h,n=1+h*(-6+6.60937*h),t0=.75*(1+a)*(1+a),M0=.9375*i*i*(1+3*a)-.75*(1+a),b0=1+a,b0*=1.875*b0*b0,y0=3*_*_*L0*L0,C0=2*y0*t0*A0*R0,F0=3*y0*b0*n*A2*L0,y0=y0*M0*_0*t2*L0,x0=(j+u+d-y2)%X,e0=R+Y+z0+w0+g0-(P+M2)),p0=x0,O0=P,f0=0,_=P+T2}return{em:f,argpm:J,inclm:C,mm:K,nm:_,nodem:s0,irez:o0,atime:f0,d2201:w,d2211:t,d3210:Z,d3222:L,d4410:F,d4422:A,d5220:s,d5232:b,d5421:W,d5433:Q,dedt:D,didt:N,dmdt:z0,dndt:T2,dnodt:g0,domdt:w0,del1:y0,del2:C0,del3:F0,xfact:e0,xlamo:x0,xli:p0,xni:O0}}function Y2(v){var a=(v-2451545)/36525,d=-62e-7*a*a*a+.093104*a*a+(876600*3600+8640184812866e-6)*a+67310.54841;return d=d*g2/240%X,d<0&&(d+=X),d}function G2(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?Y2(F2.apply(void 0,arguments)):Y2.apply(void 0,arguments)}function o1(v){var a=v.ecco,d=v.epoch,m=v.inclo,x=v.opsmode,o=v.no,e=a*a,r=1-e,i=Math.sqrt(r),y=Math.cos(m),g=y*y,p=Math.pow(G0/o,x2),U=.75*K0*(3*g-1)/(i*r),T=U/(p*p),B=p*(1-T*T-T*(1/3+134*T*T/81));T=U/(B*B),o/=1+T;var h0=Math.pow(G0/o,x2),V=Math.sin(m),I=h0*r,c=1-5*g,E=-c-g-g,$=1/h0,O=I*I,l=h0*(1-a),q="n",S;if(x==="a"){var j=d-7305,R=Math.floor(j+1e-8),P=j-R,u=.017202791694070362,d0=1.7321343856509375,Y=5075514194322695e-30,v0=u+X;S=(d0+u*R+v0*P+j*j*Y)%X,S<0&&(S+=X)}else S=G2(d+24332815e-1);return{no:o,method:q,ainv:$,ao:h0,con41:E,con42:c,cosio:y,cosio2:g,eccsq:e,omeosq:r,posq:O,rp:l,rteosq:i,sinio:V,gsto:S}}function n1(v){var a=v.irez,d=v.d2201,m=v.d2211,x=v.d3210,o=v.d3222,e=v.d4410,r=v.d4422,i=v.d5220,y=v.d5232,g=v.d5421,p=v.d5433,U=v.dedt,T=v.del1,B=v.del2,h0=v.del3,V=v.didt,I=v.dmdt,c=v.dnodt,E=v.domdt,$=v.argpo,O=v.argpdot,l=v.t,q=v.tc,S=v.gsto,j=v.xfact,R=v.xlamo,P=v.no,u=v.atime,d0=v.em,Y=v.argpm,v0=v.inclm,M=v.xli,r0=v.mm,G=v.xni,H=v.nodem,m0=v.nm,a0=.13130908,z=2.8843198,q0=.37448087,l0=5.7686396,h=.95240898,f=1.8014998,J=1.050833,C=4.4108898,K=.0043752690880113,_=720,s0=-720,o0=259200,f0,w,t,Z,L,F,A,s,b=0,W=0,Q=(S+q*K)%X;if(d0+=U*l,v0+=V*l,Y+=E*l,H+=c*l,r0+=I*l,a!==0){(u===0||l*u<=0||Math.abs(l)<Math.abs(u))&&(u=0,G=P,M=R),l>0?f0=_:f0=s0;for(var D=381;D===381;)a!==2?(A=T*Math.sin(M-a0)+B*Math.sin(2*(M-z))+h0*Math.sin(3*(M-q0)),L=G+j,F=T*Math.cos(M-a0)+2*B*Math.cos(2*(M-z))+3*h0*Math.cos(3*(M-q0)),F*=L):(s=$+O*u,t=s+s,w=M+M,A=d*Math.sin(t+M-l0)+m*Math.sin(M-l0)+x*Math.sin(s+M-h)+o*Math.sin(-s+M-h)+e*Math.sin(t+w-f)+r*Math.sin(w-f)+i*Math.sin(s+M-J)+y*Math.sin(-s+M-J)+g*Math.sin(s+w-C)+p*Math.sin(-s+w-C),L=G+j,F=d*Math.cos(t+M-l0)+m*Math.cos(M-l0)+x*Math.cos(s+M-h)+o*Math.cos(-s+M-h)+i*Math.cos(s+M-J)+y*Math.cos(-s+M-J)+2*(e*Math.cos(t+w-f)+r*Math.cos(w-f)+g*Math.cos(s+w-C)+p*Math.cos(-s+w-C)),F*=L),Math.abs(l-u)>=_?D=381:(W=l-u,D=0),D===381&&(M+=L*f0+A*o0,G+=A*f0+F*o0,u+=f0);m0=G+A*W+F*W*W*.5,Z=M+L*W+A*W*W*.5,a!==1?(r0=Z-2*H+2*Q,b=m0-P):(r0=Z-H-Y+Q,b=m0-P),m0=P+b}return{atime:u,em:d0,argpm:Y,inclm:v0,xli:M,mm:r0,xni:G,nodem:H,dndt:b,nm:m0}}function W2(v,a){var d,m,x,o,e,r,i,y,g,p,U,T,B,h0,V,I,c,E,$,O,l,q,S,j,R,P,u,d0=15e-13;v.t=a,v.error=0;var Y=v.mo+v.mdot*v.t,v0=v.argpo+v.argpdot*v.t,M=v.nodeo+v.nodedot*v.t;g=v0,l=Y;var r0=v.t*v.t;if(S=M+v.nodecf*r0,c=1-v.cc1*v.t,E=v.bstar*v.cc4*v.t,$=v.t2cof*r0,v.isimp!==1){i=v.omgcof*v.t;var G=1+v.eta*Math.cos(Y);r=v.xmcof*(G*G*G-v.delmo),I=i+r,l=Y+I,g=v0-I,T=r0*v.t,B=T*v.t,c=c-v.d2*r0-v.d3*T-v.d4*B,E+=v.bstar*v.cc5*(Math.sin(l)-v.sinmao),$=$+v.t3cof*T+B*(v.t4cof+v.t*v.t5cof)}q=v.no;var H=v.ecco;if(O=v.inclo,v.method==="d"){h0=v.t;var m0={irez:v.irez,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,del1:v.del1,del2:v.del2,del3:v.del3,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,argpo:v.argpo,argpdot:v.argpdot,t:v.t,tc:h0,gsto:v.gsto,xfact:v.xfact,xlamo:v.xlamo,no:v.no,atime:v.atime,em:H,argpm:g,inclm:O,xli:v.xli,mm:l,xni:v.xni,nodem:S,nm:q},a0=n1(m0);H=a0.em,g=a0.argpm,O=a0.inclm,l=a0.mm,S=a0.nodem,q=a0.nm}if(q<=0)return v.error=2,[!1,!1];var z=Math.pow(G0/q,x2)*c*c;if(q=G0/Math.pow(z,1.5),H-=E,H>=1||H<-.001)return v.error=1,[!1,!1];H<1e-6&&(H=1e-6),l+=v.no*$,R=l+g+S,S%=X,g%=X,R%=X,l=(R-g-S)%X;var q0=Math.sin(O),l0=Math.cos(O),h=H;if(j=O,p=g,u=S,P=l,o=q0,x=l0,v.method==="d"){var f={inclo:v.inclo,init:"n",ep:h,inclp:j,nodep:u,argpp:p,mp:P,opsmode:v.operationmode},J=V2(v,f);if(h=J.ep,u=J.nodep,p=J.argpp,P=J.mp,j=J.inclp,j<0&&(j=-j,u+=$0,p-=$0),h<0||h>1)return v.error=3,[!1,!1]}v.method==="d"&&(o=Math.sin(j),x=Math.cos(j),v.aycof=-.5*Q0*o,Math.abs(x+1)>15e-13?v.xlcof=-.25*Q0*o*(3+5*x)/(1+x):v.xlcof=-.25*Q0*o*(3+5*x)/d0);var C=h*Math.cos(p);I=1/(z*(1-h*h));var K=h*Math.sin(p)+I*v.aycof,_=P+p+u+I*v.xlcof*C,s0=(_-u)%X;y=s0,V=9999.9;for(var o0=1;Math.abs(V)>=1e-12&&o0<=10;)m=Math.sin(y),d=Math.cos(y),V=1-d*C-m*K,V=(s0-K*d+C*m-y)/V,Math.abs(V)>=.95&&(V>0?V=.95:V=-.95),y+=V,o0+=1;var f0=C*d+K*m,w=C*m-K*d,t=C*C+K*K,Z=z*(1-t);if(Z<0)return v.error=4,[!1,!1];var L=z*(1-f0),F=Math.sqrt(z)*w/L,A=Math.sqrt(Z)/L,s=Math.sqrt(1-t);I=w/(1+s);var b=z/L*(m-K-C*I),W=z/L*(d-C+K*I);U=Math.atan2(b,W);var Q=(W+W)*b,D=1-2*b*b;I=1/Z;var N=.5*K0*I,z0=N*I;v.method==="d"&&(e=x*x,v.con41=3*e-1,v.x1mth2=1-e,v.x7thm1=7*e-1);var g0=L*(1-1.5*z0*s*v.con41)+.5*N*v.x1mth2*D;if(g0<1)return v.error=6,{position:!1,velocity:!1};U-=.25*z0*v.x7thm1*Q;var w0=u+1.5*z0*x*Q,y0=j+1.5*z0*x*o*D,C0=F-q*N*v.x1mth2*Q/G0,F0=A+q*N*(v.x1mth2*D+1.5*v.con41)/G0,e0=Math.sin(U),x0=Math.cos(U),p0=Math.sin(w0),O0=Math.cos(w0),t0=Math.sin(y0),n0=Math.cos(y0),M0=-p0*n0,H0=O0*n0,U0=M0*e0+O0*x0,b0=H0*e0+p0*x0,W0=t0*e0,k0=M0*x0-O0*e0,J0=H0*x0-p0*e0,P0=t0*x0,E0={x:g0*U0*I0,y:g0*b0*I0,z:g0*W0*I0},T0={x:(C0*U0+F0*k0)*C2,y:(C0*b0+F0*J0)*C2,z:(C0*W0+F0*P0)*C2};return{position:E0,velocity:T0}}function d1(v,a){var d=a.opsmode,m=a.satn,x=a.epoch,o=a.xbstar,e=a.xecco,r=a.xargpo,i=a.xinclo,y=a.xmo,g=a.xno,p=a.xnodeo,U,T,B,h0,V,I,c,E,$,O,l,q,S,j,R,P,u,d0,Y,v0,M,r0,G,H,m0,a0,z,q0,l0,h,f,J,C,K,_,s0,o0,f0,w,t,Z,L,F,A,s,b,W,Q,D,N,z0,g0,w0,y0,C0,F0,e0=15e-13;v.isimp=0,v.method="n",v.aycof=0,v.con41=0,v.cc1=0,v.cc4=0,v.cc5=0,v.d2=0,v.d3=0,v.d4=0,v.delmo=0,v.eta=0,v.argpdot=0,v.omgcof=0,v.sinmao=0,v.t=0,v.t2cof=0,v.t3cof=0,v.t4cof=0,v.t5cof=0,v.x1mth2=0,v.x7thm1=0,v.mdot=0,v.nodedot=0,v.xlcof=0,v.xmcof=0,v.nodecf=0,v.irez=0,v.d2201=0,v.d2211=0,v.d3210=0,v.d3222=0,v.d4410=0,v.d4422=0,v.d5220=0,v.d5232=0,v.d5421=0,v.d5433=0,v.dedt=0,v.del1=0,v.del2=0,v.del3=0,v.didt=0,v.dmdt=0,v.dnodt=0,v.domdt=0,v.e3=0,v.ee2=0,v.peo=0,v.pgho=0,v.pho=0,v.pinco=0,v.plo=0,v.se2=0,v.se3=0,v.sgh2=0,v.sgh3=0,v.sgh4=0,v.sh2=0,v.sh3=0,v.si2=0,v.si3=0,v.sl2=0,v.sl3=0,v.sl4=0,v.gsto=0,v.xfact=0,v.xgh2=0,v.xgh3=0,v.xgh4=0,v.xh2=0,v.xh3=0,v.xi2=0,v.xi3=0,v.xl2=0,v.xl3=0,v.xl4=0,v.xlamo=0,v.zmol=0,v.zmos=0,v.atime=0,v.xli=0,v.xni=0,v.bstar=o,v.ecco=e,v.argpo=r,v.inclo=i,v.mo=y,v.no=g,v.nodeo=p,v.operationmode=d;var x0=78/I0+1,p0=42/I0,O0=p0*p0*p0*p0;v.init="y",v.t=0;var t0={satn:m,ecco:v.ecco,epoch:x,inclo:v.inclo,no:v.no,method:v.method,opsmode:v.operationmode},n0=o1(t0),M0=n0.ao,H0=n0.con42,U0=n0.cosio,b0=n0.cosio2,W0=n0.eccsq,k0=n0.omeosq,J0=n0.posq,P0=n0.rp,E0=n0.rteosq,T0=n0.sinio;if(v.no=n0.no,v.con41=n0.con41,v.gsto=n0.gsto,v.a=Math.pow(v.no*X2,-2/3),v.alta=v.a*(1+v.ecco)-1,v.altp=v.a*(1-v.ecco)-1,v.error=0,k0>=0||v.no>=0){if(v.isimp=0,P0<220/I0+1&&(v.isimp=1),z=x0,M=O0,d0=(P0-1)*I0,d0<156){z=d0-78,d0<98&&(z=20);var A0=(120-z)/I0;M=A0*A0*A0*A0,z=z/I0+1}Y=1/J0,b=1/(M0-z),v.eta=M0*v.ecco*b,q=v.eta*v.eta,l=v.ecco*v.eta,v0=Math.abs(1-q),I=M*Math.pow(b,4),c=I/Math.pow(v0,3.5),h0=c*v.no*(M0*(1+1.5*q+l*(4+q))+.375*K0*b/v0*v.con41*(8+3*q*(8+q))),v.cc1=v.bstar*h0,V=0,v.ecco>1e-4&&(V=-2*I*b*Q0*v.no*T0/v.ecco),v.x1mth2=1-b0,v.cc4=2*v.no*c*M0*k0*(v.eta*(2+.5*q)+v.ecco*(.5+2*q)-K0*b/(M0*v0)*(-3*v.con41*(1-2*l+q*(1.5-.5*l))+.75*v.x1mth2*(2*q-l*(1+q))*Math.cos(2*v.argpo))),v.cc5=2*c*M0*k0*(1+2.75*(q+l)+l*q),E=b0*b0,F=1.5*K0*Y*v.no,A=.5*F*K0*Y,s=-.46875*c2*Y*Y*v.no,v.mdot=v.no+.5*F*E0*v.con41+.0625*A*E0*(13-78*b0+137*E),v.argpdot=-.5*F*H0+.0625*A*(7-114*b0+395*E)+s*(3-36*b0+49*E),Q=-F*U0,v.nodedot=Q+(.5*A*(4-19*b0)+2*s*(3-7*b0))*U0,W=v.argpdot+v.nodedot,v.omgcof=v.bstar*V*Math.cos(v.argpo),v.xmcof=0,v.ecco>1e-4&&(v.xmcof=-x2*I*v.bstar/l),v.nodecf=3.5*k0*Q*v.cc1,v.t2cof=1.5*v.cc1,Math.abs(U0+1)>15e-13?v.xlcof=-.25*Q0*T0*(3+5*U0)/(1+U0):v.xlcof=-.25*Q0*T0*(3+5*U0)/e0,v.aycof=-.5*Q0*T0;var S0=1+v.eta*Math.cos(v.mo);if(v.delmo=S0*S0*S0,v.sinmao=Math.sin(v.mo),v.x7thm1=7*b0-1,2*$0/v.no>=225){v.method="d",v.isimp=1,Z=0,R=v.inclo;var V0={epoch:x,ep:v.ecco,argpp:v.argpo,tc:Z,inclp:v.inclo,nodep:v.nodeo,np:v.no,e3:v.e3,ee2:v.ee2,peo:v.peo,pgho:v.pgho,pho:v.pho,pinco:v.pinco,plo:v.plo,se2:v.se2,se3:v.se3,sgh2:v.sgh2,sgh3:v.sgh3,sgh4:v.sgh4,sh2:v.sh2,sh3:v.sh3,si2:v.si2,si3:v.si3,sl2:v.sl2,sl3:v.sl3,sl4:v.sl4,xgh2:v.xgh2,xgh3:v.xgh3,xgh4:v.xgh4,xh2:v.xh2,xh3:v.xh3,xi2:v.xi2,xi3:v.xi3,xl2:v.xl2,xl3:v.xl3,xl4:v.xl4,zmol:v.zmol,zmos:v.zmos},n=v1(V0);v.e3=n.e3,v.ee2=n.ee2,v.peo=n.peo,v.pgho=n.pgho,v.pho=n.pho,v.pinco=n.pinco,v.plo=n.plo,v.se2=n.se2,v.se3=n.se3,v.sgh2=n.sgh2,v.sgh3=n.sgh3,v.sgh4=n.sgh4,v.sh2=n.sh2,v.sh3=n.sh3,v.si2=n.si2,v.si3=n.si3,v.sl2=n.sl2,v.sl3=n.sl3,v.sl4=n.sl4,T=n.sinim,U=n.cosim,$=n.em,O=n.emsq,r0=n.s1,G=n.s2,H=n.s3,m0=n.s4,a0=n.s5,q0=n.ss1,l0=n.ss2,h=n.ss3,f=n.ss4,J=n.ss5,C=n.sz1,K=n.sz3,_=n.sz11,s0=n.sz13,o0=n.sz21,f0=n.sz23,w=n.sz31,t=n.sz33,v.xgh2=n.xgh2,v.xgh3=n.xgh3,v.xgh4=n.xgh4,v.xh2=n.xh2,v.xh3=n.xh3,v.xi2=n.xi2,v.xi3=n.xi3,v.xl2=n.xl2,v.xl3=n.xl3,v.xl4=n.xl4,v.zmol=n.zmol,v.zmos=n.zmos,u=n.nm,D=n.z1,N=n.z3,z0=n.z11,g0=n.z13,w0=n.z21,y0=n.z23,C0=n.z31,F0=n.z33;var _0={inclo:R,init:v.init,ep:v.ecco,inclp:v.inclo,nodep:v.nodeo,argpp:v.argpo,mp:v.mo,opsmode:v.operationmode},D0=V2(v,_0);v.ecco=D0.ep,v.inclo=D0.inclp,v.nodeo=D0.nodep,v.argpo=D0.argpp,v.mo=D0.mp,S=0,j=0,P=0;var c0={cosim:U,emsq:O,argpo:v.argpo,s1:r0,s2:G,s3:H,s4:m0,s5:a0,sinim:T,ss1:q0,ss2:l0,ss3:h,ss4:f,ss5:J,sz1:C,sz3:K,sz11:_,sz13:s0,sz21:o0,sz23:f0,sz31:w,sz33:t,t:v.t,tc:Z,gsto:v.gsto,mo:v.mo,mdot:v.mdot,no:v.no,nodeo:v.nodeo,nodedot:v.nodedot,xpidot:W,z1:D,z3:N,z11:z0,z13:g0,z21:w0,z23:y0,z31:C0,z33:F0,ecco:v.ecco,eccsq:W0,em:$,argpm:S,inclm:R,mm:P,nm:u,nodem:j,irez:v.irez,atime:v.atime,d2201:v.d2201,d2211:v.d2211,d3210:v.d3210,d3222:v.d3222,d4410:v.d4410,d4422:v.d4422,d5220:v.d5220,d5232:v.d5232,d5421:v.d5421,d5433:v.d5433,dedt:v.dedt,didt:v.didt,dmdt:v.dmdt,dnodt:v.dnodt,domdt:v.domdt,del1:v.del1,del2:v.del2,del3:v.del3,xfact:v.xfact,xlamo:v.xlamo,xli:v.xli,xni:v.xni},k=a1(c0);v.irez=k.irez,v.atime=k.atime,v.d2201=k.d2201,v.d2211=k.d2211,v.d3210=k.d3210,v.d3222=k.d3222,v.d4410=k.d4410,v.d4422=k.d4422,v.d5220=k.d5220,v.d5232=k.d5232,v.d5421=k.d5421,v.d5433=k.d5433,v.dedt=k.dedt,v.didt=k.didt,v.dmdt=k.dmdt,v.dnodt=k.dnodt,v.domdt=k.domdt,v.del1=k.del1,v.del2=k.del2,v.del3=k.del3,v.xfact=k.xfact,v.xlamo=k.xlamo,v.xli=k.xli,v.xni=k.xni}v.isimp!==1&&(B=v.cc1*v.cc1,v.d2=4*M0*b*B,L=v.d2*b*v.cc1/3,v.d3=(17*M0+z)*L,v.d4=.5*L*M0*b*(221*M0+31*z)*v.cc1,v.t3cof=v.d2+2*B,v.t4cof=.25*(3*v.d3+v.cc1*(12*v.d2+10*B)),v.t5cof=.2*(3*v.d4+12*v.cc1*v.d3+6*v.d2*v.d2+15*B*(2*v.d2+B)))}W2(v,0),v.init="n"}function r1(v,a){var d="i",m=1440/(2*$0),x=0,o={};o.error=0,o.satnum=v.substring(2,7),o.epochyr=parseInt(v.substring(18,20),10),o.epochdays=parseFloat(v.substring(20,32)),o.ndot=parseFloat(v.substring(33,43)),o.nddot=parseFloat(".".concat(parseInt(v.substring(44,50),10),"E").concat(v.substring(50,52))),o.bstar=parseFloat("".concat(v.substring(53,54),".").concat(parseInt(v.substring(54,59),10),"E").concat(v.substring(59,61))),o.inclo=parseFloat(a.substring(8,16)),o.nodeo=parseFloat(a.substring(17,25)),o.ecco=parseFloat(".".concat(a.substring(26,33))),o.argpo=parseFloat(a.substring(34,42)),o.mo=parseFloat(a.substring(43,51)),o.no=parseFloat(a.substring(52,63)),o.no/=m,o.inclo*=g2,o.nodeo*=g2,o.argpo*=g2,o.mo*=g2,o.epochyr<57?x=o.epochyr+2e3:x=o.epochyr+1900;var e=R2(x,o.epochdays),r=e.mon,i=e.day,y=e.hr,g=e.minute,p=e.sec;return o.jdsatepoch=F2(x,r,i,y,g,p),d1(o,{opsmode:d,satn:o.satnum,epoch:o.jdsatepoch-24332815e-1,xbstar:o.bstar,xecco:o.ecco,xargpo:o.argpo,xinclo:o.inclo,xmo:o.mo,xno:o.no,xnodeo:o.nodeo}),o}function i1(v,a){for(var d=6378.137,m=6356.7523142,x=Math.sqrt(v.x*v.x+v.y*v.y),o=(d-m)/d,e=2*o-o*o,r=Math.atan2(v.y,v.x)-a;r<-$0;)r+=X;for(;r>$0;)r-=X;for(var i=20,y=0,g=Math.atan2(v.z,Math.sqrt(v.x*v.x+v.y*v.y)),p;y<i;)p=1/Math.sqrt(1-e*(Math.sin(g)*Math.sin(g))),g=Math.atan2(v.z+d*p*e*Math.sin(g),x),y+=1;var U=x/Math.cos(g)-d*p;return{longitude:r,latitude:g,height:U}}const h1="debug",u2=["error","warn","info","debug"];let o2={error:(...v)=>{},warn:(...v)=>{},info:(...v)=>{},debug:(...v)=>{}},f2=new Proxy({logLevel:h1,enabledOutputs:{},error:o2.error,warn:o2.warn,info:o2.info,debug:o2.debug,setLogLevel:m1},{});function q2(v,a,d,...m){v.enabledOutputs[a]&&d(a.toUpperCase(),...m)}function m1(v){const a=u2.indexOf(v.toLowerCase());if(a<0)throw new Error("Unknown log level");for(let d=0;d<u2.length;d++)f2.enabledOutputs[u2[d]]=d<=a}function l1(){return f2}function g1(){const v=f2,a=v.enabledOutputs;for(const d of u2)a[d]=!0;o2={error:q2.bind(v,{enabledOutputs:a},"error",console.error),warn:q2.bind(v,{enabledOutputs:a},"warn",console.warn),info:q2.bind(v,{enabledOutputs:a},"info",console.info),debug:q2.bind(v,{enabledOutputs:a},"debug",console.debug)},f2=new Proxy({...f2,...o2},{})}g1();var n2=l1();const X0=[];let L2=500,B2=!1,Z0={},d2,r2,w2,s2=!0,K2;function j2(){const v=new Date;let a=F2(v.getUTCFullYear(),v.getUTCMonth()+1,v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds());a+=v.getUTCMilliseconds()*115741e-13;const d=G2(a);for(let m=0;m<X0.length;m++){const x=(a-X0[m].jdsatepoch)*1440,o=W2(X0[m],x);let e,r,i,y,g,p,U;try{e=o.position.x,r=o.position.y,i=o.position.z,y=o.velocity.x,g=o.velocity.y,p=o.velocity.z,U=i1(o.position,d).height}catch{e=0,r=0,i=0,y=0,g=0,p=0,U=0}const T=3185.5;d2[m*3]=e/T,d2[m*3+1]=i/T,d2[m*3+2]=r/T,r2[m*3]=y,r2[m*3+1]=p,r2[m*3+2]=g,w2[m]=U}postMessage({satPos:d2.buffer,satVel:r2.buffer,satAlt:w2.buffer}),d2=new Float32Array(X0.length*3),r2=new Float32Array(X0.length*3),w2=new Float32Array(X0.length),!B2&&s2&&(K2=setTimeout(j2,L2))}onmessage=function(v){try{n2.debug("Sat cruncher worker handling message");const a=Date.now(),d=JSON.parse(v.data);if(!Array.isArray(d)){d.config&&(Z0=d.config,Z0.runOnce&&(B2=Z0.runOnce),Z0.logLevel&&n2.setLogLevel(Z0.logLevel),Z0.propergateIntervalMs&&(L2=Z0.propergateIntervalMs,n2.debug(`Adjusting propergateIntervalMs to be ${L2} ms`))),d.state&&typeof d.state.running=="boolean"&&(s2=d.state.running,n2.debug(`Worker set to running === ${s2}`),s2?j2():this.clearTimeout(K2));return}const m=d.length,x=[];for(let e=0;e<m;e++){const r={},i=r1(d[e].TLE_LINE1,d[e].TLE_LINE2);r.inclination=i.inclo,r.eccentricity=i.ecco,r.raan=i.nodeo,r.argPe=i.argpo,r.meanMotion=i.no*60*24/(2*Math.PI),r.semiMajorAxis=(8681663653e-3/r.meanMotion)**(2/3),r.semiMinorAxis=r.semiMajorAxis*Math.sqrt(1-r.eccentricity**2),r.apogee=r.semiMajorAxis*(1+r.eccentricity)-6371,r.perigee=r.semiMajorAxis*(1-r.eccentricity)-6371,r.period=1440/r.meanMotion,x.push(r),X0.push(i)}d2=new Float32Array(m*3),r2=new Float32Array(m*3),w2=new Float32Array(m);const o=Date.now();postMessage({extraData:JSON.stringify(x)}),n2.debug(`sat-cruncher init: ${Date.now()-a} ms  (incl post: ${Date.now()-o} ms)`),j2()}catch(a){n2.error("Error while runnning worker",a)}}})();
